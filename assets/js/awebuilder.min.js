function acChangeNewRenderedStyle(e){jQuery.isEmptyObject(e)?e.styles={}:void 0===e.styles&&(e.styles=e),e.flags={}}var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};window.AweBuilderSettings=window.AweBuilderSettings||{settings:{showGrid:!1,showTooltips:!0,customCss:{enable:!1,style:""}},elements:{},elementsTemplate:{},elementTabs:{},cachedSettings:{},styleForms:{},settingForms:{},libraries:{},baseURL:"",URLs:{buildPage:"http://localhost:8080/layout.php",save:"http://localhost:8080/save.php",element:"http://localhost:8080/element.php",templates:"http://localhost:8080/templates.php",fonts:"http://localhost:8080/get-fonts.php",icon:"http://localhost:8080/get-icon.php",library:"http://localhost:8080/src/server/files.php",fileUpload:"http://localhost:8080/upload.php"},spectrumPalette:["red","green","blue","cyan"]},jQuery.aweBuilderTemplate=function(e,t){window.AweBuilderSettings.elementsTemplate[e]=t},jQuery.aweBuilderTabElement=function(e){if(void 0===e.machineName)throw Error("You must define machine name for element tab and machine name is exclusively.");if(void 0!==window.AweBuilderSettings.elementTabs[e.machineName])throw Error("This machine name is used for another tab. Please choose other name!");if(void 0===e.title)throw Error("You must define title for this tab!");if(void 0===e.elements)throw Error("You must define elements list or url to get elements info for this tab!");var t={machineName:e.machineName,data:e.elementSettings?e.elementSettings:{}};e.elementReady&&"function"==typeof e.elementReady&&(t.ready=e.elementReady),window.AweBuilderSettings.elements[e.machineName]=t,window.AweBuilderSettings.elementTabs[e.machineName]=e},window.aweTranslate=window.aweTranslate||function(e){return e};var AweBuilder;!function(AweBuilder){function addLibrary(options){function fileReady(opts){if(options.type===AweBuilder.JS_FILE&&"string"==typeof options.checkCallback&&options.checkCallback){var jQueryFn=options.addToIframe?jQuery(".js-ac-buildzone > iframe").get(0).contentWindow.jQuery:jQuery,checkCallback_1=options.checkCallback.replace("jQuery.","jQueryFn.").replace("$.","jQueryFn."),libraryReady_1;libraryReady_1=setInterval(function(){void 0!==eval(checkCallback_1)&&(clearInterval(libraryReady_1),options.readyCallback(opts))},100)}else options.readyCallback(opts)}var doc=options.addToIframe?jQuery(".js-ac-buildzone > iframe").get(0).contentWindow.document:document,head=doc.getElementsByTagName("head")[0],tagName=options.type===AweBuilder.JS_FILE?"script":"link",node=doc.createElement(tagName),filePath=""+options.path;switch(options.type){case AweBuilder.CSS_FILE:var link=node;link.rel="stylesheet",link.type="text/css",link.href=filePath,link.media="all";break;case AweBuilder.JS_FILE:var script=node;script.type="text/javascript",script.src=filePath}"object"===jQuery.type(options.attributes)&&jQuery.map(options.attributes,function(e,t){jQuery(node).attr(t,e)});var fileOpts={type:options.type,el:node};node.readyState?node.onreadystatechange=function(){"loaded"!=node.readyState&&"complete"!=node.readyState||(node.onreadystatechange=null,fileReady(fileOpts))}:node.onload=function(){fileReady(fileOpts)},head.appendChild(node)}function addLibraries(e,t){function i(e){n.push(e)}var n=[],a=0;if(jQuery.map(e,function(e,t){var n=t.split("."),o=e&&e.type?e.type:n.pop(),s=e&&e.destination&&"array"===jQuery.type(e.destination)&&e.destination.length>0?e.destination:["frontend","backend"],l={type:o,path:t,readyCallback:i,attributes:e.attributes,alwaysAdded:e.alwaysAdded};e.checkCallback&&(l.checkCallback=e.checkCallback),-1!==jQuery.inArray("backend",s)&&(addLibrary(l),a++),-1!==jQuery.inArray("frontend",s)&&(l.addToIframe=!0,addLibrary(l),a++)}),"function"===jQuery.type(t)){var o;o=setInterval(function(){n.length===a&&(clearInterval(o),t(n))},50)}}function parseJSON(e){var t;try{t=jQuery.parseJSON(e)}catch(e){t={}}return t}function prepareAjaxParamenters(e,t){var i=window.AweBuilderSettings.URLs[e],n={url:"",data:{}};switch(jQuery.type(i)){case"object":i.url&&"string"==typeof i.url&&(n={url:i.url,data:jQuery.extend(!0,{},t)},i.extraData&&jQuery.type("object"===i.extraData)&&(n.data=jQuery.extend(!0,{},i.extraData,n.data)));break;case"string":n={url:i,data:jQuery.extend(!0,{},t)};break;default:n=!1}return n}function elementInfo(e,t){if(void 0!==window.AweBuilderSettings.elements[e])throw Error('Element plugin "'+e+'" is existed.');window.AweBuilderSettings.elements[e]=t}AweBuilder.STYLE_NORMAL="normal",AweBuilder.STYLE_HOVER="hover",AweBuilder.STYLE_ACTIVE="active",AweBuilder.STYLE_ELEMENTS={font:{title:"Font",elements:{enable:{type:"toggle",title:"Enable custom font",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElements().enable;n&&!1===n.getValue()&&n.setValue(!0)}},family:{title:"Font",type:"select",options:{"":"Default"},ajax:function(){return window.AweBuilderSettings.URLs.fonts},ajaxSuccess:function(e,t){var i;switch(jQuery.type(e)){case"string":i=parseJSON(e);break;case"object":i=e}jQuery.map(i.data,function(e,i){t.opts[i]=e.title;var n=jQuery("<li></li>");n.html(e.title),n.attr("data-val",i),e.data&&("string"!==jQuery.type(e.data)&&(e.data=JSON.stringify(e.data)),n.attr("data-data",e.data)),jQuery("ul.option-list",t.$el).append(n)}),void 0!==e.libraries&&"object"===jQuery.type(e.libraries)&&jQuery.map(e.libraries,function(t,i){addLibraries(e.libraries)})},defaultValue:"",compareWithDefault:!1,changeTo:["weight","enable"],inlineTitle:!0},weight:{type:"select",title:"Style",options:{normal:"Normal"},defaultValue:AweBuilder.STYLE_NORMAL,compareWithDefault:!1,listenChange:function(e,t,i){var n={normal:"Normal"},a=i.getElements()[e].$el,o=jQuery(".js-selected",a);1===o.length&&(n=parseJSON(o.attr("data-data"))),this.opts=n,jQuery("ul.option-list",this.$el).html(""),this.renderElementFormOpts();var s=n[Object.keys(n)[0]];this.setValue(s)}},styles:{type:"checkboxes",widget:"button",options:{italic:{title:"Italic",classes:"italic",text:"i"},underline:{title:"Underline",classes:"underline",text:"u"},"line-through":{title:"Line through",classes:"line-through",text:"s"},uppercase:{title:"Line through",classes:"uppercase",text:"A"}},defaultValue:[],compareWithDefault:!1,changeTo:"enable"},align:{type:"select",inlineTitle:!0,title:"Align",options:{left:"Left",center:"Center",right:"Right"},defaultValue:"left",compareWithDefault:!1,changeTo:"enable"},size:{type:"ranger",widthNumber:2,title:"Font size",min:0,max:100,defaultValue:0,compareWithDefault:!1,unit:"px",changeTo:"enable"},lineHeight:{type:"ranger",widthNumber:2,title:"Line height",min:0,max:100,defaultValue:0,compareWithDefault:!1,unit:"px",changeTo:"enable"},letterSpacing:{type:"ranger",widthNumber:2,title:"Letter spacing",min:0,max:100,defaultValue:0,compareWithDefault:!1,unit:"px",changeTo:"enable"},color:{type:"colorpicker",title:"Color",defaultValue:"",changeTo:"enable"}},renderHeader:function(e,t){var i={text:"",changed:!1};if(void 0!==e&&e.enable){var n=e.color?'<span class="color-info" style="background-color: '+e.color+'"></span>':"",a=e.size?e.size+" ":"",o=e.family?e.family+",  ":"";i.text=""+o+a+n,i.changed=!0}return i}},background:{title:"Background",elements:{enable:{type:"toggle",title:"Enable background",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElements().enable;n&&!1===n.getValue()&&n.setValue(!0)}},color:{title:"Background color",type:"colorpicker",defaultValue:"",compareWithDefault:!1,changeTo:"enable"},image:{type:"group",elements:{file:{title:"Background Image",type:"fileselector",defaultValue:{fid:-1,url:""},compareWithDefault:!1,changeTo:"enable",change:function(e,t,i,n){i.current.url?jQuery(".el-attachment, .el-repeat, .el-position",e).show():jQuery(".el-attachment, .el-repeat, .el-position",e).hide()}},attachment:{title:"Mode",type:"select",options:{scroll:"Scroll",fixed:"Fixed",parallax:"Parallax"},defaultValue:"scroll",compareWithDefault:!1,changeTo:"enable"},repeat:{title:"Repeat",type:"select",options:{repeat:"Repeat","repeat-x":"Repeat X","repeat-y":"Repeat Y","no-repeat":"No repeat",auto:"Size auto",cover:"Size cover"},defaultValue:"cover",compareWithDefault:!1,changeTo:"enable"},position:{title:"Position",type:"select",options:{"top left":"Top Left","right top":"Top Right","center top":"Top Center","left center":"Center Left","right center":"Center Right","center center":"Center Center","left bottom":"Bottom Left","right bottom":"Bottom Right","bottom center":"Bottom Center"},defaultValue:"center center",compareWithDefault:!1,changeTo:"enable"}}},overlay:{type:"colorpicker",title:"Overlay",defaultValue:"",compareWithDefault:!1,changeTo:"enable"}},renderHeader:function(e){var t={text:"",changed:!1};if(void 0!==e&&e.enable){var i=e.color?'<span class="color-info" style="background-color: '+e.color+'"></span>':"",n=void 0!==e.image&&void 0!==e.image.file&&e.image.file.url?'<span class="img-info" style="background-image: url(\''+e.image.file.url+"')\"></span>":"";t.text=""+i+n,t.changed=!0}return t}},border:{title:"Border & Radius",elements:{settings:{type:"group",widget:"tabs",useParentKey:!0,elements:{border:{type:"group",title:"Border",useParentKey:!0,elements:{enable:{title:"Enable border",type:"toggle",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElement("settings.border.enable");n&&!1===n.getValue()&&n.setValue(!0)}},borders:{type:"group",widget:"constraint",primary:"top",useParentKey:!0,elements:{top:{title:"Top",type:"borderbox",unit:"px",min:0,max:100,defaultValue:"0px none #000",compareWithDefault:!1,changeTo:"settings.border.enable"},right:{title:"Right",unit:"px",min:0,max:100,type:"borderbox",defaultValue:"0px none #000",compareWithDefault:!1,changeTo:"settings.border.enable"},bottom:{title:"Bottom",type:"borderbox",unit:"px",min:0,max:100,defaultValue:"0px none #000",compareWithDefault:!1,changeTo:"settings.border.enable"},left:{title:"Left",type:"borderbox",unit:"px",min:0,max:100,defaultValue:"0px none #000",compareWithDefault:!1,changeTo:"settings.border.enable"}}}}},borderRadius:{type:"group",title:"Radius",useParentKey:!0,elements:{enableRadius:{title:"Enable border radius",type:"toggle",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElement("settings.borderRadius.enableRadius");n&&!1===n.getValue()&&n.setValue(!0)}},borderRadius:{type:"group",useParentKey:!0,widget:"constraint",elements:{topLeftRadius:{title:"Top left",type:"ranger",unit:"px",min:0,max:100,defaultValue:0,compareWithDefault:!1,widthNumber:2,changeTo:"settings.borderRadius.enableRadius"},topRightRadius:{title:"Top right",unit:"px",min:0,max:100,type:"ranger",defaultValue:0,compareWithDefault:!1,widthNumber:2,changeTo:"settings.borderRadius.enableRadius"},bottomLeftRadius:{title:"Bottom left",type:"ranger",unit:"px",min:0,max:100,defaultValue:0,compareWithDefault:!1,widthNumber:2,changeTo:"settings.borderRadius.enableRadius"},bottomRightRadius:{title:"Bottom right",type:"ranger",unit:"px",min:0,max:100,defaultValue:0,compareWithDefault:!1,widthNumber:2,changeTo:"settings.borderRadius.enableRadius"}}}}}}}},renderHeader:function(e){var t={text:"",changed:!1};return e&&(e.border&&e.border.enable||e.borderRadius&&e.borderRadius.enableRadius)&&(t.changed=!0),t}},padding:{title:"Padding",elements:{enable:{title:"Enable padding",type:"toggle",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElements().enable;n&&!1===n.getValue()&&n.setValue(!0)}},paddings:{type:"group",widget:"constraint",useParentKey:!0,elements:{top:{title:"Top",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},right:{title:"Right",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},bottom:{title:"Bottom",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},left:{title:"Left",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"}}}},renderHeader:function(e){var t={text:"",changed:!1};if(e&&e.enable){var i=e.top?""+e.top:"x",n=e.left?""+e.left:"x",a=e.right?""+e.right:"x",o=e.bottom?""+e.bottom:"x";t.text=i+" "+a+" "+o+" "+n,t.changed=!0}return t}},margin:{title:"Margin",elements:{enable:{title:"Enable margin",type:"toggle",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElements().enable;n&&!1===n.getValue()&&n.setValue(!0)}},margins:{type:"group",widget:"constraint",useParentKey:!0,elements:{top:{title:"Top",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},right:{title:"Right",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},bottom:{title:"Bottom",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},left:{title:"Left",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"}}}},renderHeader:function(e){var t={text:"",changed:!1};if(e&&e.enable){var i=e.top?""+e.top:"x",n=e.left?""+e.left:"x",a=e.right?""+e.right:"x",o=e.bottom?""+e.bottom:"x";t.text=i+" "+a+" "+o+" "+n,t.changed=!0}return t}},transform:{title:"Transform",renderHeader:function(e){var t={text:"",changed:!1};return e&&e.enable&&(t.changed=!0),t},elements:{enable:{title:"Transform",type:"toggle",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElements().enable;n&&!1===n.getValue()&&n.setValue(!0)}},translateX:{title:"TranslateX",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},translateY:{title:"TranslateY",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},scaleX:{title:"ScaleX",type:"ranger",widthNumber:2,min:0,max:100,step:1,unit:!1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},scaleY:{title:"ScaleY",type:"ranger",widthNumber:2,min:0,max:100,step:1,unit:!1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},rotateX:{title:"RotateX",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,unit:"deg",compareWithDefault:!1,changeTo:"enable"},rotateY:{title:"RotateY",type:"ranger",widthNumber:2,min:0,max:100,step:1,unit:"deg",defaultValue:0,compareWithDefault:!1,changeTo:"enable"},skewX:{title:"SkewX",type:"ranger",widthNumber:2,min:0,max:100,step:1,unit:"deg",defaultValue:0,compareWithDefault:!1,changeTo:"enable"},skewY:{title:"SkewY",type:"ranger",widthNumber:2,unit:"deg",min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"},perspective:{title:"Perspective",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"enable"}}},shadow:{title:"Shadow",elements:{shadow:{type:"group",widget:"tabs",useParentKey:!0,elements:{box:{type:"group",title:"Box",elements:{enable:{type:"toggle",title:"Enable box shadow",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElement("shadow.box.enable");n&&!1===n.getValue()&&n.setValue(!0)}},horizontal:{title:"Horizontal Length",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"shadow.box.enable"},vertical:{title:"Vertical Length",type:"ranger",widthNumber:2,min:0,max:100,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"shadow.box.enable"},blur:{title:"Blur Radius",type:"ranger",widthNumber:2,min:0,max:100,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"shadow.box.enable"},spread:{title:"Spread Radius",type:"ranger",widthNumber:2,min:0,max:100,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"shadow.box.enable"},color:{type:"colorpicker",title:"Shadow color",defaultValue:"",compareWithDefault:!1,changeTo:"shadow.box.enable"},inset:{type:"toggle",title:"Inset",defaultValue:!1,compareWithDefault:!1,changeTo:"shadow.box.enable"}}},text:{type:"group",title:"Text",elements:{enable:{type:"toggle",title:"Enable text shadow",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElement("shadow.text.enable");n&&!1===n.getValue()&&n.setValue(!0)}},horizontal:{title:"Horizontal Length",type:"ranger",widthNumber:2,min:0,max:100,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"shadow.text.enable"},vertical:{title:"Vertical Length",type:"ranger",widthNumber:2,min:0,max:100,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"shadow.text.enable"},blur:{title:"Blur Radius",type:"ranger",widthNumber:2,min:0,max:100,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"shadow.text.enable"},color:{type:"colorpicker",title:"Shadow color",compareWithDefault:!1,defaultValue:"",changeTo:"shadow.text.enable"}}}}}},renderHeader:function(e){var t={text:"",changed:!1};return e&&(e.box&&e.box.enable||e.text&&e.text.enable)&&(t.changed=!0),t}},sizePosition:{title:"Size & Postion",renderHeader:function(e){var t={text:"",changed:!1};return e&&(e.size&&e.size.enableSize||e.position&&e.position.enablePosition)&&(t.changed=!0),t},elements:{settings:{type:"group",widget:"tabs",useParentKey:!0,elements:{size:{type:"group",title:"Size",useParentKey:!0,elements:{enableSize:{type:"toggle",title:"Enable custom size",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElement("settings.size.enableSize");n&&!1===n.getValue()&&n.setValue(!0)}},width:{title:"Width",type:"ranger",widthNumber:2,min:0,max:1e3,step:1,defaultValue:"0px",compareWithDefault:!1,changeTo:"settings.size.enableSize"},height:{title:"Height",type:"ranger",widthNumber:2,min:0,max:1e3,step:1,defaultValue:"0px",compareWithDefault:!1,changeTo:"settings.size.enableSize"},minHeight:{title:"Min Height",type:"ranger",widthNumber:2,min:0,max:1e3,step:1,defaultValue:"0px",compareWithDefault:!1,changeTo:"settings.size.enableSize"}}},position:{type:"group",title:"Position",useParentKey:!0,elements:{enablePosition:{type:"toggle",title:"Enable custom position",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElement("settings.position.enablePosition");n&&!1===n.getValue()&&n.setValue(!0)}},position:{title:"Position",type:"select",inlineTitle:!0,options:{relative:"Relative",absolute:"Absolute",fixed:"Fixed",static:"Static"},compareWithDefault:!1,defaultValue:"static",change:function(e,t,i){"static"===i.current?jQuery(".el-special, .el-left, .el-right, .el-top, .el-bottom, .el-zIndex",e).hide():"relative"===i.current?(jQuery(".el-left, .el-right, .el-top, .el-bottom, .el-zIndex",e).show(),jQuery(".el-special",e).hide()):jQuery(".el-special, .el-left, .el-right, .el-top, .el-bottom, .el-zIndex",e).show()},changeTo:"settings.position.enablePosition"},special:{type:"select",title:"Special",inlineTitle:!0,options:{none:"None",center_top:"Center Top",center_center:"Center Center",center_bottom:"Center Bottom",left_center:"Left Center",right_center:"Right Center"},defaultValue:"custom",compareWithDefault:!1,change:function(e,t,i){switch(jQuery(".el-left, .el-right, .el-top, .el-bottom",e).hide(),i.current){case"center_top":jQuery(".el-top",e).show();break;case"center_bottom":jQuery(".el-bottom",e).show();break;case"left_center":jQuery(".el-left",e).show();break;case"right_center":jQuery(".el-right",e).show();break;case"none":jQuery(".el-left, .el-right, .el-top, .el-bottom",e).show()}},changeTo:"settings.position.enablePosition"},top:{title:"Top",type:"ranger",widthNumber:2,min:0,max:1e3,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"settings.position.enablePosition"},right:{title:"Right",type:"ranger",widthNumber:2,min:0,max:1e3,step:1,compareWithDefault:!1,defaultValue:0,changeTo:"settings.position.enablePosition"},bottom:{title:"Bottom",type:"ranger",widthNumber:2,min:0,max:1e3,step:1,defaultValue:0,compareWithDefault:!1,changeTo:"settings.position.enablePosition"},left:{title:"Left",type:"ranger",widthNumber:2,min:0,max:1e3,compareWithDefault:!1,step:1,defaultValue:0,changeTo:"settings.position.enablePosition"},zIndex:{title:"z index",type:"ranger",widthNumber:2,min:0,max:1e3,compareWithDefault:!1,step:1,defaultValue:0,unit:!1,changeTo:"settings.position.enablePosition"}}}}}}}},AweBuilder.ANIMATION_ELEMENTS={enable:{type:"toggle",title:"Animation",defaultValue:!1,listenChange:function(e,t,i){var n=i.getElements().enable;n&&!1===n.getValue()&&n.setValue(!0)}},animation:{type:"select",title:"Animate",options:{fadeIn:"fadeIn",fadeInDown:"fadeInDown",fadeInDownBig:"fadeInDownBig",fadeInLeft:"fadeInLeft",fadeInLeftBig:"fadeInLeftBig",fadeInRight:"fadeInRight",fadeInRightBig:"fadeInRightBig",fadeInUp:"fadeInUp",fadeInUpBig:"fadeInUpBig",slideInDown:"slideInDown",slideInLeft:"slideInLeft",slideInRight:"slideInRight",zoomIn:"zoomIn",rotateIn:"rotateIn",rollIn:"rollIn"},defaultValue:"fadeIn",compareWithDefault:!1,inlineTitle:!0,changeTo:"enable"},advance:{type:"toggle",title:"Advanced",defaultValue:!1,change:function(e,t,i,n,a){if(i.current){if(jQuery(".el-linear, .el-duration, .el-delay",e).show(),void 0!==a){var o=a.getFormValues().linear;"cubic-bezier"===o&&jQuery(".el-cubic",e).show()}}else jQuery(".el-linear, .el-cubic, .el-duration, .el-delay",e).hide()},compareWithDefault:!1,changeTo:"enable"},linear:{type:"select",title:"Timing function",options:{ease:"Ease","ease-in":"Ease In","ease-in-out":"Ease In Out","ease-out":"Ease Out","cubic-bezier":"Cubic bezier"},compareWithDefault:!1,defaultValue:"linear",changeTo:"cubic"},cubic:{type:"input",title:"Cubic bezier",compareWithDefault:!1,defaultValue:"",listenChange:function(e,t,i){"cubic-bezier"===t.current?jQuery(".el-cubic",i.$el).show():jQuery(".el-cubic",i.$el).hide()}},duration:{type:"ranger",widthNumber:2,title:"Duration",min:0,max:1e4,unit:"ms",compareWithDefault:!1,defaultValue:0},delay:{type:"ranger",widthNumber:2,title:"Delay",min:0,max:1e4,compareWithDefault:!1,unit:"ms",defaultValue:0}},AweBuilder.RES_XL="xl",AweBuilder.RES_LG="lg",AweBuilder.RES_MD="md",AweBuilder.RES_SM="sm",AweBuilder.RES_XS="xs",AweBuilder.RESPONSIVE_SETTINGS={hidden:{xl:!1,lg:!1,md:!1,sm:!1,xs:!1}},AweBuilder.DEVICES_SIZE={xl:"",lg:1024,md:768,sm:576,xs:480},AweBuilder.CSS_FILE="css",AweBuilder.JS_FILE="js",AweBuilder.addLibraries=addLibraries,AweBuilder.parseJSON=parseJSON,AweBuilder.prepareAjaxParamenters=prepareAjaxParamenters,AweBuilder.elementInfo=elementInfo}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.initialize=function(e){this.get("title")||this.set("title",""),this.init(e),this.createView()},n.prototype.init=function(e){},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.getView=function(){return this.view},n.prototype.getCollection=function(){return this.collection?this.collection:void 0},n.prototype.parseJSON=function(t){return e.parseJSON(t)},n.prototype.prepareCompositionSettings=function(e){var t="";switch(typeof e){case"string":t=JSON.stringify(this.parseJSON(e));break;case"object":t=JSON.stringify(e);break;default:t=JSON.stringify({})}return t},n}(Backbone.Model);e.Abstract=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(t){this._$=e._jQuery,this.render()},i.prototype.translate=function(e){return window.aweTranslate(e)},i.prototype.preventDefaultEvent=function(e){void 0!==e&&e.preventDefault&&e.preventDefault()},i.prototype.destroy=function(){this.undelegateEvents(),this.$el.unbind(),this.remove(),Backbone.View.prototype.remove.call(this)},i}(Backbone.View);e.AbstractView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(t){void 0===t&&(t={}),void 0===t.content&&(t.content=null),e.call(this,t)}return __extends(t,e),t.prototype.init=function(e){var t={enableResize:!0,enableDrag:!0,hideDefault:!1,enableBackBtn:!1,hasOverlay:!1,position:""};this.settings=jQuery.extend(!0,{},t,e.settings)},t.prototype.createView=function(){this.view=new n({model:this})},t.prototype.getSettings=function(){return this.settings},t.prototype.setBuilder=function(e){this.builder=e},t.prototype.getBuilder=function(){return this.builder},t}(e.Abstract);e.Panel=t;var i=function(e){function i(i,n){switch(n){case"object":void 0===n.model&&(n.model=t);break;default:n={model:t}}e.call(this,i,n)}return __extends(i,e),i}(Backbone.Collection);e.Panels=i;var n=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.events=function(){return{"click a.js-ac-panel-close":"close","click span.js-panel-back":"back"}},i.prototype.initialize=function(){this.template=_.template('\n                <% if (hasOverlay) { %>\n                    <div class="ac_panel__overlay"></div>\n                <% } %>\n                <div class="js-panel-inner ac_panel__inner">\n                    <% if (backBtnText) { %>\n                    <span class="js-panel-back ac_panel__tab-item-expand-close" title="<%= backBtnText %>">                        <i class="acicon acicon-angle-left"></i>\n                    </span>\n                    <% } %>\n                    <div class="js-ac-panel-header ac_panel__header">\n                        <h2 class="ac_panel__title"><%= title %></h2>\n                        <a href="#" class="js-ac-panel-close ac_panel__close"><i class="acicon acicon-close"></i></a>                    </div>\n                    <div class="js-ac-panel-body ac_panel__body"></div>\n\t\t\t    </div>'),this.listenTo(this.model,"change",this.applyModelChange),t.prototype.initialize.call(this)},i.prototype.render=function(){var e=this.translate(this.model.get("title")),t=this.model.getSettings(),i=t.enableBackBtn?this.translate("Back"):"";this.$el.addClass("ac_panel js-ac_panel js-panel-"+this.model.cid).append(this.template({title:e,hasOverlay:t.hasOverlay,backBtnText:i})),this.renderContent(),t.enableResize&&this.initResizable(),t.enableDrag&&this.initDraggable(),t.hideDefault&&this.close(),jQuery(this.$el).mousedown(function(e){jQuery(".js-ac_panel").css("z-index",""),a.$el.css("z-index",1e3)});var n,a=this;return n=setInterval(function(){if(jQuery(a.$el.parents("body").length)){clearInterval(n);var e=jQuery("> .js-panel-inner",a.$el).height(),t=jQuery("> .js-panel-inner > .js-ac-panel-header",a.$el).height();a.updateContentSize(e-t),a.initPosition()}},200),this},i.prototype.renderContent=function(){var t=this.model.get("content"),i="";switch(typeof t){case"object":t instanceof e.Abstract&&(i=t.getView().$el);break;case"string":i=t}i&&jQuery(".js-ac-panel-body",this.$el).append(i)},i.prototype.initResizable=function(){if(jQuery.fn.resizable){var t=this;this.$el.resizable({handles:"s",resize:function(i,n){if(t.model.get("content")instanceof e.Abstract){var a=jQuery("> .js-panel-inner",t.$el).height(),o=jQuery("> .js-panel-inner > .js-ac-panel-header",t.$el).height();t.updateContentSize(a-o)}}})}},i.prototype.initDraggable=function(){if(jQuery.fn.draggable){var e=this;this.$el.draggable({start:function(t,i){e.$el.css("right","")},stop:function(t,i){var n=e.$el.position().top,a=jQuery(".js-ac-panel-header",e.$el).height();n<0?n=0:n>window.innerHeight-a&&(n=window.innerHeight-a),e.$el.animate({top:n},200);var o=e.$el.position().left+e.$el.width(),s=jQuery("body")[0].scrollWidth;o>s&&e.$el.animate({left:s-e.$el.width()-10},100)}})}},i.prototype.initPosition=function(){var e=this,t=this.model.getSettings().position;switch(jQuery.type(t)){case"string":if("left"===t){var i=(jQuery(window).height()-e.$el.height())/2;e.$el.css({left:"30px",top:i+"px"})}else if("right"===t){var n=(jQuery(window).height()-e.$el.height())/2;e.$el.css({left:jQuery(window).width()-e.$el.width()-60+"px",top:n+"px"})}else if("center"===t){var a=(jQuery(window).height()-e.$el.height())/2,o=(jQuery(window).width()-e.$el.width())/2;e.$el.css({left:o+"px",top:a+"px"})}}},i.prototype.open=function(e,t){if(e&&e.preventDefault&&e.preventDefault(),this.$el.addClass("awe-panel-show").removeClass("ac_panel__hide").trigger("mousedown"),!t){var i=window.innerWidth,n=this.$el.position().left,a=n+this.$el.width();(n>i||a<=0)&&this.initPosition()}},i.prototype.close=function(e){e&&e.preventDefault&&e.preventDefault(),this.$el.addClass("awe-panel-hide").addClass("ac_panel__hide")},i.prototype.back=function(e){},i.prototype.applyModelChange=function(e,t){var i=this;jQuery.map(e.changedAttributes(),function(e,t){switch(t){case"content":i.renderContent();break;case"title":jQuery(".js-ac-panel-header > h2",i.$el).html(e)}})},i.prototype.updateContentSize=function(e){},i.prototype.showBackBtn=function(){jQuery(".js-panel-back",this.$el).addClass("active")},i.prototype.hideBackBtn=function(){jQuery(".js-panel-back",this.$el).removeClass("active")},i}(e.AbstractView);e.PanelView=n}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.init=function(){this.get("headerHTML")||this.set("headerHTML","",{silent:!0}),void 0===this.get("content")&&this.set("content",null,{silent:!0})},t.prototype.createView=function(){this.view=new i({model:this})},t}(e.Abstract);e.Tab=t;var i=function(t){function i(e){e&&e.className?e.className="js-tab-panel ac_tabs-panel tabs-panel "+e.className:e.className="js-tab-panel ac_tabs-panel tabs-panel",t.call(this,e)}return __extends(i,t),i.prototype.initialize=function(){this.$scrollbar=this.$el,this.headerTemplate=_.template('<li data-cid="<%= id %>"><a href="#tab-<%= id %>" data-tooltip="<%= title %>"><%= header %></a></li>'),t.prototype.initialize.call(this)},i.prototype.renderHeader=function(){var e=this.translate(this.model.get("title")),t=this.model.get("headerHTML"),i={id:this.model.cid,title:e,header:t||e};return this.$header=jQuery(this.headerTemplate(i)),this.$header},i.prototype.renderTabContent=function(){var t=this.model.get("content"),i="";switch(typeof t){case"object":t instanceof e.Abstract&&(i=t.getView().$el);break;case"string":i=t}this.$el.append(i)},i.prototype.renderContent=function(){return this.$el.attr("id","tab-"+this.model.cid),this.renderTabContent(),this.$el},i.prototype.getHeader=function(){return this.$header},i.prototype.activate=function(){},i}(e.AbstractView);e.TabView=i;var n=function(e){function i(i,n){n=jQuery.extend(!0,{},n,{model:t}),e.call(this,i,n)}return __extends(i,e),i.prototype.setContainer=function(e){this.container=e},i.prototype.getContainer=function(){return this.container},i}(Backbone.Collection);e.TabCollection=n;var a=function(e){function t(i){if(void 0===i&&(i={}),void 0===i.content)i.content=new n;else{if(!("array"===jQuery.type(i.content)||i.content instanceof n))throw Error("Content of tabs only is array of tab or tab collection");"array"===jQuery.type(i.content)&&(i.content=new n(i.content))}var a={};void 0!==i.settings&&(a=i.settings,delete i.settings),e.call(this,i);var o=t.defaultSettings;jQuery.map(o,function(e,t){a[t]=jQuery.extend(!0,{},o[t],a[t])}),this.settings=a,this.createView()}return __extends(t,e),t.prototype.initialize=function(){this.get("title")||this.set("title",""),this.get("content").setContainer(this),this.init()},t.prototype.createView=function(){this.view=new o({model:this})},t.prototype.insertTab=function(e,t){this.get("content").add(e,t)},t.prototype.getSettings=function(){return this.settings},t.defaultSettings={plugin:{active:0,event:"click"},view:{headersPosition:"bottom",hasWrapper:!0,initScrollBar:!0,navigatorClasses:"ac_tabs-nav",contentWrapperClasses:"ac_tab--style1"}},t}(e.Abstract);e.Tabs=a;var o=function(e){function i(){e.apply(this,arguments),this.activeTab=0}return __extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.listenTo(this.model.get("content"),"add",this.insertTab),this.listenTo(this.model.get("content"),"remove",this.removeTab)},i.prototype.render=function(){var e=this.$el,i=this.model.getSettings().view;this.$el.addClass("js-ac-tabs").addClass(i.contentWrapperClasses),i.hasWrapper&&(this.$el.append('<div class="js-tabs-content ac_tabs-content"></div>'),e=jQuery("> .js-tabs-content",this.$el));var n=jQuery('<ul class="js-ac-tabs-nav '+i.navigatorClasses+'"></ul>');return this.model.get("content").each(function(i,a){if(i instanceof t){var o=i.getView();if(o){e.append(o.renderContent());var s=o.renderHeader();0===a&&jQuery("a",s).addClass("tooltip-align-left"),n.append(s)}}}),"bottom"===i.headersPosition?this.$el.append(n):this.$el.prepend(n),this.initTabs(),this},i.prototype.initTabs=function(){if(jQuery.fn.aweTabs){var e=this.model.getSettings();this.$el.aweTabs(e.plugin),!1!==e.plugin.active&&(this.activeTab=e.plugin.active)}},i.prototype.insertTab=function(e,t,i){var n=e.getView(),a=n.renderHeader(),o=n.renderContent();"object"==typeof i&&void 0!==i.index?jQuery("> ul.js-ac-tabs-nav > li:eq("+i.index+")",this.$el).before(a):jQuery("> ul.js-ac-tabs-nav",this.$el).append(a),jQuery("> .js-tabs-content",this.$el).append(o),jQuery.fn.aweTabs&&this.$el.aweTabs("update")},i.prototype.removeTab=function(e,t,i){if("object"==typeof i&&void 0!==i.index){var n=jQuery("> ul.js-ac-tabs-nav > li:eq("+i.index+")",this.$el),a=jQuery("a",n).attr("href");n.remove(),jQuery(a,this.$el).remove()}},i.prototype.activateTab=function(e){if(jQuery.fn.aweTabs){this.$el.aweTabs("option","active",e),this.activeTab=e;var t=this.model.get("content").at(e);t&&t.getView().activate()}},i}(e.AbstractView);e.TabsView=o}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){e.call(this,{title:"Upload"})}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t.prototype.setMediaPanel=function(e){this.mediaPanel=e},t.prototype.getMediaPanel=function(){return this.mediaPanel},t}(e.Tab);e.UploaderTab=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){var i=e.prepareAjaxParamenters("fileUpload").url;this.uploadURL=i,this.uploadedFiles=this.uploadingFiles=0,this.files=[],this.allowedFileExtensions="jpeg,jpg,png,gif",t.prototype.initialize.call(this)},i.prototype.renderContent=function(){return this.$el.addClass("tab-panel ac_tabs-panel").attr("id","tab-"+this.model.cid),this.$el.append('\n                <div class="js-upload-photo ac_panel__upload">\n                    <form class="js-form-upload-photo"  method="post" enctype="multipart/form-data" action="">\n                    <label class="js-upload-photo">\n                        <i class="acicon acicon-upload"></i>\n                        <h4>'+this.translate("To Upload Photos")+"</h4>\n                        <p>"+this.translate("Drag photos from computer")+"<br>"+this.translate("or just click here")+'</p>\n                        <input class="js-file-input" type="file">\n                    </label>\n                    </form>\n                </div>\n                <div class="js-upload-items"></div>\n            '),this.initDragUpload(),this.$el},i.prototype.initDragUpload=function(){var e=this,t=jQuery(".js-upload-photo",this.$el).get(0);"draggable"in document.createElement("span")&&(t.ondragover=function(e){e.preventDefault(),jQuery(this).addClass("awe-drag-over").css("border-color","#ddd")},t.ondragleave=function(e){e.preventDefault(),jQuery(this).removeClass("awe-drag-over").css("border-color","")},t.ondrop=function(t){if(t.preventDefault(),jQuery(this).removeClass("awe-drag-over").css("border-color",""),t.dataTransfer.files.length)for(var i=t.dataTransfer.files,n=0;n<i.length&&(e.validateFile(i[n])&&e.upload(i[n]),e.multiUpload);n++);})},i.prototype.validateFile=function(e){var t=e.type.split("/"),i=t[1]?t[1]:void 0;return this.allowedFileExtensions.indexOf(i)>-1},i.prototype.events=function(){return{"change .js-file-input":"onFileSelect"}},i.prototype.onFileSelect=function(e){for(var t=this,i=e.target.files,n=0;n<i.length&&(t.validateFile(i[n])&&t.upload(i[n]),t.multiUpload);n++);},i.prototype.createFileProgressBar=function(e,t){var i=jQuery('\n                <div class="js-upload-item ac_loader">\n                    <div class="ac_tb">\n                        <div class="ac_tb-cell">\n                            <div class="js-upload-preview ac_loader__image"></div>\n                            <div class="ac_progress">\n                                <div class="js-file-title ac_loader__name"></div>\n                                <div class="ac_progress-bar">\n                                    <div class="js-progress-bar ac_progress-bar__loader" style="width: 0"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>').attr("id",t),n=new FileReader;jQuery(".js-upload-items",this.$el),jQuery(".js-file-title",i).text(e.name),this.$el.find(".js-upload-photo").hide(),this.$el.find(".js-upload-items").append(i),n.onload=function(e){jQuery(".js-upload-preview",i).append(jQuery("<img />").attr("src",e.target.result))},n.readAsDataURL(e)},i.prototype.onProgress=function(e,t){if(e.lengthComputable){var i=jQuery("#"+t,this.$el),n=e.loaded/e.total*100|0;jQuery(".js-progress-bar",i).css("width",n+"%")}},i.prototype.uploadFinished=function(e,t,i){var n=jQuery("#"+e,this.$el);t&&i?(i.url=window.AweBuilderSettings.baseURL+i.url,jQuery(".js-upload-preview img",n).attr("src",i.url),jQuery(".js-file-title",n).text(i.name),this.files.push(i)):n.addClass("fail"),++this.uploadedFiles===this.uploadingFiles&&this.model.getMediaPanel().close(void 0,this.multiUpload?this.files:this.files[0])},i.prototype.upload=function(t,i){if(window.FormData){this.uploadingFiles++;var n=new FormData,a=new XMLHttpRequest,o=jQuery.now();n.append("awe_file",t),i&&jQuery.map(i,function(e,t){n.append(t,e)});var s=window.AweBuilderSettings.URLs.folderUpload?window.AweBuilderSettings.URLs.folderUpload:"";n.append("folderUpload",s),this.createFileProgressBar(t,o);var l=this;a.open("POST",this.uploadURL),a.upload.onprogress=function(e){l.onProgress(e,o)},a.onreadystatechange=function(t){if(4===t.target.readyState){var i=e.parseJSON(this.responseText.trim());200===t.target.status&&i&&i.status&&i.file?l.uploadFinished(o,!0,i.file):l.uploadFinished(o,!1)}},a.send(n)}},i.prototype.activate=function(){this.uploadingFiles=0,this.uploadedFiles=0,this.files=[],jQuery(".js-upload-items",this.$el).empty().hide(),jQuery(".js-upload-photo",this.$el).show();var e=this.model.getMediaPanel().model;this.multiUpload=e.getMultiple(),this.multiUpload?jQuery(".js-file-input",this.$el).attr("multiple","true"):jQuery(".js-file-input",this.$el).removeAttr("multiple")},i}(e.TabView)}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(t,i,n,a){e.call(this),this.libraryUrl=t,this.type=i,this.pageNumber=a,this.numberItemOnPage=n,this.set("title",a)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t.prototype.getPageNumber=function(){return this.pageNumber},t.prototype.setMediaPanel=function(e){this.mediaPanel=e},t.prototype.getLibraryUrl=function(){return this.libraryUrl},t.prototype.getNumberItemOnPage=function(){return this.numberItemOnPage},t.prototype.getType=function(){return this.type},t.prototype.getMediaPanel=function(){return this.mediaPanel},t}(e.Tab);e.LibraryPaginationTab=t;var i=function(t){function i(){t.apply(this,arguments),this.isRenderContent=!1}return __extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this.template=_.template('\n                <div class="ac_5-col plr-10">\n                    <div class="ac_panel__image">\n                        <label>\n                            <% if(!multiple){ %>\n                            <input  name="file_img" class="js-check-file" type="radio" value=\'<%= data %>\'>\n                            <% } else { %>\n                            <input class="js-check-file" type="checkbox" value=\'<%= data %>\'>\n                            <% } %>\n                            <div class="ac_img" style="background-image: url(\'<%= url %>\')">\n                                <i class="acicon acicon-check"></i>\n                            </div>\n                            <div class="ac_panel__image__caption">\n                                <span><%= name %></span>\n                            </div>\n                        </label>\n                    </div>\n                </div>\n            ')},i.prototype.renderContent=function(){this.model;return this.$el.addClass("tab-panel ac_tabs-panel").attr("id","tab-"+this.model.cid).append('<div class="js-row-files ac_row ac_librarycontent"></div>'),this.$el},i.prototype.addContent=function(){var t=this,i=this.model,n=i.getMediaPanel().model.getMultiple(),a=e.prepareAjaxParamenters("library",{type:i.getType(),user_id:2,numberItemOnPage:i.getNumberItemOnPage(),pageNumber:i.getPageNumber()});!this.isRenderContent&&a&&jQuery.post(a.url,a.data,function(e){for(var i=0;i<e.length;i++){e[i].url=window.AweBuilderSettings.baseURL+e[i].url;var a=t.template({url:e[i].url,name:e[i].name,data:JSON.stringify(e[i]),multiple:n});t.$el.find("> .js-row-files").append(a)}t.isRenderContent=!0},"json").fail(function(){alert("Read files on page "+i.getPageNumber()+" fail!")})},i}(e.TabView);e.LibraryPaginationTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){e.LIBRARY_ALL="all",e.LIBRARY_OWNER="myfile";var t=function(t){function n(e){t.call(this,{type:e}),this.numberItemOnPage=10}return __extends(n,t),n.prototype.init=function(t){this.libraryURL=window.AweBuilderSettings.URLs.library,this.type=t.type,this.type===e.LIBRARY_ALL?this.set("title","All"):this.set("title","My files");var i=new e.TabCollection;this.setPaginationCollectionPagination(i);var n={plugin:{event:"click",active:0,activate:function(e,t){var n=t.newTab?i.get(t.newTab.attr("data-cid")):null;n&&n.getView().addContent()}},view:{headersPosition:"bottom"}};this.set("content",new e.Tabs({content:i,settings:n,title:"Tab content list page"}))},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.setMediaPanel=function(e){this.mediaPanel=e},n.prototype.getMediaPanel=function(){return this.mediaPanel},n.prototype.setPaginationCollectionPagination=function(t){var i=this,n=e.prepareAjaxParamenters("library",{type:i.type,user_id:2,numberItemOnPage:i.numberItemOnPage});n&&jQuery.post(n.url,n.data,function(n){if(i.totalPages=n.totalPages,i.totalPages)for(var a=1;a<=i.totalPages;a++){var o=new e.LibraryPaginationTab(i.libraryURL,i.type,i.numberItemOnPage,a);o.setMediaPanel(i.getMediaPanel()),t.add(o)}},"json").fail(function(){console.log("Read files fail!")})},n.prototype.resetPaginationCollectionPagination=function(){for(var e,t=this.get("content").get("content");e=t.first();)e.destroy();this.setPaginationCollectionPagination(t)},n}(e.Tab);e.LibraryTab=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.footerTemplate=_.template('\n                <div class="js-ac_panel__footer ac_panel__footer">\n                    <div class="js-btn-group btn-group">\n                        <a href="#" class="ac_btn js-btn-cancel ac_btn--2">'+this.translate("Cancel")+'</a>\n                        <a href="#" class="ac_btn js-btn-choose ac_btn--1 ac_disable">'+this.translate("Choose")+"</a>\n                    </div>\n                </div>\n            "),t.prototype.initialize.call(this),this.setEnableButtonChoose()},i.prototype.events=function(){return{"click > .js-ac-tabs .js-tab-panel .js-check-file":"setEnableButtonChoose","click > .js-ac_panel__footer .js-btn-group .js-btn-cancel":"cancel","click > .js-ac_panel__footer .js-btn-group .js-btn-choose":"choose"}},i.prototype.renderContent=function(){this.$el.addClass("tab-panel ac_tabs-panel").attr("id","tab-"+this.model.cid).empty();var t,i=this.model.get("content");return i instanceof e.Abstract&&(t=i.getView().$el,t.find(".js-ac-tabs-nav").removeClass("ac_tabs-nav").addClass("ac_panel__pagination"),this.$el.append(t),this.$el.append(this.footerTemplate())),this.$el},i.prototype.cancel=function(e){e&&e.preventDefault(),this.model.getMediaPanel().close(e,"")},i.prototype.choose=function(t){t&&t.preventDefault();var i=this.model.getMediaPanel(),n=[];i.model.getMultiple()?this.$el.find(".js-check-file:checked").each(function(){n.push(e.parseJSON(jQuery(this).val()))}):n=e.parseJSON(this.$el.find(".js-check-file:checked").val()),i.close(t,n)},i.prototype.setEnableButtonChoose=function(){var e=this.$el.find(".js-btn-choose");this.$el.find(".js-check-file:checked").length?e.removeClass("ac_disable"):e.addClass("ac_disable")},i}(e.TabView)}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(){var i=new e.TabCollection;i.add(new e.UploaderTab),i.add(new e.LibraryTab(e.LIBRARY_ALL)),i.add(new e.LibraryTab(e.LIBRARY_OWNER));var n={hideDefault:!0,position:"center",hasOverlay:!0,enableDrag:!1},a={plugin:{event:"click",active:0,activate:function(t,n){var a=n.newTab?i.get(n.newTab.attr("data-cid")):null;if(a&&a instanceof e.LibraryTab){var o=a.get("content").get("content");o.length&&o.at(0).getView().addContent()}}},view:{headersPosition:"top"}};t.call(this,{title:"Media Manager",content:new e.Tabs({content:i,title:"Tab content",settings:a}),settings:n}),this.multiple=!1,this.allowClose=!0;var o=this.view;i.each(function(e,t){e.setMediaPanel(o)})}return __extends(n,t),n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.setMultiple=function(e){this.multiple=e},n.prototype.getMultiple=function(){return this.multiple},n.prototype.getAllowClose=function(){return this.allowClose},n.prototype.setAllowClose=function(e){this.allowClose=e},n}(e.Panel);e.MediaPanel=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.template=_.template('\n                <div class="ac_panel__overlay"></div>\n                <div class="js-panel-inner ac_panel__inner">\n                    <div class="js-ac-panel-header ac_panel__header">\n                        <h2 class="ac_panel__title"><%= title %></h2>\n                        <a href="#" class="js-ac-panel-close ac_panel__close"><i class="acicon acicon-close"></i></a>                    </div>\n                    <div class="js-ac-panel-body ac_panel__body"><div class="js-body-panel-content pd20"></div></div>                </div>'),this.render()},i.prototype.renderContent=function(){this.$el.addClass("ac_mediapanel").css({width:"700px"});var e=this.model.get("content"),t=e.getView().$el;t&&(t.removeClass("ac_tabs").addClass("ac_tab-item ac_tab-item--2"),t.find("> .tabs-nav").removeClass("ac_tabs-nav ").addClass("ac_tab-item__nav"),t.find("> .js-tabs-content > .js-tab-panel").removeClass("ac_tabs-panel"),jQuery("> .js-panel-inner > .js-ac-panel-body .js-body-panel-content",this.$el).append(t))},i.prototype.open=function(e){t.prototype.open.call(this),this.controller=e,this.resetLibraryTab(),this.model.get("content").getView().activateTab(0),this.model.setAllowClose(!0)},i.prototype.close=function(e,i){(void 0===this.model.getAllowClose()||this.model.getAllowClose())&&(t.prototype.close.call(this,e),i&&("object"===jQuery.type(i)&&this.model.getMultiple()&&(i=[i]),this.controller.setValue(i)))},i.prototype.resetLibraryTab=function(){this.model.get("content").get("content").each(function(t,i){t instanceof e.LibraryTab&&t.resetPaginationCollectionPagination()})},i}(e.PanelView);e.MediaPanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var elementNumber=1,ElAbstract=function(){function e(e){void 0!==e&&(void 0!==e.el&&"string"===jQuery.type(e.el)?this.$el=jQuery(e.el):void 0!==e.$el&&e.$el instanceof jQuery&&(this.$el=e.$el)),void 0===this.$el&&(this.$el=jQuery("<div />")),this.cid=elementNumber,this.id="el-"+elementNumber,elementNumber++,this.$el.attr("id",this.id).addClass(this.id),void 0!==e&&"string"===jQuery.type(e.className)&&this.$el.addClass(e.className),void 0!==e&&e.mediaPanel instanceof AweBuilder.MediaPanelView&&(this.mediaPanel=e.mediaPanel)}return e.prototype.translate=function(e){return window.aweTranslate(e)},e.prototype.setMediaPanel=function(e){this.mediaPanel=e},e.prototype.getMediaPanel=function(){return this.mediaPanel},e}(),AweForm=function(_super){function AweForm(e,t,i){_super.call(this,i),this.selector=t,this.elements={},this.render(e)}return __extends(AweForm,_super),AweForm.prototype.render=function(e){var t=this;this.$el.append('<div class="js-row ac_row"></div>'),this.$wrapper=jQuery("> .js-row",t.$el),jQuery.map(e,function(e,i){e.selector=t.selector+"."+i,e.name=i,e.mediaPanel=t.mediaPanel;var n=AweForm.createElement(e,t);n&&("storage"!==e.type&&t.$wrapper.append(n.$el),t.elements[i]=n)}),jQuery("span",this.$el).mousedown(function(e){e.stopPropagation()}),this.$el.addClass("elements-form").trigger("form-ready")},AweForm.prototype.update=function(e,t,i,n){jQuery.map(this.elements,function(a,o){a.update(e,t,i,n)})},AweForm.prototype.getElements=function(){return this.elements},AweForm.prototype.getElement=function(e){if("string"===jQuery.type(e)){var t=this.elements,i=void 0;return jQuery.each(e.split("."),function(e,n){t&&t[n]?(i=t[n],t=t[n].elements?t[n].elements:void 0):(t=void 0,i=void 0)}),i}},AweForm.createElement=function(options,elForm){if(options.type&&void 0!==AweForm.elementsMap[options.type]){var elementClass=AweForm.elementsMap[options.type];return eval("new "+elementClass+"(options, elForm)")}},AweForm.prototype.getFormValues=function(e){var t={};return jQuery.map(this.elements,function(e,i){var n=e.getValue();e instanceof AweGroup&&e.getOptions().useParentKey?t=jQuery.extend(!0,{},t,n):t[i]=e.getValue()}),void 0!==e?t[e]:t},AweForm.prototype.setFormValues=function(e){if("object"===jQuery.type(e)){var t=this;jQuery.map(e,function(e,i){t.elements[i].setValue(e)})}},AweForm.prototype.reset=function(){jQuery.map(this.elements,function(e,t){e.resetToDefault()})},AweForm.prototype.setMediaPanel=function(e){_super.prototype.setMediaPanel.call(this,e),jQuery.map(this.elements,function(t,i){t.setMediaPanel(e)})},AweForm.elementsMap={markup:"AweMarkup",input:"AweInput",textarea:"AweTextarea",toggle:"AweToggle",select:"AweSelect",checklist:"AweChecklist",checkboxes:"AweCheckboxes",radios:"AweRadios",group:"AweGroup",icon:"AweIcon",colorpicker:"AweColor",ranger:"AweRanger",borderbox:"AweBorderbox",fileselector:"AweFileSelector",constraint:"AweConstraint",storage:"AweStorage",order:"AweOrder",attributes:"AweAttributes"},AweForm}(ElAbstract);AweBuilder.AweForm=AweForm;var ElementForm=function(e){function t(t,i){if(e.call(this,t),this.responsiveMode=AweBuilder.RES_XL,this.elForm=i,void 0===t)throw Error("You could not create element with empty settings.");this.validateOptions(t),this.options=t,this.classes=t.inlineTitle?"ac_panel-item-general ac_panel-item-general--2":"ac_panel-item-general",this.initialize(t),this.value=this.defaultValue;var n=void 0!==t.widthNumber?t.widthNumber:1;!1!==n&&this.$el.addClass("ac_"+n+"-col"),this.$el.addClass("el-"+t.type);var a=t.selector.split("."),o=a.pop();this.$el.addClass("el-"+o),this.render(t),this.renderCustomStyles(t),this.initEvents()}return __extends(t,e),t.prototype.validateOptions=function(e){if(void 0!==e.changeTo&&"string"!==jQuery.type(e.changeTo)&&!(e.changeTo instanceof Array))throw Error("changeTo option only accept string or Array of string type.");if(e.listenChange&&"function"!==jQuery.type(e.listenChange))throw Error("listenChange only accept function type");this.listenChange=e.listenChange},t.prototype.initialize=function(e){void 0!==e.defaultValue&&(this.defaultValue=e.defaultValue),void 0===e.title&&(e.title=""),void 0===e.alwaysSave&&(e.alwaysSave=!1),this.options=e},t.prototype.render=function(e){},t.prototype.renderCustomStyles=function(e){if(e.customStyles){var t=this;jQuery.map(e.customStyles,function(e,i){jQuery(i,t.$el).css(e)})}},t.prototype.update=function(e,t,i,n){this.updateSelector(n),this.state=i;var a=e?e.getMachineName():"",o=a?AweBuilder.ContentObject.generateObjectSettings(a):void 0,s=o?e.getSettingsAttr(this.options.selector,o):void 0;this.responsiveMode="object"===jQuery.type(s)&&void 0!==s[t]?t:void 0,this.updateActiveModel(e,t!==AweBuilder.RES_XL&&void 0===this.responsiveMode)},t.prototype.updateSelector=function(e){if("string"===jQuery.type(e)){var t=this.options.selector.split("."),i=t.pop();this.options.selector=e+"."+i}},t.prototype.updateActiveModel=function(e,t){this.$el.addClass("ac_disable"),this.activeModel=e;var i=this.getSelector();if(e&&i){var n=e.getMachineName(),a=AweBuilder.ContentObject.generateObjectSettings(n),o=e.getSettingsAttr(i,a),s=e.getSettingsAttr(i);void 0!==o&&(s=void 0!==s?s:this.getElementDefaultValue(),t||this.$el.removeClass("ac_disable"),this.changeElementValue(s),this.value=s,this.$el.trigger("change",{current:s,updateModel:!0}))}},t.prototype.initEvents=function(){var e=this;this.$el.change(function(t,i){t.stopPropagation(),void 0!==i&&e.execChangeCallback(i)}),this.events()},t.prototype.events=function(){},t.prototype.getSelector=function(e){return this.responsiveMode&&!e?this.options.selector+"."+this.responsiveMode:this.options.selector},t.prototype.updateModelSetting=function(e){var t=this.getSelector();if(t&&this.activeModel){var i=this.activeModel.getMachineName(),n=AweBuilder.ContentObject.generateObjectSettings(i);if(void 0!==this.activeModel.getSettingsAttr(t,n)){var a=this.getElementDefaultValue(),o=!this.options.alwaysSave&&this.value===a;this.activeModel.setSettingsAttr(t,this.value,{delete:o})}}},t.prototype.getElementDefaultValue=function(){var e,t=[AweBuilder.RES_XS,AweBuilder.RES_SM,AweBuilder.RES_MD,AweBuilder.RES_LG,AweBuilder.RES_XL],i=this.activeModel,n=this.getSelector();if(n&&i){var a=i.getMachineName(),o=this.state,s=this.responsiveMode,l=s?t.slice(t.indexOf(s)+1):void 0;if(!1===this.options.compareWithDefault){if(l&&l.length>0)for(var r=void 0,c=0;c<l.length;c++)if(void 0!==(r=i.getSettingsAttr(n.replace("."+s,"."+l[c])))){e=r;break}if(void 0===e&&(s!==AweBuilder.RES_XL||o!==AweBuilder.STYLE_NORMAL)){var d=n;s&&(d=d.replace("."+s,"."+AweBuilder.RES_XL)),o&&(d=d.replace("."+o+".","."+AweBuilder.STYLE_NORMAL+".")),e=i.getSettingsAttr(d)}}if(void 0===e){var u=AweBuilder.ContentObject.generateObjectSettings(a);e=i.getSettingsAttr(n,u)}}return e},t.prototype.changeElementValue=function(e){},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e,t){if(void 0!==e&&this.execValidateCallback(e)){var i=this.value,n={current:e,prev:i};if(this.value=e,t&&void 0!==t.inlineCss&&"boolean"==typeof t.inlineCss?(this.updateModelSetting(t.inlineCss),delete t.inlineCss):this.updateModelSetting(),(void 0===t||t&&!1!==t.updateElement)&&(this.changeElementValue(e),void 0!==t&&delete t.updateElement),n=jQuery.extend(!0,n,t),this.$el.trigger("change",n),void 0!==this.options.changeTo){var a=this,o="array"===jQuery.type(this.options.changeTo)?this.options.changeTo:[this.options.changeTo];jQuery.each(o,function(e,t){var i=a.elForm.getElement(t);i&&"function"===jQuery.type(i.listenChange)&&i.listenChange(a.options.name,n,a.elForm)})}}},t.prototype.execChangeCallback=function(e){var t=this.activeModel?this.activeModel.getView():null,i=t?t.el:void 0;if("function"===jQuery.type(this.options.change)){var n=this.elForm?this.elForm.$el:void 0;this.options.change(n,i,e,this.activeModel,this.elForm)}},t.prototype.execValidateCallback=function(e){return"function"!==jQuery.type(this.options.validate)||!1!==this.options.validate(e)||(this.changeElementValue(this.value),!1)},t.prototype.setElForm=function(e){this.elForm=e},t.prototype.getElForm=function(){return this.elForm},t.prototype.resetToDefault=function(){this.setValue(this.defaultValue)},t.prototype.getOptions=function(){return this.options},t.getDefaultValue=function(e,t,i){var n;return!1===e.devices?n=e.defaultValue:void 0===e.devices||"all"===e.devices?(n={},n[AweBuilder.RES_XL]=e.defaultValue,n[AweBuilder.RES_LG]=e.defaultValue,n[AweBuilder.RES_MD]=e.defaultValue,n[AweBuilder.RES_SM]=e.defaultValue,n[AweBuilder.RES_XS]=e.defaultValue):"array"===jQuery.type(e.devices)&&(n={},jQuery.each(e.devices,function(){n[this]=e.defaultValue})),t[i]=n,n},t}(ElAbstract);AweBuilder.ElementForm=ElementForm;var AweMarkup=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.validateOptions=function(t){if(e.prototype.validateOptions.call(this,t),!t.markup)throw Error("You must pass html string for markup element type.")},t.prototype.render=function(e){this.$el.append(e.markup),e.init,e.init(this)},t}(ElementForm);AweBuilder.AweMarkup=AweMarkup;var AweInput=function(e){function t(){e.apply(this,arguments),this.defaultValue=""}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="<%= classes %>">\n                    <label>\n                        <span class="ac_panel-item-general__title"><%= title %></span>\n                        <div class="ac_panel-item-general__content ac_inputtext">\n                            <input type="text" value="<%= defaultValue %>">\n                        </div>\n                    </label>\n                </div>')},t.prototype.render=function(e){this.$el.append(this.template({title:this.translate(e.title),defaultValue:e.defaultValue,classes:this.classes}))},t.prototype.changeElementValue=function(e){this.$el.find("input").val(e)},t.prototype.events=function(){var e=this,t=-1;jQuery("input",this.$el).change(function(t){t.stopPropagation(),e.setValue(jQuery(this).val(),{updateElement:!1})}).blur(function(t){t.stopPropagation();var i=jQuery("input",e.$el).val();i!==e.value&&e.setValue(i)}).keyup(function(e){t>0&&clearTimeout(t);var i=jQuery(this);13===(e.which||e.keyCode)?i.trigger("blur"):t=setTimeout(function(){i.trigger("change")},200)})},t}(ElementForm);AweBuilder.AweInput=AweInput;var AweToggle=function(e){function t(){e.apply(this,arguments),this.defaultValue=!1}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="ac_panel-item-general ac_panel-item-general--2">\n                    <label>\n                        <span class="ac_panel-item-general__title"><%= title %></span>\n                        <div class="ac_panel-item-general__content">\n                            <div class="ac_panel-item-general__content-right">\n                                <div class="radio-icon">\n                                    <input type="checkbox" checked="<%= checked %>">\n                                    <span class="radio-style"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </label>\n                </div>')},t.prototype.render=function(e){var t=this.template({title:this.translate(e.title),checked:e.defaultValue});e.withoutWrapper?this.$el.html(t):this.$el.append(t)},t.prototype.changeElementValue=function(e){1==e||1==e?jQuery("input[type=checkbox]",this.$el).prop("checked",!0):jQuery("input[type=checkbox]",this.$el).prop("checked",!1)},t.prototype.events=function(){var e=this;jQuery("input[type=checkbox]",e.$el).change(function(t){e.setValue(this.checked)})},t}(ElementForm);AweBuilder.AweToggle=AweToggle;var AweTextarea=function(e){function t(){e.apply(this,arguments),this.defaultValue=""}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.fireEvent=t.fireEvent?t.fireEvent:"keyup";var i="";t&&void 0!==t.size&&(i=" ac_textarea--"+t.size),this.template=_.template('\n                <div class="ac_panel-item-general">\n                    <label>\n                        <span class="ac_panel-item-general__title"><%= title %></span>\n                        <div class="js-awe-textarea ac_panel-item-general__content ac_textarea'+i+'">\n                            <textarea><%= defaultValue %></textarea>\n                        </div>\n                    </label>\n                </div>')},t.prototype.render=function(e){this.$el.append(this.template({title:this.translate(e.title),defaultValue:e.defaultValue}))},t.prototype.changeElementValue=function(e){this.$el.find(".js-awe-textarea textarea").val(e)},t.prototype.events=function(){var e=this,t=this.$el;this.$el.delegate(".js-awe-textarea > textarea",this.fireEvent,function(t){e.setValue(jQuery(this).val())}),jQuery(document).click(function(e){0===jQuery(e.target).closest(jQuery(".js-awe-textarea > textarea",t)).length&&t.trigger("blur")})},t}(ElementForm);AweBuilder.AweTextarea=AweTextarea;var AweSelect=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(t){void 0===t.defaultValue&&(t.defaultValue=Object.keys(t.options)[0]),e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="<%= classes %>">\n                    <label>\n                        <span class="ac_panel-item-general__title"><%= title %></span>\n                        <div class="ac_panel-item-general__content ac_select-list">\n                            <span class="val">\n                                <span><%= defaultText %></span>\n                                <i class="acicon acicon-triangle-down"></i>\n                            </span>\n                            <ul class="option-list"></ul>\n                        </div>\n                    </label>\n                </div>'),this.opts=void 0!==t.options?t.options:{}},t.prototype.validateOptions=function(t){if(e.prototype.validateOptions.call(this,t),void 0===t.options&&void 0===t.ajax)throw Error("You must define options or ajax url to get options for select element.")},t.prototype.render=function(e){var t=this,i=Object.keys(this.opts),n=void 0!==this.opts[e.defaultValue]?this.opts[e.defaultValue]:i.length?this.opts[i[0]]:"";if(this.$el.append(this.template({title:e.title,defaultText:n,classes:this.classes})),this.renderElementFormOpts(),e.ajax){var a="function"===jQuery.type(e.ajax)?e.ajax():e.ajax,o={requestAction:"getSelectAjaxOptions"};"object"===jQuery.type(a)&&(void 0!==a.extraData&&(o=jQuery.extend(!0,{},o,a.extraData)),a=void 0!==a.url?a.url:""),a&&jQuery.post(a,o,function(i){e.ajaxSuccess&&e.ajaxSuccess(i,t)})}},t.prototype.renderElementFormOpts=function(){var e=this;jQuery("ul.option-list",e.$el).empty(),jQuery.map(this.opts,function(t,i){var n=jQuery("<li></li>");n.html(t),n.attr("data-val",i),jQuery("ul.option-list",e.$el).append(n)})},t.prototype.changeElementValue=function(e){var t=Object.keys(this.opts),i=t.length?this.opts[t[0]]:"";jQuery.inArray(e,t)>-1&&(i=this.opts[e]),jQuery("span.val > span",this.$el).text(i)},t.prototype.events=function(){var e=this;this.$el.click(function(t){if(t.preventDefault(),!jQuery(this).hasClass("ac_disable")){var i=jQuery("ul.option-list",e.$el);i.hasClass("js-active")?i.removeClass("js-active").hide():i.addClass("js-active").show()}}),this.$el.delegate("ul.option-list > li","click",function(t){t.preventDefault(),jQuery("li.js-selected",jQuery(this).parent()).removeClass("js-selected");var i=jQuery(this).addClass("js-selected").attr("data-val");jQuery(".ac_select-list > span > span",e.$el).text(e.opts[i]),e.setValue(i)}),jQuery(document).click(function(t){if(0===jQuery(t.target).closest(e.$el).length){var i=jQuery("ul.option-list",e.$el);i.hasClass("js-active")&&i.removeClass("js-active").hide()}})},t.prototype.setOptions=function(e){this.opts=e,this.renderElementFormOpts(),this.changeElementValue(Object.keys(e)[0])},t}(ElementForm);AweBuilder.AweSelect=AweSelect;var AweCheckboxes=function(e){function t(){e.apply(this,arguments),this.defaultValue=[]}return __extends(t,e),t.prototype.validateOptions=function(t){if(void 0===t.title&&(t.title=""),e.prototype.validateOptions.call(this,t),"object"!==jQuery.type(t.options))throw Error("You must define options for checkboxes element.")},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="ac_panel-item-general-group">\n                    <span class="ac_panel-item-general-group__title">'+this.translate("<%= title %>")+'</span>\n                    <% _.map(options, function(opTitle, opName) { %>\n                    <div class="ac_panel-item-general ac_panel-item-general--2">\n                        <label>\n                            <span class="ac_panel-item-general__title">'+this.translate("<%= opTitle %>")+'</span>\n                            <div class="ac_panel-item-general__content">\n                                <div class="ac_panel-item-general__content-right">\n                                    <div class="checkbox-button">\n                                        <input type="checkbox" data-name="<%= opName %>">\n                                        <span class="checkbox-style"><i class="acicon acicon-check"></i></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </label>\n                    </div>\n                    <% }) %>\n                </div>\n            '),"button"===t.widget&&(this.template=_.template('\n                    <div class="ac_panel-item-general-group">\n                        <span class="ac_panel-item-general-group__title">'+this.translate("<%= title %>")+'</span>\n                        <% _.map(options, function(op, name) { %>\n                        <div class="ac_check-item">\n                            <label>\n                                <input type="checkbox" data-name="<%= name %>">\n                                <span<% if(op.classes) { %> class="<%= op.classes %>"<% } %><% if(op.title) { %> class="<%= op.title %>"<% } %>><%= op.text %></span>\n                            </label>\n                        </div>\n                        <% }) %>\n                    </div>\n                '),jQuery.map(t.options,function(e,i){"object"!==jQuery.type(e)&&(t.options[i]={text:e})}))},t.prototype.render=function(e){this.$el.append(this.template(e))},t.prototype.events=function(){var e=this;jQuery("input[type=checkbox]",this.$el).change(function(t){var i=jQuery(this).attr("data-name"),n=e.getValue();if(jQuery(this).is(":checked"))n.push(i);else{var a=jQuery.inArray(i,n);-1!==a&&n.splice(a,1)}e.setValue(n)})},t.prototype.changeElementValue=function(e){jQuery("input[type=checkbox]",this.$el).each(function(){var t=jQuery(this).attr("data-name");-1===jQuery.inArray(t,e)?jQuery(this).prop("checked",!1):jQuery(this).prop("checked",!0)})},t}(ElementForm);AweBuilder.AweCheckboxes=AweCheckboxes;var AweRadios=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.validateOptions=function(t){if(e.prototype.validateOptions.call(this,t),void 0===t.options)throw Error("You must define list option for radio element.")},t.prototype.initialize=function(t){void 0===t.defaultValue&&(t.defaultValue=Object.keys(t.options)[0]),this.template=_.template('\n                <div class="ac_panel-item-general-group">\n                    <span class="ac_panel-item-general-group__title">'+this.translate("<%= title %>")+'</span>\n                    <% _.map(options, function(optTitle, optName) { %>\n                    <div class="ac_panel-item-general ac_panel-item-general--2">\n                        <label>\n                            <span class="ac_panel-item-general__title">'+this.translate("<%= optTitle %>")+'</span>\n                            <div class="ac_panel-item-general__content">\n                                <div class="ac_panel-item-general__content-right">\n                                    <div class="radio-icon">\n                                        <input type="radio" name="<%= id %>" data-name="<%= optName %>">\n                                        <span class="radio-style"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </label>\n                    </div>\n                    <% }) %>\n                </div>\n            '),e.prototype.initialize.call(this,t)},t.prototype.render=function(e){var t=jQuery.extend({id:this.id},e);this.$el.append(this.template(t))},t.prototype.events=function(){var e=this;jQuery("input[type=radio]",this.$el).change(function(t){t.preventDefault(),e.setValue(jQuery(this).attr("data-name"))})},t.prototype.changeElementValue=function(e){jQuery("input[type=radio]",this.$el).prop("checked",!1),void 0!==e&&-1!==jQuery.inArray(e,Object.keys(this.options.options))&&jQuery("input[data-name="+e+"]",this.$el).prop("checked",!0)},t}(ElementForm);AweBuilder.AweRadios=AweRadios;var AweGroup=function(_super){function AweGroup(){_super.apply(this,arguments)}return __extends(AweGroup,_super),AweGroup.prototype.initialize=function(e){_super.prototype.initialize.call(this,e),this.elements={},e.widthNumber=!1,this.widget=void 0!==e.widget?e.widget:"default"},AweGroup.prototype.validateOptions=function(e){if(_super.prototype.validateOptions.call(this,e),void 0===e.elements)throw Error("You must define list properties element for compostion.");if(e.widget&&"constraint"===e.widget){var t=Object.keys(e.elements),i=e.elements[t[0]];jQuery.map(e.elements,function(e,t){if(e.type!==i.type)throw Error("AweCompostion Constraint: all elements in compostion must be same type.")})}},AweGroup.prototype.render=function(e){switch(this.widget){case"constraint":this.$el.addClass("ac_col-group").append('<span class="js-constraint trigger-uniform"><i class="acicon acicon-link"> </i></span>'),this.renderDefault(e),e.primary&&void 0!==e.elements[e.primary]?this.primary=e.primary:this.primary=Object.keys(this.elements)[0],this.elements[this.primary].$el.addClass("constraint-primary");break;case"tabs":this.renderTabsWidget(e);break;default:this.renderDefault(e)}},AweGroup.prototype.renderDefault=function(e){var t=this,i=e.selector;if(e.useParentKey){var n=i.split(".");n.pop(),i=n.join(".")}e.title&&this.$el.append('<div class="el-compoistion-title ac_1-col"><h4>'+e.title+"</h4></div>"),jQuery.map(e.elements,function(n,a){n.selector=i+"."+a,n.name=a,n.mediaPanel=e.mediaPanel;var o=AweForm.createElement(n,t.elForm);o&&(t.$el.append(o.$el),t.elements[a]=o)})},AweGroup.prototype.renderTabsWidget=function(e){this.$el.append('\n                <ul class="js-tabs-nav ac_tab-item__nav tabs-nav tabs-top"></ul>\n                <div class="js-tabs-content ac_tab-item__content"></div>\n            ');var t=this,i=jQuery(".js-tabs-content",this.$el),n=jQuery(".js-tabs-nav",this.$el),a=this.getElForm();jQuery.map(e.elements,function(o,s){o.selector=e.selector+"."+s,o.name=s;var l=void 0!==o.title?o.title:s;delete o.title;var r=AweForm.createElement(o,a);r&&(n.append('<li class="awe-tab"><a href="#'+r.id+'">'+l+"</a>"),i.append(r.$el),t.elements[s]=r)})},AweGroup.prototype.update=function(e,t,i,n){this.updateSelector(n);var a=this;if(jQuery.map(this.elements,function(n,o){n.update(e,t,i,a.getSelector())}),"constraint"===this.widget){var o=!0,s=this.getPrimaryValue(),l=this;"object"===jQuery.type(s)&&(s=JSON.stringify(s)),jQuery.map(this.elements,function(e,t){var i=e.getValue();"object"===jQuery.type(i)&&(i=JSON.stringify(i)),t!==l.primary&&i!==s&&(o=!1)}),o?this.$el.addClass("constraint"):this.$el.removeClass("constraint")}},AweGroup.prototype.getPrimaryValue=function(){return this.elements[this.primary].getValue()},AweGroup.prototype.updateSelector=function(e){this.options.useParentKey?this.options.selector=e:_super.prototype.updateSelector.call(this,e)},AweGroup.prototype.getSelector=function(){return this.options.selector},AweGroup.getDefaultValue=function(options,parentData,key){options.useParentKey||(parentData[key]={});var output=options.useParentKey?parentData:parentData[key];return jQuery.map(options.elements,function(elOptions,name){void 0!==options.devices?elOptions.devices=options.devices:delete elOptions.devices,AweForm.elementsMap[elOptions.type]&&eval(AweForm.elementsMap[elOptions.type]+".getDefaultValue(elOptions, output, name)")}),output},AweGroup.prototype.events=function(){var e=this,t=this.$el;switch(this.widget){case"constraint":jQuery(".js-constraint",this.$el).click(function(i){if(i.stopPropagation(),t.toggleClass("constraint"),t.hasClass("constraint")){var n=e.elements[e.primary].getValue();e.setContraintValue(n)}}),this.elements[this.primary].$el.change(function(i,n){t.hasClass("constraint")&&"object"==typeof n&&!n.updateModel&&e.setContraintValue(n.current)});break;case"tabs":this.$el.aweTabs({event:"click",active:0})}},AweGroup.prototype.setContraintValue=function(e,t){var i=this.primary;jQuery.map(this.elements,function(n,a){a!==i&&n.setValue(e,{inlineCss:t})})},AweGroup.prototype.getValue=function(){var e={};return jQuery.map(this.elements,function(t,i){e[i]=t.getValue()}),e},AweGroup.prototype.setMediaPanel=function(e){_super.prototype.setMediaPanel.call(this,e),jQuery.map(this.elements,function(t,i){t.setMediaPanel(e)})},AweGroup}(ElementForm);AweBuilder.AweGroup=AweGroup;var AweIcon=function(e){function t(){e.apply(this,arguments),this.defaultValue=""}return __extends(t,e),t.prototype.validateOptions=function(t){e.prototype.validateOptions.call(this,t)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="<%= classes %>">\n                    <% if (!showTabsOnly) { %>\n                    <span class="ac_panel-item-general__title"><%= title %></span>\n                    <div class="ac_panel-item-general__content ac_select-list">\n                        <span class="val">\n                            <span class="icon-selected"><i class=""></i></span>\n                            <span class="icon-name"></span>\n                            <i class="acicon acicon-triangle-down"></i>\n                        </span>\n                        <ul class="option-list">\n                            <li>\n                    <% } %>\n                                <div class="js-icon-tabs ac_tab-item ac_tab-item--2 awe-tabs">\n                                    <ul class="ac_tab-item__nav tabs-nav tabs-top"></ul>\n                                    <div class="js-icon-libraries ac_tab-item__content"></div>\n                                </div>\n                    <% if (!showTabsOnly) { %>\n                            </li>\n                        </ul>\n                    </div>\n                    <% } %>\n                </div>\n            ')},t.prototype.render=function(e){var t={title:e.title,classes:this.classes,showTabsOnly:e.showTabsOnly};this.$el.append(this.template(t));var i=this,n=AweBuilder.prepareAjaxParamenters("icon",{_action:"init"});if(void 0===window.AweBuilderSettings.libraries.fontIcons)n&&(window.AweBuilderSettings.libraries.fontIcons={ready:!1,frontend:!0,backend:!0,data:{}},jQuery.post(n.url,n.data,function(e){var t=e;t&&"array"===jQuery.type(t)&&t.length?jQuery.each(t,function(e,n){i.loadLibrary(n.name,function(e,a){n.icons=e,n.files=a,window.AweBuilderSettings.libraries.fontIcons.data[n.name]=jQuery.extend(!0,{},n),i.renderLibrary(n),Object.keys(window.AweBuilderSettings.libraries.fontIcons.data).length===t.length&&(i.$el.trigger("elIconReady"),window.AweBuilderSettings.libraries.fontIcons.ready=!0)})}):(i.$el.trigger("elIconReady"),window.AweBuilderSettings.libraries.fontIcons.ready=!0)},"json"));else{var a;a=setInterval(function(){var e=window.AweBuilderSettings.libraries.fontIcons;e.ready&&(clearInterval(a),jQuery.map(e.data,function(e,t){i.renderLibrary(e)}),i.$el.trigger("elIconReady"))},200)}},t.prototype.renderLibrary=function(e){if("object"===jQuery.type(e)&&jQuery.type(e.icons)&&(jQuery(".js-icon-tabs > ul",this.$el).append('<li data-name="'+e.name+'"><a href="#'+e.name+"-icon-library-"+this.cid+'">'+e.title+"</a></li>"),jQuery(".js-icon-libraries",this.$el).append('<div id="'+e.name+"-icon-library-"+this.cid+'" class="js-icon-library"><ul class="js-list-icon ac_list-icon"></ul></div>'),"array"===jQuery.type(e.icons))){var t=this;jQuery.each(e.icons,function(i,n){jQuery("#"+e.name+"-icon-library-"+t.cid+" ul",t.$el).append('<li class="js-icon-item" title="'+n.name+'"><i class="'+n.classes+'"></i></li>')})}},t.prototype.loadLibrary=function(e,t){var i=AweBuilder.prepareAjaxParamenters("icon",{_action:"load",name:e});i&&jQuery.post(i.url,i.data,function(e){var i=e;if(void 0!==i&&void 0!==i.icons)if(i.files){var n={};jQuery.each(i.files,function(){n[this]={type:AweBuilder.CSS_FILE,destination:["backend","frontend"]}}),AweBuilder.addLibraries(n,function(){t(i.icons,i.files)})}else t(i.icons);else t()},"json")},t.prototype.changeElementValue=function(e){if(jQuery("span.icon-name",this.$el).text(""),jQuery("span.icon-selected > i",this.$el).attr("class",""),e){var t=jQuery('.js-icon-libraries i[class="'+e+'"]',this.$el),i=t.parent().attr("title");jQuery("span.icon-name",this.$el).text(i),jQuery("span.icon-selected > i",this.$el).addClass(e)}},t.prototype.events=function(){var e=this;this.$el.click(function(t){t.preventDefault();var i=jQuery("ul.option-list",e.$el);jQuery(t.target).closest("ul.option-list").length||i.toggleClass("js-active").toggle()}),jQuery(document).click(function(t){if(0===jQuery(t.target).closest(e.$el).length){var i=jQuery("ul.option-list",e.$el);i.hasClass("js-active")&&i.removeClass("js-active").hide()}}),this.$el.bind("elIconReady",function(){jQuery(".js-icon-tabs",e.$el).aweTabs({event:"click",active:0})}),this.$el.delegate(".js-icon-item","click",function(t){t.stopPropagation();var i=jQuery("> i",this).attr("class"),n=jQuery(this).attr("title");jQuery(".js-icon-item.active",e.$el).removeClass("active"),jQuery(this).addClass("active"),jQuery("span.icon-name",e.$el).text(n),jQuery("span.icon-selected > i",e.$el).attr("class",i),e.setValue(i),jQuery("ul.option-list",e.$el).removeClass("js-active").hide()})},t}(ElementForm);AweBuilder.AweIcon=AweIcon;var AweStorage=function(e){function t(){e.apply(this,arguments),this.defaultValue=""}return __extends(t,e),t.getDefaultValue=function(e,t,i){t[i]=e.defaultValue?e.defaultValue:""},t}(ElementForm);AweBuilder.AweStorage=AweStorage;var AweColor=function(e){function t(){e.apply(this,arguments),this.defaultValue=""}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="ac_panel-item-general ac_panel-item-general--2">\n                    <span class="ac_panel-item-general__title"><%= title %></span>\n                    <div class="ac_panel-item-general__content">\n                        <div class="ac_panel-item-general__content-right">\n                            <input type="text" class="js-awe-colorpicker spectrum">\n                        </div>\n                    </div>\n                </div>')},t.prototype.render=function(e){this.$el.append(this.template({title:e.title}))},t.prototype.changeElementValue=function(e){jQuery("input.js-awe-colorpicker",this.$el).spectrum("set",e)},t.prototype.events=function(){var e=this,t=this.options,i=t.pluginOptions,n={color:this.options.defaultValue,preferredFormat:"hex",showInput:!0,showAlpha:!0,alphaVertical:!0,allowEmpty:!0,showPalette:!0,showSelectionPalette:!1,palette:window.AweBuilderSettings.spectrumPalette,maxSelectionSize:6,appendTo:".js-ac-spcontainers"};n=jQuery.extend(!0,{},n,i);var a=i&&i.move?i.move:void 0,o=i&&i.hide?i.hide:void 0;n.move=function(t){a&&a(t),t=t?t.toString():"",e.setValue(t)},n.hide=function(t){"function"==typeof o&&o(t),t=t?t.toString():"",e.setValue(t)},jQuery("input.js-awe-colorpicker",this.$el).spectrum(n).click(function(e){e.preventDefault(),jQuery(this).spectrum("toggle")})},t}(ElementForm);AweBuilder.AweColor=AweColor;var AweRanger=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(t){this.mouseDragging=!1,void 0===t.defaultValue&&(t.defaultValue=t.min),e.prototype.initialize.call(this,t),this.createTemplate(),void 0===t.unit?t.unit="px":!1===t.unit&&(t.unit=""),void 0===t.allowChangeRange&&(t.allowChangeRange=!0),this.options=t},t.prototype.validateOptions=function(t){if(e.prototype.validateOptions.call(this,t),void 0===t.min)throw Error("You must define minimum value for slider element.");if(void 0===t.max)throw Error("You must define minimum value for slider element.")},t.prototype.render=function(e){this.$el.append(this.template(this.options))},t.prototype.createTemplate=function(){"button"===this.options.widget?this.template=_.template('\n                    <div class="ac_box-item--range">\n                        <span class="title js-title"><%= title %></span>\n                        <div class="item-range js-item-range">\n                            <div class="value">\n                                <span class="number js-ranger-title" contenteditable="true"><%= defaultValue %></span>\n                                <sup><%= unit %></sup>\n                            </div>\n                            <div class="js-ac-number ac_number" data-min="<%= min %>" data-max="<%= max %>">\n                                <span class="js-minus minus"><i class="acicon acicon-minus"></i></span>\n                                <span class="js-plus plus"><i class="acicon acicon-plus"></i></span>\n                            </div>\n                        </div>\n                    </div>'):this.template=_.template('\n                    <div class="ac_box-item--range">\n                        <span class="title js-title"><%= title %></span>\n                        <div class="item-range js-item-range">\n                            <div class="js-value value">\n                                <span class="js-ranger-title number" contenteditable="true"><%= defaultValue %></span>\n                                <sup><%= unit %></sup>\n                            </div>\n                            <div class="js-slider-range-min ac_slider-range-min">\n                                <input type="range" min="<%= min %>" max="<%= max %>" value="<%= defaultValue %>">\n                            </div>\n                        </div>\n                    </div>')},t.prototype.changeElementValue=function(e){var t=parseInt(e);if(isNaN(t))jQuery(".js-value > sup",this.$el).hide();else{e=t,jQuery(".js-value > sup",this.$el).show(),this.$el.find(".js-slider-range-min > input").val(e);var i=this.options;i.allowChangeRange&&(e>i.max?(i.max=e,this.$el.find(".js-slider-range-min > input").attr("max",e),this.$el.find(".js-ac-number").attr("data-max",e)):e<i.min&&(i.min=e,this.$el.find(".js-slider-range-min > input").attr("min",e),this.$el.find(".js-ac-number").attr("data-min",e)))}this.$el.find(".js-item-range span.js-ranger-title").text(e)},t.prototype.events=function(){var e=this,t=this.options;"button"===t.widget?jQuery(".js-ac-number > span",this.$el).click(function(i){i.stopPropagation();var n=parseInt(e.value),a=!1;isNaN(n)||(jQuery(this).hasClass("js-minus")?n-1>=t.min&&(a=!0,n-=1):n+1<=t.max&&(a=!0,n+=1)),a&&(jQuery("span.js-ranger-title",e.$el).text(n),e.setValue(n))}):jQuery(".js-slider-range-min > input",e.$el).change(function(t){t.stopPropagation();var i=jQuery(this).val();i!==e.getValue()&&(e.$el.find(".js-item-range span.js-ranger-title").text(i),e.setValue(i))}).mousemove(function(){e.mouseDragging&&jQuery(this).trigger("change")}).mousedown(function(){e.mouseDragging=!0}).mouseup(function(){e.mouseDragging=!1}),e.$el.delegate('.js-item-range span.js-ranger-title[contenteditable="true"]',"blur",function(t){e.setValue(jQuery(this).text())}),e.$el.delegate('.js-item-range span.js-ranger-title[contenteditable="true"]',"keydown",function(t){var i=t.which|t.keyCode;13!==i&&27!==i||(t.preventDefault(),27===i&&jQuery(this).text(e.getValue()),jQuery(this).trigger("blur"))})},t.prototype.setValue=function(t){"string"===jQuery.type(t)&&(t=parseInt(t),isNaN(t)&&(t=parseInt(this.getValue())));var i=this.options.unit;""!==i&&(t=""+t+i),e.prototype.setValue.call(this,t)},t}(ElementForm);AweBuilder.AweRanger=AweRanger;var AweBorderbox=function(e){function t(){e.apply(this,arguments),this.defaultValue={color:"",width:"0",style:"solid"}}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="ac_box-item--number">\n                    <span class="title"><%= title %></span>\n                    <div class="item-content">\n                        <div class="number-wrapper">\n                            <input type="text" class="js-box-spectrum">\n                            <div class="value">\n                                <span class="js-box-number number" contenteditable="true"><%= defaultValue.width %></span>\n                                <sup><%= unit %></sup>\n                                <span class="style js-option-style">\n                                <% _.map(listOption, function(optVal,optKey ){ %>\n                                    <% if (defaultValue.style == optVal) { %>\n                                       <span data-key="<%= optKey %>" class="selected"><%= optVal %></span>\n                                    <% } %>\n                                    <% if (defaultValue.style != optVal) { %>\n                                       <span data-key="<%= optKey %>"><%= optVal %></span>\n                                    <% } %>\n                                <%})%>\n                                </span>\n                            </div>\n                        </div>\n                        <div class="js-ac-number ac_number">\n                            <span class="js-minus minus">\n                                <i class="acicon acicon-minus"></i>\n                            </span>\n                            <span class="js-plus plus">\n                                <i class="acicon acicon-plus"></i>\n                            </span>\n                        </div>\n                    </div>\n                </div>'),void 0===t.minWidth&&(t.minWidth=0),void 0===t.maxWidth&&(t.maxWidth=100),this.options=t},t.prototype.render=function(e){var t=this.template({title:e.title,defaultValue:e.defaultValue,unit:e.unit,listOption:{none:"none",solid:"solid",dashed:"dashed",dotted:"dotted",double:"double"}});this.$el.append(t).addClass("ac_2-col")},t.prototype.changeElementValue=function(e){var t=e.split(" ");jQuery(".js-box-number",this.$el).text(parseInt(t[0])),jQuery(".js-option-style span",this.$el).each(function(e,i){t[1]?(jQuery(this).removeClass("selected"),jQuery(this).attr("data-key")==t[1]&&jQuery(this).addClass("selected")):0==e&&jQuery(this).addClass("selected")}),jQuery(".js-box-spectrum",this.$el).spectrum("set",t.splice(2).join(" "))},t.prototype.getElementsValue=function(){var e={color:jQuery(".js-box-spectrum",this.$el).spectrum("get"),width:parseInt(jQuery(".js-box-number",this.$el).text())+"px",style:jQuery(".selected",this.$el).attr("data-key")};return e.color=e.color?e.color.toString():"",e.width+" "+e.style+" "+e.color},t.prototype.events=function(){var e=this,t=this.$el,i=this.options,n={color:this.options.defaultValue.color,preferredFormat:"hex",showInput:!0,showAlpha:!1,alphaVertical:!0,allowEmpty:!0,showPalette:!0,showSelectionPalette:!1,palette:window.AweBuilderSettings.spectrumPalette,maxSelectionSize:6,appendTo:".js-ac-spcontainers"};n=jQuery.extend(!0,{},n,i.colorOptions);var a=i.colorOptions,o=a&&a.move?a.move:void 0,s=a&&a.hide?a.hide:void 0;n.move=function(t){o&&o.call(t),e.setValue(e.getElementsValue())},n.hide=function(t){s&&s.call(t),e.setValue(e.getElementsValue())},jQuery(".js-box-spectrum",t).spectrum(n).click(function(e){e.preventDefault(),jQuery(this).spectrum("toggle")}),jQuery(".style",t).on("click",function(){var t=jQuery(this);t.children(".selected").removeClass("selected").next().addClass("selected"),0==t.children(".selected").length&&t.children().first().addClass("selected"),e.setValue(e.getElementsValue())}),jQuery(".js-ac-number > span",t).click(function(n){n.preventDefault();var a=jQuery(".js-box-number",t),o=parseInt(a.text()),s=!1;jQuery(this).hasClass("js-minus")?o-1>=i.minWidth&&(s=!0,o-=1):o+1<=i.maxWidth&&(s=!0,o+=1),s&&(a.text(o),e.setValue(e.getElementsValue()))}),jQuery(".js-box-number",this.$el).blur(function(t){t.stopPropagation();var i=parseInt(jQuery(this).text()),n=e.getValue();isNaN(i)&&(i=n.width),i!==n.width&&e.setValue(e.getElementsValue())}).keydown(function(t){var i=t.which|t.keyCode;13!==i&&27!==i||(t.preventDefault(),27===i&&jQuery(this).text(e.getValue().width),jQuery(this).trigger("blur"))})},t}(ElementForm);AweBuilder.AweBorderbox=AweBorderbox;var AweFileSelector=function(e){function t(){e.apply(this,arguments),this.defaultValue={fid:-1,url:""}}return __extends(t,e),t.prototype.initialize=function(t){"multi"===t.widget&&(this.defaultValue=[]),e.prototype.initialize.call(this,t),this.template=_.template('\n                <div class="ac_panel-item-general ac_panel-item-general--2">\n                    <span class="ac_panel-item-general__title"><%= title %></span>\n                    <div class="ac_panel-item-general__content">\n                        <div class="ac_panel-item-general__content-right">\n                            <% if (widget === \'default\') { %>\n                            <i class="js-delete acicon acicon-del" title="'+this.translate("Remove")+'" style="display: none;"></i>\n                            <div class="js-bg-image bg-image"></div>\n                            <% } else if (widget === \'multi\') { %>\n                            <i class="js-add acicon acicon-plus" title="'+this.translate("Add")+'"></i>\n                            <% } %>\n                        </div>\n                    </div>\n                </div>\n                <% if (widget !== \'default\') { %>\n                    <div class="ac_image-group">\n                        <div class="js-images-wrapper ac_row">\n                        <% if (widget === \'multi\') { %>\n                            <% _.each(files, function(file) { %>\n                            <div class="js-image ac_3-col">\n                                <div class="ac_panel__image-item">\n                                    <img src="<%= file.url %>" alt="">\n                                    <div class="ac_panel__image-item">\n                                        <ul>\n                                            <li title="'+this.translate("Move")+'"><i class="acicon acicon-move"></i></li>\n                                            <li title="'+this.translate("Edit")+'"><i class="acicon acicon-pen"></i></li>\n                                            <li title="'+this.translate("Delete")+'"><i class="acicon acicon-del"></i></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                            <% }) %>\n                        <% } else { %>\n                            <div class="ac_1-col">\n                                <div class="ac_panel__image-item">\n                                    <img src="<%= files.url %>" alt="">\n                                </div>\n                            </div>\n                        <% } %>\n                        </div>\n                    </div>\n                <% } %>\n            '),this.mediaPanel=t.mediaPanel},t.prototype.render=function(e){this.$el.append(this.template({title:e.title,widget:e.widget?e.widget:"default",files:e.defaultValue}))},t.prototype.setValue=function(t,i){if(this.actionData){var n=this.getValue().slice(),a={action:"",index:-1};switch(this.actionData.action){case"edit":var o=this.actionData.$image.index();n[o]=t,a={action:"edit",index:o};break;case"add":Array.prototype.push.apply(n,t),a={action:"add",index:n.length-1};break;case"delete":n.splice(this.actionData.$image.index(),1),a={action:"delete",index:this.actionData.$image.index()};break;case"sort":var s=n.splice(this.actionData.before,1)[0];this.actionData.after>0?this.actionData.after>=n.length?n.push(s):n.splice(this.actionData.after,0,s):n.unshift(s),a=jQuery.extend(!0,{},this.actionData)}e.prototype.setValue.call(this,n,jQuery.extend({},i,{eventValue:a})),this.actionData=void 0}else e.prototype.setValue.call(this,t,i)},t.prototype.changeElementValue=function(e){switch(this.options.widget){case"multi":var t=jQuery(".js-images-wrapper",this.$el).html("");if("array"===jQuery.type(e)){var i=_.template('\n                            <div class="js-image  ac_3-col">\n                                <div class="ac_panel__image-item">\n                                    <img src="<%= file.url %>" alt="">\n                                    <div class="ac_panel__image-item-control">\n                                        <ul>\n                                            <li class="js-move" title="'+this.translate("Move")+'"><i class="acicon acicon-move"></i></li>\n                                            <li class="js-edit" title="'+this.translate("Edit")+'"><i class="acicon acicon-pen"></i></li>\n                                            <li class="js-del" title="'+this.translate("Delete")+'"><i class="acicon acicon-del"></i></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>');jQuery.each(e,function(e,n){n.url&&t.append(i({file:n}))})}break;case"single":break;default:jQuery(".js-bg-image",this.$el).css("background-image","url("+e.url+")"),jQuery(".js-awe-image-url",this.$el).val(e.url),jQuery(".js-awe-image-fid",this.$el).val(e.fid),e&&e.url.trim()?jQuery(".js-delete",this.$el).show():jQuery(".js-delete",this.$el).hide()}},t.prototype.events=function(){var e=this,t=this.$el;switch(this.options.widget){case"multi":jQuery(".js-add",this.$el).click(function(t){t.preventDefault(),e.openMediaPanel(!0),e.actionData={action:"add"}}),this.$el.delegate(".js-image li","click",function(t){t.preventDefault(),jQuery(this).hasClass("js-edit")?(e.openMediaPanel(!1),e.actionData={action:"edit",$image:jQuery(this).parents(".js-image:first")}):jQuery(this).hasClass("js-del")&&(e.actionData={action:"delete",$image:jQuery(this).parents(".js-image:first")},e.setValue())}),jQuery(".js-images-wrapper",this.$el).sortable({handle:".js-move",tolerance:"pointer",start:function(t,i){e.actionData={action:"sort",before:i.item.index()}},stop:function(t,i){e.actionData.after=i.item.index(),e.setValue()}});break;case"single":break;default:jQuery(".js-bg-image",t).click(function(t){t.preventDefault(),e.openMediaPanel(!1)}),jQuery(".js-delete",t).click(function(t){t.preventDefault(),e.setValue({url:"",fid:-1})})}},t.prototype.openMediaPanel=function(e){this.mediaPanel&&(this.mediaPanel.model.setMultiple(e),this.mediaPanel.open(this))},t.getDefaultValue=function(e,t,i){switch(e.widget){case"multi":"array"!==jQuery.type(e.defaultValue)&&(e.defaultValue=[]);break;default:"object"===jQuery.type(e.defaultValue)&&void 0!==e.defaultValue.url||(e.defaultValue={fid:-1,url:""})}return ElementForm.getDefaultValue(e,t,i)},t}(ElementForm);AweBuilder.AweFileSelector=AweFileSelector;var AweOrder=function(e){function t(){e.apply(this,arguments),this.defaultValue=[]}return __extends(t,e),t.prototype.validateOptions=function(t){if(e.prototype.validateOptions.call(this,t),"object"!==jQuery.type(t.options))throw Error("You must define list values to order for order element type.");if(void 0!==t.defaultValue&&"array"!==jQuery.type(t.defaultValue))throw Error("Default values of order element must be array.");if("array"===jQuery.type(t.defaultValue)){if(t.defaultValue.length!==Object.keys(t.options).length)throw Error("Order element: Default values length must equal options length.");var i=Object.keys(t.options);jQuery.each(t.defaultValue,function(e,t){if(-1===jQuery.inArray(t,i))throw Error("You must use options key to default value. Value '"+this+"' is not one of options.")})}},t.prototype.initialize=function(t){this.template=_.template('\n                <div class="js-order-wrapper ac_panel-item-general-group">\n                    <span class="ac_panel-item-general-group__title"><%= title %></span>\n                    <% _.map(options, function(value, key) { %>\n                    <div class="js-order-item ac_panel-item-general ac_panel-item-general--2" data-key="<%= key %>">\n                        <span class="ac_panel-item-general__title">\n                            <i class="js-order-move acicon acicon-move"></i>\n                            <%= value %>\n                        </span>\n                        <div class="ac_panel-item-general__content"></div>\n                    </div>\n                    <% }) %>\n                </div>\n            '),e.prototype.initialize.call(this,t)},t.prototype.render=function(e){this.$el.append(this.template(e))},t.prototype.changeElementValue=function(e){jQuery(".js-order-item",this.$el).remove();var t=jQuery(".js-order-wrapper",this.$el),i=this.options.options;jQuery.each(e,function(e,n){t.append('\n                    <div class="js-order-item ac_panel-item-general ac_panel-item-general--2" data-key="'+n+'">\n                        <span class="ac_panel-item-general__title">\n                            <i class="js-order-move acicon acicon-move"></i>\n                            '+i[n]+'\n                        </span>\n                        <div class="ac_panel-item-general__content"></div>\n                    </div>')}),jQuery(".js-order-wrapper",this.$el).sortable("refresh")},t.prototype.events=function(){var e=this;jQuery(".js-order-wrapper",this.$el).sortable({items:"> .js-order-item",axis:"y",stop:function(t,i){var n=[];jQuery(".js-order-item",e.$el).each(function(){n.push(jQuery(this).attr("data-key"))}),e.setValue(n)}})},t.getDefaultValue=function(e,t,i){return void 0===e.defaultValue&&(e.defaultValue=Object.keys(e.options)),ElementForm.getDefaultValue(e,t,i)},t}(ElementForm);AweBuilder.AweOrder=AweOrder;var AweAttributes=function(e){function t(){e.apply(this,arguments),this.defaultValue=[],this.$editItem=null}return __extends(t,e),t.prototype.validateOptions=function(t){if(e.prototype.validateOptions.call(this,t),void 0===t.formElements)throw Error("You must define elements for attribute form.")},t.prototype.initialize=function(t){var i=Object.keys(t.formElements);if(this.primaryEl=t.primaryEl?[t.primaryEl]:[i[0]],t.primaryEl)if("string"===jQuery.type(t.primaryEl))void 0!==i[t.primaryEl]&&(this.primaryEl=[t.primaryEl]);else if("array"===jQuery.type(t.primaryEl)){var n=[];jQuery.each(t.primaryEl,function(e,t){-1!==jQuery.inArray(t,i)&&n.push(t)}),n.length>0&&(this.primaryEl=n)}e.prototype.initialize.call(this,t)},t.prototype.render=function(e){this.attrForm=new AweForm(e.formElements,"",{mediaPanel:this.mediaPanel}),this.$el.append('\n                <div class="ac_panel-item-general-group">\n                    <span class="ac_panel-item-general-group__title">'+this.translate(e.title)+'</span>\n                    <div class="ac_panel-item-general-group__content">\n                        <div class="js-attr-form awe-attr-form"></div>\n                        <div class="js-buttons awe-attr-buttons">\n                            <a href="#" class="js-attr-save-btn ac_btn ac_btn--1">'+this.translate("Add")+'</a>\n                            <a href="#" class="js-attr-cancel-btn ac_btn ac_btn--2" style="display: none">'+this.translate("Cancel")+'</a>\n                        </div>\n                        <div class="js-attr-list awe-attr-list" style="margin-top: 10px"></div>\n                    </div>\n                </div>\n            ');var t=this;jQuery(".js-attr-list",this.$el).sortable({items:".js-attr-item",axis:"y",start:function(e,t){t.item.data("before-index",t.item.index())},stop:function(e,i){var n=[],a=i.item.data("before-index"),o=i.item.index();jQuery(".js-attr-item",t.$el).each(function(){var e=AweBuilder.parseJSON(jQuery("input[type=hidden]",this).val());n.push(e)}),t.setValue(n,{action:"sort",beforeIndex:a,afterIndex:o})}}),"array"===jQuery.type(e.defaultValue)&&this.changeElementValue(e.defaultValue),jQuery(".js-attr-form",this.$el).append(this.attrForm.$el)},t.prototype.events=function(){var e=this;jQuery(".js-buttons > a",this.$el).click(function(t){if(t.preventDefault(),jQuery(this).hasClass("js-attr-save-btn")){var i=e.attrForm.getFormValues(),n=e.options.validateItem,a=!0;if("function"===jQuery.type(n)&&(a=n(i)),a){var o=e.getValue().slice(),s={};if(e.$editItem){var l=e.$editItem.index();o[l]=i,s={action:"update",index:l}}else o.push(i),s={action:"add"};e.setValue(o,s)}}e.attrForm.reset(),e.$editItem=null,jQuery(".js-attr-cancel-btn",e.$el).hide(),jQuery(".js-attr-save-btn",e.$el).text(e.translate("Add"))}),this.$el.delegate(".js-attr-controllers > i","click",function(t){t.preventDefault();var i=jQuery(this).parents(".js-attr-item:first"),n=e.getValue();if(jQuery(this).hasClass("js-attr-del")){var a=i.index(),o=n.splice(a,1);e.setValue(n,{action:"delete",index:a,deleteItem:o})}else{var s=AweBuilder.parseJSON(jQuery("input[type=hidden]",i).val());e.attrForm.setFormValues(s),e.$editItem=i,jQuery(".js-attr-cancel-btn",e.$el).show(),jQuery(".js-attr-save-btn",e.$el).text(e.translate("Save"))}})},t.prototype.changeElementValue=function(e){var t=this,i=jQuery(".js-attr-list",this.$el).html("");jQuery.each(e,function(e,n){for(var a="",o=0;o<t.primaryEl.length;o++)if(n[t.primaryEl[o]]){a=n[t.primaryEl[o]];break}i.append('\n                    <div class="js-attr-item ac_panel-item-general ac_panel-item-general--2">\n                        <span class="ac_panel-item-general__title">\n                            <i class="js-attr-move acicon acicon-move"></i>\n                            '+a+'\n                        </span>\n                        <input type="hidden" value=\''+JSON.stringify(n)+'\'>\n                        <div class="ac_panel-item-general__content">\n                            <div class="js-attr-controllers ac_panel-item-general__content-right">\n                                <i class="js-attr-edit acicon acicon-pen" title="'+t.translate("Edit")+'"></i>\n                                <i class="js-attr-del acicon acicon-del" title="'+t.translate("Remove")+'"></i>\n                            </div>\n                        </div>\n                    </div>\n                ')}),i.data("ui-sortable")&&i.sortable("refresh")},t.prototype.setMediaPanel=function(t){e.prototype.setMediaPanel.call(this,t),this.attrForm.setMediaPanel(t)},t.getDefaultValue=function(e,t,i){return void 0===e.defaultValue&&(e.defaultValue=[]),ElementForm.getDefaultValue(e,t,i)},t}(ElementForm);AweBuilder.AweAttributes=AweAttributes}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){function acRenderModelStyle(e,t){function i(e,t){if(void 0!==t.style){var i=[AweBuilder.STYLE_NORMAL,AweBuilder.STYLE_HOVER,AweBuilder.STYLE_ACTIVE],a=void 0;for(var o in t.style)jQuery.inArray(o,i)>=0&&(a=e+"."+o,n(a,t.style[o]))}}function n(e,t){void 0!==t.font&&acRenderStyleData(o,e,"font",t.font,a,!0),void 0!==t.margin&&acRenderStyleData(o,e,"margin",t.margin,a,!0),void 0!==t.padding&&acRenderStyleData(o,e,"padding",t.padding,a,!0),void 0!==t.border&&acRenderStyleData(o,e,"border",t.border,a,!0),void 0!==t.transform&&acRenderStyleData(o,e,"transform",t.transform,a,!0),void 0!==t.shadow&&acRenderStyleData(o,e,"shadow",t.shadow,a,!0),void 0!==t.sizePosition&&acRenderStyleData(o,e,"sizePosition",t.sizePosition,a,!0),void 0!==t.background&&acRenderStyleData(o,e,"background",t.background,a,!0)}var a={},o={styles:{},flags:{}};if(t&&(o.option=t),void 0!==e&&(a=e instanceof AweBuilder.ContentObject?e.get("settings"):"string"==typeof e?jQuery.parseJSON(e):e),Object.keys(a).length)for(var s in a)i(s,a[s]);return o}function acRenderStyleData(renderedStyle,selector,brand,data,settings,firstCall){function acGetValue(e){var t={},i=selector.split("."),n=i[0]+"."+i[1];if(void 0!=e)if("object"!=typeof e||jQuery.isArray(e)||void 0==e.xl&&void 0==e.lg&&void 0==e.md&&void 0==e.sm&&void 0==e.xs)t[n+".xl"]=e;else for(var a in e)t[n+"."+a]=e[a];return t}function getChildStyleData(e){return void 0==renderedStyle.styles[e]&&(renderedStyle.styles[e]={}),renderedStyle.styles[e]}function setDataToChildStyle(childStyleData,key,css_key,data,default_data,firstCall,prefix,suffix,compare){var checkCondition;void 0==prefix&&(prefix=""),void 0==suffix&&(suffix=""),checkCondition=void 0!==compare&&compare?eval("data "+compare):data,void 0!==checkCondition?childStyleData[key]=checkCondition?css_key+":"+prefix+data+suffix+";":css_key+":"+default_data+";":1!=firstCall&&delete childStyleData[key]}function acRenderFontStyle(e,t){var i=acGetValue(e.enable),n=["family","weight","size","align","lineHeight","letterSpacing","font-color","font-style","text-decoration"];if(void 0!==i&&Object.keys(i).length){var a=acGetValue(e.family),o=acGetValue(e.weight),s=acGetValue(e.size),l=acGetValue(e.align),r=acGetValue(e.lineHeight),c=acGetValue(e.letterSpacing),d=acGetValue(e.color),u=acGetValue(e.styles),p=void 0;for(var h in i)if(p=getChildStyleData(h),i[h]){var m=a[h]?'"'+a[h]+'"':a[h],g=!1;if(setDataToChildStyle(p,"family","font-family",m,"inherit",t),o[h]&&isNaN(o[h])&&(-1!==o[h].indexOf("i")?(g=!0,p["font-style"]="font-style:italic;"):delete p["font-style"],o[h]=parseInt(o[h])),setDataToChildStyle(p,"weight","font-weight",o[h],"inherit",t),setDataToChildStyle(p,"size","font-size",s[h],"inherit",t,"",""),setDataToChildStyle(p,"align","text-align",l[h],"inherit",t),setDataToChildStyle(p,"lineHeight","line-height",r[h],"inherit",t,"",""),setDataToChildStyle(p,"letterSpacing","letter-spacing",c[h],"inherit",t,"",""),setDataToChildStyle(p,"font-color","color",d[h],"inherit",t),void 0!==u[h])if(u[h].length){var f=jQuery.inArray("italic",u[h]);-1!==f?(p["font-style"]="font-style:italic;",u[h].splice(f,1)):g||delete p["font-style"];var y=jQuery.inArray("uppercase",u[h]);-1!==y?(p["text-transform"]="text-transform:uppercase;",u[h].splice(y,1)):delete p["text-transform"];for(var v in u[h])"none"!=u[h][v]&&"normal"!=u[h][v]||delete u[h][v];u[h].length&&u[h].join("")?p["text-decoration"]="text-decoration:"+u[h].join(" ")+";":delete p["text-decoration"]}else delete p["text-decoration"],delete p["text-transform"],g||delete p["font-style"];else 1!=t&&(deleteAttributeCSS(h,["text-decoration","text-transform"]),g||delete p["font-style"])}else deleteAttributeCSS(h,n)}else deleteAttributeCSS(selector,n)}function acRenderMarginStyle(e,t){var i=acGetValue(e.enable),n=["margin","margin-top","margin-left","margin-right","margin-bottom"];if(void 0!==i&&Object.keys(i).length){var a=acGetValue(e.top),o=acGetValue(e.left),s=acGetValue(e.right),l=acGetValue(e.bottom),r=void 0;for(var c in i)r=getChildStyleData(c),i[c]?(setDataToChildStyle(r,"margin-top","margin-top",a[c],0,t,"",""),setDataToChildStyle(r,"margin-left","margin-left",o[c],0,t,"",""),setDataToChildStyle(r,"margin-right","margin-right",s[c],0,t,"",""),setDataToChildStyle(r,"margin-bottom","margin-bottom",l[c],0,t,"","")):deleteAttributeCSS(c,n)}else deleteAttributeCSS(selector,n)}function acRenderPaddingStyle(e,t){var i=acGetValue(e.enable),n=["padding","padding-top","padding-left","padding-right","padding-bottom"];if(void 0!==i&&Object.keys(i).length){var a=acGetValue(e.top),o=acGetValue(e.left),s=acGetValue(e.right),l=acGetValue(e.bottom),r=void 0;for(var c in i)r=getChildStyleData(c),i[c]?(setDataToChildStyle(r,"padding-top","padding-top",a[c],0,t,"",""),setDataToChildStyle(r,"padding-left","padding-left",o[c],0,t,"",""),setDataToChildStyle(r,"padding-right","padding-right",s[c],0,t,"",""),setDataToChildStyle(r,"padding-bottom","padding-bottom",l[c],0,t,"","")):deleteAttributeCSS(c,n)}else deleteAttributeCSS(selector,n)}function acRenderBorderStyle(e,t){function i(e,i,n,a){void 0!=a?e[i]=a?n+": "+a+" !important;":n+": :none;":1!=t&&delete e[i]}var n=acGetValue(e.enable),a=acGetValue(e.enableRadius),o=["border-top","border-left","border-right","border-bottom"];if(void 0!==n&&Object.keys(n).length){var s=acGetValue(e.top),l=acGetValue(e.left),r=acGetValue(e.right),c=acGetValue(e.bottom),d=void 0;for(var u in n)d=getChildStyleData(u),n[u]?(i(d,"border-top","border-top",s[u]),i(d,"border-left","border-left",l[u]),i(d,"border-right","border-right",r[u]),i(d,"border-bottom","border-bottom",c[u])):deleteAttributeCSS(u,o)}else deleteAttributeCSS(selector,o);var p=["topLeftRadius","bottomLeftRadius","topRightRadius","bottomRightRadius","-moz-topLeftRadius","-moz-bottomLeftRadius","-moz-topRightRadius","-moz-bottomRightRadius","-webkit-topLeftRadius","-webkit-bottomLeftRadius","-webkit-topRightRadius","-webkit-bottomRightRadius"];if(void 0!==a&&Object.keys(a).length){var h=acGetValue(e.topLeftRadius),m=acGetValue(e.bottomLeftRadius),g=acGetValue(e.topRightRadius),f=acGetValue(e.bottomRightRadius),d=void 0;for(var y in a)d=getChildStyleData(y),a[y]?(setDataToChildStyle(d,"topLeftRadius","border-top-left-radius",h[y],0,t,"",""),setDataToChildStyle(d,"-moz-topLeftRadius","-moz-border-top-left-radius",h[y],0,t,"",""),setDataToChildStyle(d,"-webkit-topLeftRadius","-webkit-border-top-left-radius",h[y],0,t,"",""),setDataToChildStyle(d,"bottomRightRadius","border-bottom-right-radius",f[y],0,t,"",""),setDataToChildStyle(d,"-moz-bottomRightRadius","-moz-border-bottom-right-radius",f[y],0,t,"",""),setDataToChildStyle(d,"-webkit-bottomRightRadius","-webkit-border-bottom-right-radius",f[y],0,t,"",""),setDataToChildStyle(d,"topRightRadius","border-top-right-radius",g[y],0,t,"",""),setDataToChildStyle(d,"-moz-topRightRadius","-moz-border-top-right-radius",g[y],0,t,"",""),setDataToChildStyle(d,"-webkit-topRightRadius","-webkit-border-top-right-radius",g[y],0,t,"",""),setDataToChildStyle(d,"bottomLeftRadius","border-bottom-left-radius",m[y],0,t,"",""),setDataToChildStyle(d,"-moz-bottomLeftRadius","-moz-border-bottom-left-radius",m[y],0,t,"",""),setDataToChildStyle(d,"-webkit-bottomLeftRadius","-webkit-border-bottom-left-radius",m[y],0,t,"","")):deleteAttributeCSS(y,p)}else deleteAttributeCSS(selector,p)}function acRenderTransformStyle(e,t){function i(e,t,i,n,a){void 0==a&&(a=""),n&&(e.transform["transform-"+t]=i+"("+n+a+")",e.moz_transform["-moz-transform-"+t]=i+"("+n+a+")",e.webkit_transform["-webkit-transform-"+t]=i+"("+n+a+")")}var n=acGetValue(e.enable),a=["transform","-moz-transform","-webkit-transform","perspective","-moz-perspective","-webkit-perspective"];if(void 0!==n&&Object.keys(n).length){var o=acGetValue(e.translateX),s=acGetValue(e.translateY),l=acGetValue(e.scaleX),r=acGetValue(e.scaleY),c=acGetValue(e.rotateX),d=acGetValue(e.rotateY),u=acGetValue(e.skewX),p=acGetValue(e.skewY),h=acGetValue(e.perspective),m=void 0,g={},f={},y={};for(var v in n)if(m=getChildStyleData(v),n[v]){var w={transform:{},moz_transform:{},webkit_transform:{}};i(w,"perspective","perspective",h[v],""),i(w,"translateX","translateX",o[v],""),i(w,"translateY","translateY",s[v],""),i(w,"scaleX","scaleX",l[v],""),i(w,"scaleY","scaleY",r[v],""),i(w,"rotateX","rotateX",c[v],""),i(w,"rotateY","rotateY",d[v],""),i(w,"skewX","skewX",u[v],""),i(w,"skewY","skewY",p[v],"");var b=!jQuery.isEmptyObject(w.transform);b?(g=_.toArray(w.transform).join(" "),f=_.toArray(w.moz_transform).join(" "),y=_.toArray(w.webkit_transform).join(" "),""!=jQuery.trim(g)&&(m.transform="transform:"+g+";"),""!=jQuery.trim(f)&&(m["-moz-transform"]="-moz-transform:"+f+";"),""!=jQuery.trim(y)&&(m["-webkit-transform"]="-webkit-transform:"+y+";")):(m.transform="transform:none;",m["-moz-transform"]="-moz-transform:none;",m["-webkit-transform"]="-webkit-transform:none;")}else deleteAttributeCSS(v,a)}else deleteAttributeCSS(selector,a)}function acRenderShadowStyle(e,t){if(void 0!==e.text){var i=acGetValue(e.text.enable);if(void 0!==i&&Object.keys(i).length){var n=acGetValue(e.text.horizontal),a=acGetValue(e.text.vertical),o=acGetValue(e.text.blur),s=acGetValue(e.text.color),l=void 0,r=[];for(var c in i)if(l=getChildStyleData(c),void 0!==i[c]&&i[c]){var d=!1;void 0!=n[c]?(r.push(""+n[c]),d=!0):r.push("0"),void 0!=a[c]?(r.push(""+a[c]),d=!0):r.push("0"),void 0!=o[c]&&(r.push(""+o[c]),d=!0),void 0!=s[c]&&s[c]&&(r.push(s[c]),d=!0),d&&(l["text-shadow"]="text-shadow:"+r.join(" ")+";")}else delete l["text-shadow"]}else deleteAttributeCSS(selector,["text-shadow"])}else deleteAttributeCSS(selector,["text-shadow"]);if(void 0!==e.box){var i=acGetValue(e.box.enable);if(void 0!==i&&Object.keys(i).length){var n=acGetValue(e.box.horizontal),a=acGetValue(e.box.vertical),o=acGetValue(e.box.blur),u=acGetValue(e.box.spread),s=acGetValue(e.box.color),p=acGetValue(e.box.inset),l=void 0,h=[];for(var m in i)if(l=getChildStyleData(m),void 0!==i[m]&&i[m]){var d=!1;void 0!==n[m]?(h.push(""+n[m]),d=!0):h.push("0"),void 0!==a[m]?(h.push(""+a[m]),d=!0):h.push("0"),void 0!==o[m]&&(h.push(""+o[m]),d=!0),void 0!==u[m]&&(h.push(""+u[m]),d=!0),void 0!==s[m]&&s[m]&&(h.push(s[m]),d=!0),void 0!==p[m]&&p[m]&&(h.push("inset"),d=!0),d&&(l["box-shadow"]="box-shadow: "+h.join(" ")+";")}else delete l["box-shadow"]}else deleteAttributeCSS(selector,["box-shadow"])}else deleteAttributeCSS(selector,["box-shadow"])}function acRenderLayoutStyle(e,t){var i=acGetValue(e.enableSize),n=acGetValue(e.enablePosition);if(void 0!==i&&Object.keys(i).length){var a=acGetValue(e.width),o=acGetValue(e.height),s=acGetValue(e.minHeight),l=void 0;for(var r in i)l=getChildStyleData(r),i[r]?(setDataToChildStyle(l,"width","width",a[r],"100%",t,"",""),setDataToChildStyle(l,"height","height",o[r],"auto",t,"",""),setDataToChildStyle(l,"min-height","min-height",s[r],"auto",t,"","")):deleteAttributeCSS(r,["width","height","min-height"])}else deleteAttributeCSS(selector,["width","height","min-height"]);if(void 0!==n&&Object.keys(n).length){var c=acGetValue(e.position),d=acGetValue(e.zIndex),u=acGetValue(e.special),p=acGetValue(e.top),h=acGetValue(e.right),m=acGetValue(e.left),g=acGetValue(e.bottom),l=void 0;for(var f in n)if(l=getChildStyleData(f),n[f]){if(setDataToChildStyle(l,"position","position",c[f],"static",t,"",""),delete l.top,delete l.left,delete l.bottom,delete l.right,delete l.zIndex,delete l.transform,void 0!==n[f]&&"static"!==n[f])switch(setDataToChildStyle(l,"zIndex","z-index",d[f],"auto",t,"",""),u[f]){case"center_center":setDataToChildStyle(l,"left","left","50%",0,t,"",""),setDataToChildStyle(l,"top","top","50%",0,t,"",""),setDataToChildStyle(l,"transform","transform","translate(-50%, -50%)","",t,"","");break;case"center_top":setDataToChildStyle(l,"left","left","50%",0,t,"",""),setDataToChildStyle(l,"top","top",p[f],0,t,"",""),setDataToChildStyle(l,"transform","transform","translateX(-50%)","",t,"","");break;case"center_bottom":setDataToChildStyle(l,"left","left","50%",0,t,"",""),setDataToChildStyle(l,"bottom","bottom",g[f],0,t,"",""),setDataToChildStyle(l,"transform","transform","translateX(-50%)","",t,"","");break;case"left_center":setDataToChildStyle(l,"top","top","50%",0,t,"",""),setDataToChildStyle(l,"left","left",m[f],0,t,"",""),setDataToChildStyle(l,"transform","transform","translateY(-50%)","",t,"","");break;case"right_center":setDataToChildStyle(l,"top","top","50%",0,t,"",""),setDataToChildStyle(l,"right","right",h[f],0,t,"",""),setDataToChildStyle(l,"transform","transform","translateY(-50%)","",t,"","");break;default:setDataToChildStyle(l,"top","top",p[f],0,t,"",""),setDataToChildStyle(l,"right","right",h[f],0,t,"",""),setDataToChildStyle(l,"bottom","bottom",g[f],0,t,"",""),setDataToChildStyle(l,"left","left",m[f],0,t,"","")}}else deleteAttributeCSS(f,["position","zIndex","top","left","right","bottom"])}else deleteAttributeCSS(selector,["position","zIndex","top","left","right","bottom"])}function renderBackgroundOverlay(e,t){var i=e.split("."),n=i[0];if(i.length>=3){var a=n+"| > .ac_bg__overlay|"+i[1]+"."+i[2];if(acSetDynamicPartStyle(renderedStyle,a,t?{"background-color":"background-color:"+t+";",display:"display: block;"}:{display:"display: none;"}),t&&void 0!==settings[n]&&settings[n].selector){var o=AweBuilder._$(".js-content-object.js-active");o.length&&(AweBuilder._$(settings[n].selector+" > .ac_bg__overlay",o).length||AweBuilder._$(""+settings[n].selector,o).prepend('<div class="ac_bg__overlay"></div>'))}}}function removeCssFilter(e,t){var i=e.split(".");i[0]+="|"+t+"|",e=i[0]+i[1]+"."+i[2],deleteAttributeCSS(e,["background-color"])}function acRenderBackgroundStyle(e,t){var i=acGetValue(e.enable),n=acGetValue(e.overlay),a=["background-color","background-image","background-size","background-repeat","background-position"];if(void 0!==i&&Object.keys(i).length){var o=acGetValue(e.color),s={},l={},r={},c={},d=void 0;void 0!==e.image?(void 0!==e.image.file&&(s=acGetValue(e.image.file)),void 0!==e.image.attachment&&(l=acGetValue(e.image.attachment)),void 0!==e.image.repeat&&(r=acGetValue(e.image.repeat)),void 0!==e.image.position&&(c=acGetValue(e.image.position))):e.isDeleted&&deleteAttributeCSS(e.deleteSelector,["background-image","background-size","background-repeat","background-position"]);for(var u in i)if(d=getChildStyleData(u),i[u]){if(renderBackgroundOverlay(u,n[u]),void 0!=o[u]?o[u]?d["background-color"]="background-color:"+o[u]+";":d["background-color"]="background-color:transparent;":1!=t&&delete d["background-color"],void 0!==s[u])if(void 0!==s[u].fid&&s[u].fid>0&&void 0!==s[u].url&&""!==s[u].url){if(d["background-image"]="background-image:url("+s[u].url+");",void 0!=l[u]&&l[u]?("parallax"==l[u]&&(l[u]="fixed"),d["background-attachment"]="background-attachment:"+l[u]+";"):1!=t&&delete d["background-attachment"],void 0===r[u]||"auto"==r[u]||"cover"==r[u]){var p=r[u]?r[u]:"cover";d["background-size"]="background-size: "+p+";",delete d["background-repeat"]}else r[u]&&(d["background-repeat"]="background-repeat:"+r[u]+";",delete d["background-size"]);void 0!=c[u]&&c[u]?d["background-position"]="background-position:"+c[u]+";":1!=t&&delete d["background-position"]}else""!=s[u].url&&(void 0!=s[u].url||void 0===l[u]&&void 0===r[u]&&void 0===c[u])||(d["background-image"]="background-image:none;");else if(1!=t){var h=["background-image","background-size","background-repeat","background-position"];deleteAttributeCSS(u,h)}}else deleteAttributeCSS(u,a),renderBackgroundOverlay(u,"")}else deleteAttributeCSS(selector,a),renderBackgroundOverlay(selector,"")}function deleteAttributeCSS(e,t){var i=renderedStyle.styles[e];void 0!==i&&jQuery(t).each(function(e,t){delete i[t]})}function deleteAllScreenAttributeCSS(e){for(var t in renderedStyle)deleteAttributeCSS(t,e)}switch(brand){case"font":acRenderFontStyle(data,firstCall);break;case"background":acRenderBackgroundStyle(data,firstCall);break;case"margin":acRenderMarginStyle(data,firstCall);break;case"padding":acRenderPaddingStyle(data,firstCall);break;case"border":acRenderBorderStyle(data,firstCall);break;case"transform":acRenderTransformStyle(data,firstCall);break;case"shadow":acRenderShadowStyle(data,firstCall);break;case"sizePosition":acRenderLayoutStyle(data,firstCall)}}function acSetDataStyle(renderedStyle,selector,value,settings,flagInlineCSS){function getEnableAllFields(e){var t;switch(e){case"font":t=["family","weight","size","align","lineHeight","letterSpacing","font-color","font-style","text-decoration"];break;case"background":t=["background-color","background-image","background-size","background-repeat","background-position"];break;case"margin":t=["margin-top","margin-left","margin-right","margin-bottom"];break;case"padding":t=["padding-top","padding-left","padding-right","padding-bottom"];break;case"border":t=["border-top","border-left","border-right","border-bottom","topLeftRadius","bottomRightRadius","topRightRadius","bottomRightRadius","-moz-topLeftRadius","-moz-bottomRightRadius","-moz-topRightRadius","-moz-bottomRightRadius","-webkit-topLeftRadius","-webkit-bottomRightRadius","-webkit-topRightRadius","-webkit-bottomRightRadius"];break;case"transform":t=["transform","-moz-transform","-webkit-transform","perspective","-moz-perspective","-webkit-perspective"];break;case"shadow":t=["box-shadow","text-shadow"];break;case"sizePosition":t=["width","height","position","zIndex","top","left","right","bottom"]}return t}function getInlineChangeCSS(e,t,i,n,a){var o=[n,i+"-"+n,"-moz-"+n,"-webkit-"+n],s="";return"enable"!==n&&"enableRadius"!==n?"background"==i?"file"==n?o.push("background-image"):"repeat"==n&&o.push("background-size"):"transform"==i&&"perspective"!==n?o=_.union(o,["transform","-moz-transform","-webkit-transform"]):"shadow"==i?"text"==a?o.push("text-shadow"):o.push("box-shadow"):"font"==i&&"styles"==n&&(o=_.union(o,["font-style","text-decoration"])):o=getEnableAllFields(i),jQuery(o).each(function(i,n){void 0!==e.styles[t]&&e[t][n]&&(s+=e.styles[t][n])}),s}acChangeNewRenderedStyle(renderedStyle);var selector_array=selector.split("."),selector_length=selector_array.length,part=selector_array[0],status=selector_array[2],brand=selector_array[3],screen=selector_array[selector_length-1],field=selector_array[selector_length-2],field_parent=selector_array[selector_length-3],data={};-1===jQuery.inArray(screen,["xl","lg","md","sm","xs"])&&(screen="xl");var selectorRender=part+"."+status+"."+screen;if(Object.keys(settings).length&&eval("settings."+part+".style !== undefined && settings."+part+".style."+status+" !== undefined")?(data=eval("settings."+part+".style."+status+"."+brand),void 0==data&&(data={}),data.isDeleted=!1):(data.isDeleted=!0,data.deleteSelector=selectorRender),acRenderStyleData(renderedStyle,selectorRender,brand,data,settings,!1),delete data.isDeleted,flagInlineCSS)return getInlineChangeCSS(renderedStyle,selectorRender,brand,field,field_parent)}function acSetDynamicDataStyle(e,t,i,n){acChangeNewRenderedStyle(e);var a=t.split("."),o=a.length;if(o>3){t=a[0]+"."+a[2]+"."+a[o-1]}else 2==o&&(t+=".xl");void 0===e.styles[t]&&(e.styles[t]={}),e.styles[t][i]&&""==n?delete e.styles[t][i]:e.styles[t][i]=n}function acSetDynamicPartStyle(e,t,i){acChangeNewRenderedStyle(e),void 0==e.styles[t]?i&&"object"==jQuery.type(i)?e.styles[t]=i:e.styles[t]={}:i&&"object"==jQuery.type(i)&&(e.styles[t]=jQuery.extend(!0,{},e[t],i))}function acGetStringStyle(e,t,i){var n="",a=function(a){var o=e.styles[a],s=void 0;if(s=_.toArray(o),s.length&&!jQuery.isEmptyObject(i)){var l,r=s.length?jQuery.trim(s.join(" ")):"",c=a.substring(0,1),d="."==c||"#"==c,u=a.split("."),p=[],h=a.indexOf("|")>-1,m="",g=".js-content-object.js-el-"+t,f=void 0,y=void 0;if("menu"==e.option.machineName&&(g=1==e.option.level?".js-content-object  ul.awemenu "+g:".js-content-object .awemenu-item "+g),h&&(u=a.split("|")),u.length>=3){if(h)f=u[0],m=u[1],u=u[2].split("."),l=u[0],y=u[1];else if(d){var v=u.length;y=u[v-1],l=u[v-2],f=3==v?u[0]:"."+u[1]}else f=u[0],l=u[1],y=u[2];var w=d?{}:i[f];if(d)p.push(g+" "+f+m);else if(void 0!==w&&void 0!==w.selector&&w.selector){var b="array"===jQuery.type(w.selector)?w.selector:w.selector.split(",");jQuery.each(b,function(e,t){p.push(g+" "+t.trim()+m)})}else"main"===f?p.push(""+g+m):p.push(g+" .not-child-selector");"normal"!==l&&jQuery.each(p,function(e,t){if(t.indexOf(":")>-1){var i=t.indexOf(":");p[e]=t.substr(0,i)+".ac-"+l+t.substr(i)+", "+t.substr(0,i)+"."+l+t.substr(i)+", "+t.substr(0,i)+":"+l+t.substr(i)}else p[e]=t+".ac-"+l+", "+t+":"+l});var j=p.join(", ");if(r)switch(y){case"lg":n+="@media(max-width:1199px){"+j+"{"+r+"}} ";break;case"md":n+="@media(max-width:991px){"+j+"{"+r+"}} ";break;case"sm":n+="@media(max-width:767px){"+j+"{"+r+"}} ";break;case"xs":n+="@media(max-width:575px){"+j+"{"+r+"}} ";break;default:n+=j+"{"+r+"} "}}}};for(var o in e.styles)a(o);return n}AweBuilder.acRenderModelStyle=acRenderModelStyle,AweBuilder.acRenderStyleData=acRenderStyleData,AweBuilder.acSetDataStyle=acSetDataStyle,AweBuilder.acSetDynamicDataStyle=acSetDynamicDataStyle,AweBuilder.acSetDynamicPartStyle=acSetDynamicPartStyle,AweBuilder.acGetStringStyle=acGetStringStyle}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){function acRenderModelAnimation(e){var t={},i={};if(void 0!==e&&(t=e instanceof AweBuilder.ContentObject?e.get("settings"):"string"==typeof e?AweBuilder.parseJSON(e):e),Object.keys(t).length)for(var n in t)void 0!==t[n].animation&&acRenderAnimationData(i,n,t[n].animation,t,!0);return i}function acRenderAnimationData(e,t,i,n,a){function o(e){var i={};if(void 0!=e)if("object"!=typeof e||jQuery.isArray(e)||void 0==e.xl&&void 0==e.lg&&void 0==e.md&&void 0==e.sm&&void 0==e.xs)i[t+".xl"]=e;else for(var n in e)i[t+"."+n]=e[n];return i}function s(t){return void 0==e[t]&&(e[t]={}),e[t]}var l,r=o(i.enable),c=o(i.animation),d=o(i.advance),u=o(i.linear),p=o(i.cubic),h=o(i.duration),m=o(i.delay);if(Object.keys(r).length)for(var g in r){var f={};l=s(g),l.enable=r[g],l.defaultClass="animated",void 0!==r[g]&&(l.prevClass=l.class,void 0!=c[g]?l.class=c[g]:l.class="fadeIn",void 0!=d[g]&&d[g]?(void 0!=u[g]&&u[g]&&("cubic-bezier"==u[g]&&void 0!=p[g]&&p[g]?f["animation-timing-function"]="cubic-bezier("+p[g]+")":f["animation-timing-function"]=u[g]),void 0!=h[g]&&h[g]&&(f["animation-duration"]=h[g]),void 0!=m[g]&&m[g]&&(f["animation-delay"]=m[g])):f={"animation-timing-function":"ease","animation-duration":"300ms","animation-delay":""}),l.style=f}else void 0!==i.currentSelector&&(l=s(i.currentSelector),l.enable=!1)}function acSetDataAnimation(renderedAnimation,selector,value,settings){var selector_array=selector.split("."),part=selector_array[0],screen=selector_array[selector_array.length-1],newSelector=part+"."+screen,data={};Object.keys(settings).length&&void 0==(data=eval("settings."+part+".animation"))&&(data={}),data.currentSelector=newSelector,acRenderAnimationData(renderedAnimation,part,data,settings,!1)}AweBuilder.acRenderModelAnimation=acRenderModelAnimation,AweBuilder.acRenderAnimationData=acRenderAnimationData,AweBuilder.acSetDataAnimation=acSetDataAnimation}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.init=function(){this.openedTabs=[]},t.prototype.getResponsiveMode=function(){return this.responsiveMode},t.prototype.setResponsiveMode=function(e){this.responsiveMode=e,this.updateResponsiveModeChange()},t.prototype.updateResponsiveModeChange=function(){this.view.$el.is(":visible")&&this.view.updateTab()},t.prototype.activate=function(){this.view.activateTab()},t.prototype.setActiveModel=function(e){this.activeModel=e,this.updateResponsiveModeChange(),this.view.updateHeaderDisplay(void 0!==e)},t.prototype.getActiveModel=function(){return this.activeModel},t.prototype.processBackBtnClicked=function(){if(this.openedTabs.length){var e=this.openedTabs.shift();e.getView().hideTab(),e.getView().changeHeader()}0===this.openedTabs.length&&this.navigatorPanel&&this.navigatorPanel.getView().hideBackBtn()},t.prototype.closeAllOpenTabs=function(){for(;this.openedTabs.length>0;)this.processBackBtnClicked()},t.prototype.createView=function(){this.view=new i({model:this})},t.prototype.getNavigatorPanel=function(){return this.navigatorPanel},t.prototype.setNavigatorPanel=function(e){this.navigatorPanel=e},t}(e.Tab);e.NavTab=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.activateTab=function(){},t.prototype.updateTab=function(){this.activateTab()},t.prototype.updateHeaderDisplay=function(e){e?this.$header.removeClass("ac_disable"):this.$header.addClass("ac_disable")},t}(e.TabView);e.NavTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(e){if(void 0===e||void 0===e.content)throw Error("Data of navigator content must be is AweContentObject.Collection");t.call(this,e)}return __extends(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.set("title","Navigator"),this.set("headerHTML",'<i class="acicon acicon-bar"></i>'),this.set("activeModel",null)},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.setActiveModel=function(e){var i=this.getActiveModel();i&&e&&e.cid!==i.cid&&(i&&i.deactivate(),t.prototype.setActiveModel.call(this,e))},n.prototype.updateResponsiveModeChange=function(){t.prototype.updateResponsiveModeChange.call(this);var i=this.get("content"),n=this.getResponsiveMode();i instanceof e.ContentObjects?i.each(function(e,t){e.setResponsiveMode(n)}):i.setResponsiveMode(n)},n}(e.NavTab);e.NavigatorTab=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.listenTo(this.model,"change",this.applyChange),e.prototype.initialize.call(this)},t.prototype.renderTabContent=function(){var e=this,t=this.model.get("content");this.$el.append(t.getNavigatorView().$el),this.$el.click(function(t){if(0===jQuery(t.target).closest(".js-nav-item").length){var i=e.model.getNavigatorPanel();i&&i.setActiveModel(void 0)}})},t.prototype.applyChange=function(){var e=this,t=this.model.changedAttributes();jQuery.map(t,function(t,i){switch(i){case"content":var n=e.model.get("content");e.$el.empty().append(n.getNavigatorView().$el)}})},t.prototype.updateHeaderDisplay=function(){},t}(e.NavTabView)}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var StyleItemTab=function(_super){function StyleItemTab(e,t){_super.call(this,t),this.mediaPanel=e}return __extends(StyleItemTab,_super),StyleItemTab.prototype.init=function(){this.selectedPart="main",this.selectedState="normal"},StyleItemTab.prototype.createView=function(){this.view=new StyleItemTabView({model:this})},StyleItemTab.prototype.setResponsiveMode=function(e){this.responsiveMode=e,this.updateSelector()},StyleItemTab.prototype.getResponsiveMode=function(){return this.responsiveMode},StyleItemTab.prototype.getActiveModel=function(){return this.activeModel},StyleItemTab.prototype.setValues=function(e,t,i,n,a){if(this.activeModel=e,this.selectedPart=t,this.responsiveMode=i,this.selectedState=n,this.updateSelector(),void 0===a){var o=this.view;o.changeHeader(),o.$el.hasClass("awe-tab-active")&&o.updateSettingsForm()}else this.view[a]()},StyleItemTab.prototype.getSelectedPart=function(){return this.selectedPart},StyleItemTab.prototype.getSelectedState=function(){return this.selectedState},StyleItemTab.prototype.updateSelector=function(){this.selector=this.selectedPart+".style."+this.selectedState+"."+this.get("styleType")},StyleItemTab.prototype.getStyle=function(e,t){if(this.activeModel)return void 0===e&&(e=this.selector),this.activeModel.getSettingsAttr(e)},StyleItemTab.prototype.getStyleForm=function(){if(this.activeModel){var machineName=this.activeModel.getMachineName(),selectors=this.selector.split("."),part=selectors.shift(),styleForm=window.AweBuilderSettings.styleForms[machineName+"-"+part];if(void 0!==styleForm){selectors.shift();var formElements=void 0;try{formElements=eval("styleForm."+selectors.join("."))}catch(e){formElements=void 0}return formElements}}},StyleItemTab.prototype.getSelector=function(){return this.selector},StyleItemTab}(AweBuilder.Tab);AweBuilder.StyleItemTab=StyleItemTab;var StyleItemTabView=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.headerTemplate=_.template('\n                <li class="js-disable" data-cid="<%= id %>">\n                    <a class="js-item-style" href="#tab-<%= id %>">\n                        <div class="js-style-item ac_style-item">\n                            <span class="title">'+this.translate("<%= title %>")+'</span>\n                            <span class="js-header-style ac_style-item__content"></span>\n                        </div>\n                    </a>\n                </li>')},t.prototype.renderHeader=function(){var e=this.model.get("headerHTML"),t={id:this.model.cid,title:this.model.get("title"),header:void 0!==e?e:""};return this.$header=jQuery(this.headerTemplate(t)),this.$header},t.prototype.renderTabContent=function(){this.$el.addClass("tab-panel"),this.$el.append('<div class="js-row-content pd15"></div>');var e=this.model.get("content"),t=this.model.get("styleType");this.settingsForm=new AweBuilder.AweForm(e,"style."+t,{mediaPanel:this.model.mediaPanel}),this.$el.find(".js-row-content").append(this.settingsForm.$el)},t.prototype.changeHeader=function(){var e=this.model,t=e.getStyleForm(),i="";if(jQuery(".js-style-item",this.$header).removeClass("value-change"),this.$header.addClass("ac_disable"),void 0!==t){var n=e.getResponsiveMode(),a=this.model.get("renderHeader");if(!1!==t.devices||!1===t.devices&&n===AweBuilder.RES_XL){if(this.$header.removeClass("ac_disable"),"function"!==jQuery.type(a))throw Error("Header callback must be function.");this.updateSettingsForm();var o=this.settingsForm.getFormValues(),s=a(o);i=s.text,s.changed&&jQuery(".js-style-item",this.$header).addClass("value-change")}}jQuery(".js-header-style",this.$header).html(i)},t.prototype.tabChanged=function(e){var t=!1,i=this.model,n=i.getActiveModel(),a=n.getMachineName(),o=AweBuilder.ContentObject.generateObjectSettings(a),s=n.getSettingsAttr(i.getSelector(),o),l=i.getResponsiveMode();if("object"==typeof e&&void 0!==l)for(var r=Object.keys(e),c=0;c<r.length;c++){var d=s[r[c]][l],u=e[r[c]];if(void 0===d&&void 0!==u||void 0!==d&&void 0!==u[l]){t=!0;break}}return t},t.prototype.updateSettingsForm=function(){var e=this.model,t=e.getActiveModel(),i=this;if(t){var n=e.getSelectedPart(),a=e.getSelectedState(),o=e.getResponsiveMode(),s=n+".style."+a+"."+this.model.get("styleType");if(this.settingsForm.update(t,o,a,s),"font"==this.model.get("styleType")){var l=t.getSettingsAttr(s);if(l&&l.enable&&l.enable[o]){l.family&&l.family[o]&&jQuery(".el-family ul.option-list li[data-val='"+l.family[o]+"']",this.settingsForm.$el).trigger("click"),l.weight&&l.weight[o]&&jQuery(".el-weight ul.option-list li[data-val='"+l.weight[o]+"']",this.settingsForm.$el).trigger("click");var r=i.settingsForm.$el.closest(".awe-tabs").find("> .js-part-status .el-part .option-list");setTimeout(function(){r.hasClass("js-active")&&r.removeClass("js-active").hide()},50)}else jQuery(".el-weight ul.option-list",this.settingsForm.$el).empty(),jQuery(".el-weight span.val > span",this.settingsForm.$el).text("Normal")}}},t.prototype.hideTab=function(){jQuery("a",this.$header).trigger("click")},t}(AweBuilder.TabView);AweBuilder.StyleItemTabView=StyleItemTabView}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(e,i){t.call(this,i),this.mediaPanel=e,t.prototype.initialize.call(this)}return __extends(n,t),n.prototype.initialize=function(){},n.prototype.init=function(){var i=this,n=new e.TabCollection;t.prototype.init.call(this),this.set("title","Style"),this.set("headerHTML",'<i class="acicon acicon-style"></i>'),this.set("activeModel",null);var a=jQuery.extend(!0,{},e.STYLE_ELEMENTS);jQuery.map(a,function(t,a){var o=jQuery.extend(!0,{},t);o.content=o.elements,o.styleType=a,n.add(new e.StyleItemTab(i.mediaPanel,o))});var o={plugin:{event:"click",active:!1,collapsible:!0,activate:function(e,t){var a=t.newTab?n.get(t.newTab.attr("data-cid")):null;a&&(i.openedTabs.unshift(a),i.navigatorPanel.getView().showBackBtn(),a.getView().updateSettingsForm())},deactivate:function(e){}},view:{hasWrapper:!1,initScrollBar:!1,contentWrapperClasses:"ac_tab--style2",navigatorClasses:"js-tab-style-list ac_tab-nav"}};this.set("content",new e.Tabs({content:n,settings:o,title:"Tab content style"}))},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.setActiveModel=function(e){this.prevModel=this.getActiveModel(),t.prototype.setActiveModel.call(this,e),this.view.updateModelStateView(),this.view.updateStatusController(e),this.closeAllOpenTabs()},n.prototype.getPrevModel=function(){return this.prevModel},n.prototype.updateResponsiveModeChange=function(e){var i=this.get("content").get("content"),n=e||this.getResponsiveMode();i.each(function(e,t){e.setResponsiveMode(n)}),t.prototype.updateResponsiveModeChange.call(this)},n}(e.NavTab);e.NavStyleTab=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.selectedPart="main",this.selectedState="normal",this.topContentTemplate=_.template('\n                <div class="js-part-status ac_panel__styles pd15 pb0">\n                    <div class="js-ac-row ac_row">\n                        <div class="ac_1-col js_select-list-item js-disable"></div>\n                        <div class="ac_1-col">\n                            <ul class="js-disable js-links-status links-states">\n                            <span class="js-status-normal active" data-value="normal"><%= normalText %></span>\n                            <span  class="js-status-hover" data-value="hover"><%= hoverText %></span>\n                            <span  class="js-status-active" data-value="active"><%= activeText %></span>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            '),t.prototype.initialize.call(this)},i.prototype.events=function(){return{"click > .js-ac-tabs .js-part-status .js-links-status span":"changeStyleState"}},i.prototype.renderTabContent=function(){var t=this.model.get("content");if(t instanceof e.Abstract){var i=t.getView().$el;this.$el.append(i);var n=this,a=this.topContentTemplate({normalText:this.translate("Normal"),hoverText:this.translate("Hover"),activeText:this.translate("Active")});jQuery("> ul",i).before(a);var o={type:"select",$el:jQuery(".js_select-list-item",this.$el),options:{main:this.translate("Main")},title:this.translate("Part"),defaultValue:"main",selector:"style.part",inlineTitle:!0,change:function(){n.changePart()}};this.partController=new e.AweSelect(o,void 0)}},i.prototype.changeStyleState=function(e){if(!jQuery(e.target).hasClass("ac_disable")){var t=jQuery(e.target);this.selectedState=t.attr("data-value"),t.parent().find(".active").removeClass("active"),t.addClass("active"),this.updateStyleItemTabs()}},i.prototype.changePart=function(){var e=this.model.getActiveModel(),t=this.selectedPart;this.selectedPart=this.partController.getValue(),this.updateStatusController(e),this.updateStyleItemTabs();var i=e?window.AweBuilderSettings.elements[e.getMachineName()]:void 0;i&&"function"==typeof i.changePart&&i.changePart(this.selectedPart,t,this.$el,e.getView().$el)},i.prototype.resetTabContent=function(){this.selectedPart="main",this.partController.setValue(this.selectedPart),this.selectedState="normal",jQuery(".js-links-status > span.active",this.$el).removeClass("active"),jQuery("span.js-status-"+this.selectedState,this.$el).addClass("active")},i.prototype.activateTab=function(){t.prototype.activateTab.call(this);var e=this.model.getActiveModel();e.getDefaultStyle(),!e||void 0!==this.activeModel&&this.activeModel.cid===e.cid||(this.activeModel=e,this.updateStatusController(e),this.updatePartController(e))},i.prototype.updatePartController=function(t){var i={main:this.translate("Main")};if(this.selectedPart="main",jQuery(".js_select-list-item",this.$el).addClass("ac_disable"),t){var n=t.getMachineName(),a=e.ContentObject.generateObjectSettings(n),o=Object.keys(a);if(o.length>1){jQuery(".js_select-list-item",this.$el).removeClass("ac_disable");var s=this;jQuery.each(o,function(e,t){"main"!==t&&(i[t]=a[t].title?s.translate(a[t].title):s.translate(t))})}var l=t.getMachineName(),r=window.AweBuilderSettings.elements[l];r&&void 0!==r.defaultPart&&void 0!==i[r.defaultPart]&&(this.selectedPart=r.defaultPart),"menubox"===l&&t.get("defaultPart")&&(this.selectedPart=t.get("defaultPart"))}this.partController.setOptions(i),this.partController.setValue(this.selectedPart)},i.prototype.updateStatusController=function(t){if(jQuery(".js-links-status > span.active",this.$el).removeClass("active"),jQuery(".js-links-status",this.$el).addClass("ac_disable"),t){var i=this,n=t.getMachineName(),a=e.ContentObject.generateObjectSettings(n),o=this.selectedPart+".style",s=t.getSettingsAttr(o,a);if(void 0!==s){jQuery(".js-links-status",this.$el).removeClass("ac_disable"),jQuery(".js-links-status > span",this.$el).addClass("ac_disable");var l=s?Object.keys(s):[];jQuery.each(l,function(e,t){var n=jQuery(".js-links-status > span.js-status-"+t,i.$el);n.removeClass("ac_disable"),0===e&&(n.addClass("active"),i.selectedState="normal")})}}},i.prototype.updateHeaderStyleItemTab=function(e){var t,i=this.model.get("content"),n=i.get("content");if(n&&n instanceof Backbone.Collection)for(var a=0;a<n.length;a++)t=n.at(a).getView(),t.resetStyle({activeModel:e})},i.prototype.updateModelStateView=function(){var e=this.model.getActiveModel(),t=e?e.getView().$el:null;t&&t.removeClass("ac_normal ac_hover ac_active").addClass("ac_"+this.selectedState);var i=this.model.getPrevModel(),n=i?i.getView().$el:null;n&&n.removeClass("ac_normal ac_hover ac_active")},i.prototype.updateStyleItemTabs=function(){var e=this,t=this.model.getActiveModel(),i=this.model.getResponsiveMode(),n=this.model.get("content").get("content");this.updateModelStateView(),n.each(function(n,a){n.setValues(t,e.selectedPart,i,e.selectedState)})},i.prototype.updateTab=function(){this.updateStyleItemTabs()},i}(e.NavTabView)}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){var t={title:"Animation",headerHTML:'<i class="acicon acicon-animation"></i>'};e.call(this,t)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t.prototype.setResponsiveMode=function(t){return e.prototype.setResponsiveMode.call(this,t)},t}(e.NavTab);e.AnimationTab=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.renderTabContent=function(){var t=this;this.partController=new e.AweSelect({type:"select",options:{main:this.translate("Main")},title:this.translate("Part"),defaultValue:"main",selector:"style.part",inlineTitle:!0,change:function(){var e=t.partController.getValue(),i=t.model.getActiveModel(),n=i?i.getMachineName():"",a=window.AweBuilderSettings.elements[n],o=t.selectedPart;t.selectedPart=e,t.updateForm(),a&&"function"==typeof a.changePart&&a.changePart(e,o,t.form.$el,i.getView().$el)}}),this.form=new e.AweForm(e.ANIMATION_ELEMENTS,"main.animation",{className:"pd15"}),this.form.$wrapper.prepend(this.partController.$el),this.$el.append(this.form.$el)},i.prototype.activateTab=function(){t.prototype.activateTab.call(this);var e=this.model.getActiveModel();if(e){this.activeModel=e,this.updatePartController();var i=this.model.getResponsiveMode();this.form.update(e,i,void 0,this.selectedPart+".animation")}},i.prototype.updatePartController=function(){var e=this.activeModel,t=this.partController.$el,i={main:this.translate("Main")};if(this.selectedPart="main",t.addClass("ac_disable"),e){var n=e.get("settings"),a=Object.keys(n);if(a.length>1){t.removeClass("ac_disable");var o=this;jQuery.each(a,function(e,t){"main"!==t&&(i[t]=n[t].title?o.translate(n[t].title):o.translate(t))})}}this.partController.setOptions(i),this.partController.setValue(this.selectedPart)},i.prototype.updateForm=function(){var e=this.model.getActiveModel();this.form.update(e,this.model.getResponsiveMode(),void 0,this.selectedPart+".animation")},i}(e.NavTabView);e.AnimationTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(t){var i={title:"Settings",headerHTML:'<i class="acicon acicon-setting"></i>'};e.call(this,i),this.mediaPanel=t,e.prototype.initialize.call(this)}return __extends(t,e),t.prototype.initialize=function(){},t.prototype.createView=function(){this.view=new i({model:this})},t.prototype.getMediaPanel=function(){return this.mediaPanel},t}(e.NavTab);e.NavSettingsTab=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.settingsForms={},this.selectedPart="main";var i=this,n={type:"select",options:{main:this.translate("Main")},title:this.translate("Part"),defaultValue:"main",selector:"settings.part",inlineTitle:!0,change:function(e,t,n,a){i.activeForm&&i.activeForm.$el.hide();var o=i.partController.getValue(),s=i.model.getActiveModel(),l=s.getMachineName(),r=l+"-"+o,c=window.AweBuilderSettings.elements[l],d=i.selectedPart;i.selectedPart=o,i.activeForm=i.settingsForms[r],i.activeForm.$wrapper.prepend(i.partController.$el),i.activeForm.$el.show(),i.updateForm(),c&&"function"==typeof c.changePart&&c.changePart(o,d,i.activeForm.$el,s.getView().$el)}};this.partController=new e.AweSelect(n),t.prototype.initialize.call(this)},i.prototype.activateTab=function(){var e=this.model.getActiveModel(),i=this.model.getResponsiveMode();if(e&&(void 0===this.activeModel||this.activeModel.cid!==e.cid)){this.activeModel=e,this.activeForm&&this.activeForm.$el.hide();var n=e.getMachineName(),a=this.getActiveModelParts(),o=n+"-"+a[0];if(this.activeForm=this.settingsForms[o],void 0===this.activeForm){var s=this,l=this.model.getMediaPanel(),r=window.AweBuilderSettings.settingForms[n];jQuery.each(a,function(e,t){var i=n+"-"+t,a=r[t];a.setMediaPanel(l),s.settingsForms[i]=a,s.$el.append(a.$el.hide())}),this.activeForm=this.settingsForms[n+"-"+a.shift()]}this.activeForm.update(e,i),this.activeForm.$el.show(),this.updatePartController(),this.activeForm.$wrapper.prepend(this.partController.$el)}t.prototype.activateTab.call(this)},i.prototype.updatePartController=function(){var t=this.model.getActiveModel(),i={};if(this.partController.$el.addClass("ac_disable"),t){var n=t.getMachineName(),a=e.ContentObject.generateObjectSettings(n),o=this.getActiveModelParts();o.length>1&&this.partController.$el.removeClass("ac_disable");var s=this;jQuery.each(o,function(e,t){"main"===t?i.main=s.translate("Main"):i[t]=a[t].title?s.translate(a[t].title):s.translate(t)});var l=t.getMachineName(),r=window.AweBuilderSettings.elements[l];r&&void 0!==r.defaultPart&&void 0!==i[r.defaultPart]?this.selectedPart=r.defaultPart:this.selectedPart=o[0],"menubox"===l&&t.get("defaultPart")&&(this.selectedPart=t.get("defaultPart"))}this.partController.setOptions(i),this.partController.setValue(this.selectedPart)},i.prototype.getActiveModelParts=function(){var t=this.model.getActiveModel(),i=[];if(t){var n=t.getMachineName(),a=e.ContentObject.generateObjectSettings(n),o=window.AweBuilderSettings.settingForms[n];jQuery.each(Object.keys(a),function(e,t){void 0!==o[t]&&i.push(t)})}return i},i.prototype.updateForm=function(){var e=this.model.getActiveModel(),t=e?e.getResponsiveMode():"",i=this.selectedPart;this.activeForm&&this.activeForm.update(e,t,void 0,i+".settings")},i}(e.NavTabView);e.NavSettingsTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){var t={title:"CSS",headerHTML:'<i class="acicon acicon-css"></i>'};e.call(this,t)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t}(e.NavTab);e.CssTab=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.renderTabContent=function(){var t=this,i={id:{type:"input",title:"ID",inlineTitle:!0,devices:!1,defaultValue:"",change:function(e,i,n){t.updateActiveModel(n.current,"id")}},classes:{type:"input",title:"Classes",devices:!1,inlineTitle:!0,defaultValue:"",change:function(e,i,n){t.updateActiveModel(n.current,"classes")}},css:{type:"textarea",title:"Custom CSS",devices:!1,size:"large",defaultValue:"",change:function(e,i,n){t.updateActiveModel(n.current,"css")}}};this.form=new e.AweForm(i,"css",{className:"pd15"}),this.$el.append(this.form.$el)},i.prototype.activateTab=function(){t.prototype.activateTab.call(this);var e=this.model.getActiveModel();e?(this.form.$el.removeClass("ac_disable"),this.form.setFormValues(e.get("customStyles"))):this.form.$el.addClass("ac_disable")},i.prototype.updateActiveModel=function(e,t){var i=this.model.getActiveModel(),n=i.get("customStyles");n[t]=e,i.set("customStyles",n)},i}(e.NavTabView);e.CssTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(i,n){var a={enableBackBtn:!0,position:"left",hideDefault:!0};t.call(this,{title:"Navigator",content:"",settings:a});var o=this,s=new e.NavigatorTab({content:i}),l=new e.NavStyleTab(n),r=new e.NavSettingsTab(n),c=new e.AnimationTab,d=new e.CssTab,u=new e.Tabs({content:[s,r,l,c,d],title:"Tab content",settings:{plugin:{active:0,activate:function(t,i){o.activeTab=u.get("content").get(i.newTab.attr("data-cid")),o.set("title",o.activeTab.get("title")),o.activeTab instanceof e.NavTab&&o.activeTab.activate();var n=i.prevTab?u.get("content").get(i.prevTab.attr("data-cid")):null;n&&n.closeAllOpenTabs()}}}});this.navigatorTab=s,u.get("content").each(function(e){e.setNavigatorPanel(o),e.getView().updateHeaderDisplay(!1)}),this.set("content",u),this.mediaPanel=n,this.setResponsiveMode(e.RES_XL)}return __extends(n,t),n.prototype.setActiveModel=function(e){this.view;this.activeModel=e,this.get("content").get("content").each(function(t,i){t.setActiveModel(e)})},n.prototype.setActivateTab=function(e){"number"===jQuery.type(e)?this.activeTab=this.get("content").get("content").at(e):this.activeTab=e,this.getView().activateTab()},n.prototype.setResponsiveMode=function(e){e?this.responsiveMode=e:e=this.responsiveMode,this.get("content").get("content").each(function(t,i){t.setResponsiveMode(e)})},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.getActiveTab=function(e){return void 0!==e&&this.setActivateTab(e),this.activeTab},n.prototype.deleteActiveModel=function(e){this.activeModel&&e&&this.activeModel.cid===e.cid&&this.setActiveModel(void 0)},n.prototype.setElements=function(e){this.navigatorTab.set("content",e),this.setResponsiveMode(),this.setActiveModel(void 0),this.view.close()},n}(e.Panel);e.NavigatorPanel=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this);var t=this,i=this.model;this.$el.bind("activateModel",function(e,n){i.setActiveModel(n.model),n.showPanel&&(i.setActivateTab(1),t.open())}),this.listenTo(this.model,"change",this.renderChanges)},t.prototype.back=function(e){var t=this.model.getActiveTab();t&&t.processBackBtnClicked()},t.prototype.activateTab=function(e){var t=this.model.getActiveTab(e);if(t){jQuery(".js-ac-panel-header > h2",this.$el).html(t.get("title"));var i=t.getView().getHeader();jQuery("a",i).trigger("click")}},t.prototype.renderChanges=function(){var e=this,t=this.model.changedAttributes();jQuery.each(t,function(t,i){switch(i){case"content":e.render()}})},t}(e.PanelView);e.NavigatorPanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var ContentObject=function(_super){function ContentObject(options){if(void 0===options&&(options={}),void 0===options.settings){options.settings={};var defaultSettings=ContentObject.generateObjectSettings(options.machineName);jQuery.map(defaultSettings,function(e,t){options.settings[t]={selector:e.selector?e.selector:""}})}if("object"===jQuery.type(options.settings)&&(options.settings=JSON.stringify(options.settings)),options.content)if(void 0===options.contentType)options.contentType="object"===jQuery.type(options.content)?options.content.constructor.name:jQuery.type(options.content);else{var contentClass=eval("AweBuilder."+options.contentType);!contentClass||options.content instanceof contentClass||(options.content=new contentClass(options.content))}void 0===options.customStyles&&(options.customStyles=JSON.stringify({id:"",classes:"",css:""}));var styleOptions={};"menu"==options.machineName&&(styleOptions.machineName="menu",styleOptions.level=options.level),options.renderedStyle=AweBuilder.acRenderModelStyle(options.settings,styleOptions),options.renderedAnimation=AweBuilder.acRenderModelAnimation(options.settings),_super.call(this,options)}return __extends(ContentObject,_super),ContentObject.prototype.initialize=function(e){this.allowShowHideResponsive=!0,this.set("cid",this.cid),this.machineName=this.get("machineName"),_super.prototype.initialize.call(this,e),this.createNavigatorView()},ContentObject.prototype.createView=function(e){this.view=new ContentObjectView({model:this})},ContentObject.prototype.createNavigatorView=function(){this.navigatorView=new NavigatorView({model:this})},ContentObject.prototype.getNavigatorViewByIndent=function(e){return this.set("indent",e),this.navigatorView=new NavigatorView({model:this}),this.navigatorView},ContentObject.prototype.getNavigatorView=function(){return this.navigatorView},ContentObject.prototype.setMachineName=function(e){this.machineName=e},ContentObject.prototype.getMachineName=function(){return void 0===this.machineName?this.get("machineName"):this.machineName},ContentObject.prototype.setNavigatorPanel=function(e){this.navigatorPanel=e;var t=this.get("content");t instanceof ContentObjects&&t.setNavigatorPanel(e)},ContentObject.prototype.getNavigatorPanel=function(){return this.navigatorPanel},ContentObject.prototype.getBuilder=function(){return this.navigatorPanel?this.navigatorPanel.getBuilder():null},ContentObject.prototype.get=function(e){return"settings"===e||"customStyles"===e?this.parseJSON(_super.prototype.get.call(this,e)):_super.prototype.get.call(this,e)},ContentObject.prototype.set=function(e,t,i){return"settings"!==e&&"customStyles"!==e||"string"===jQuery.type(t)||(t=JSON.stringify(t)),_super.prototype.set.call(this,e,t,i)},ContentObject.prototype.setSettingsAttr=function(selector,value,opts){var settings=this.get("settings"),selectorValue=this.getSettingsAttr(selector);opts&&opts.delete?void 0!==selectorValue&&this.deleteSettingAttr(settings,selector):void 0!==selectorValue?eval("settings."+selector+" = value"):this.setValue(settings,selector.split("."),value),this.set("settings",settings,{selector:selector,value:value})},ContentObject.prototype.setValue=function(e,t,i){var n=t.shift();void 0===e[n]&&(e[n]={}),t.length>0?this.setValue(e[n],t,i):e[n]=i},ContentObject.prototype.getSettingsAttr=function(selector,settings){var output;void 0===settings&&(settings=this.get("settings"));try{eval("output = settings."+selector)}catch(e){output=void 0}return output},ContentObject.prototype.getValue=function(e,t){var i=t.shift();return void 0!==e[i]?t.length>0?this.getValue(e[i],t):e[i]:void 0},ContentObject.prototype.deleteSettingAttr=function(settings,selector){eval("delete settings."+selector);var selectorKeys=selector.split(".");if(selectorKeys.pop(),selectorKeys.length>0){var parentSelector=selectorKeys.join("."),parentSettings=eval("settings."+parentSelector);void 0!==parentSettings&&0!==Object.keys(parentSettings).length||this.deleteSettingAttr(settings,parentSelector)}},ContentObject.prototype.setIndent=function(e){this.indent=e,this.navigatorView&&this.navigatorView.updateIndent(e),this.view&&this.view.updateIndent(e)},ContentObject.prototype.getIndent=function(){return this.indent},ContentObject.prototype.setResponsiveMode=function(e){this.responsiveMode=e;var t=this.get("content");t&&t instanceof ContentObjects&&t.each(function(t,i){t.setResponsiveMode(e)}),this.navigatorView&&this.navigatorView.changeResponsiveDisplay()},ContentObject.prototype.getResponsiveMode=function(){return this.responsiveMode},ContentObject.prototype.getRootCollection=function(e){for(var t,i=this,n=e;n>0;n--){if(t=i.getCollection(),!t.getContainer()){i=void 0;break}i=t.getContainer()}return t},ContentObject.prototype.clone=function(){var e=this.get("content"),t=this.toJSON();return delete t.cid,e instanceof ContentObjects&&(t.content=e.clone()),new this.collection.model(t)},ContentObject.prototype.getType=function(){return"ContentObject"},ContentObject.prototype.setStorageValue=function(e,t,i){void 0===i&&(i="main"),this.setSettingsAttr(i+".settings."+e,t)},ContentObject.prototype.deactivate=function(){this.view.deactivate(),this.navigatorView.deactivate()},ContentObject.prototype.getDefaultStyle=function(){function e(e,t,i){switch(typeof i[e]){case"object":void 0!==i[e].xl&&void 0!==t&&(i[e].xl=t);break;case"undefined":break;default:i[e]=t}}function t(e,t){var i={horizontal:"0",vertical:"0",blur:"0",color:""};if("boxShadow"===e&&(i=jQuery.extend(i,{spread:0,inset:!1})),"none"!==t){var n=t.split(" ");void 0!==n[0]&&(i.horizontal=n[0]),void 0!==n[1]&&(i.vertical=n[1]),void 0!==n[2]&&(i.blur=n[2]),"boxShadow"===e?(void 0!==n[3]&&(i.spread=n[3]),void 0!==n[4]&&(i.color=n[4]),i.inset=void 0!==n[5]&&"inset"===n[5]):void 0!==n[3]&&(i.color=n[3])}return i}function i(i,n,a){var o={font:{family:"fontFamily",weight:"fontWeight",styles:["textDecoration","textTransform","fontStyle"],align:"textAlign",size:"fontSize",lineHeight:"lineHeight",letterSpacing:"letterSpacing",color:"color"},margin:{top:"marginTop",right:"marginRight",bottom:"marginBottom",left:"marginLeft"},padding:{top:"paddingTop",right:"paddingRight",bottom:"paddingBottom",left:"paddingLeft"},border:{top:"borderTop",right:"borderRight",bottom:"borderBottom",left:"borderLeft",topLeftRadius:"borderTopLeftRadius",topRightRadius:"borderTopRightRadius",bottomLeftRadius:"borderBottomLeftRadius",bottomRightRadius:"borderBottomRightRadius"},background:{color:"backgroundColor"},sizePosition:{width:"width",height:"height",minHeight:"minHeight",position:"position",top:"top",right:"right",bottom:"bottom",left:"left",zIndex:"zIndex"},shadow:{box:"boxShadow",text:"textShadow"},transform:{}};jQuery.map(n,function(s,l){var r;if(void 0!==o[i][l]){if("string"!=typeof o[i][l])"array"===jQuery.type(o[i][l])&&(r=[],jQuery.each(o[i][l],function(){void 0!==a[this]&&("textDecoration"==this&&-1!=a[this].indexOf("none")||r.push(a[this]))}));else if(void 0!==a[o[i][l]]){switch(o[i][l]){case"boxShadow":case"textShadow":r=t(o[i][l],a[o[i][l]]);break;case"lineHeight":case"letterSpacing":var c=parseInt(a[o[i][l]]);isNaN(c)||(r=a[o[i][l]]);break;default:r=a[o[i][l]]}"color"==l&&"rgba(0, 0, 0, 0)"==r&&(r="")}e(l,r,n)}})}var n=this.view,a=jQuery.extend(!0,{},ContentObject.generateObjectSettings(this.machineName));jQuery.map(a,function(e,t){var a=n.getDefaultStyle(e.selector);e.style&&void 0!==e.style.normal&&jQuery.map(e.style.normal,function(e,t){i(t,e,a)})}),window.AweBuilderSettings.cachedSettings[this.machineName]=JSON.stringify(a)},ContentObject.generateObjectSettings=function(machineName,data){function generateStyleElements(settings,styleElements,selector){var defaultElements=jQuery.extend(!0,{},AweBuilder.STYLE_ELEMENTS);if(void 0!==selector&&void 0===(defaultElements=eval("defaultElements."+selector+".elements")))throw Error("'"+selector+"' is not a element's style");if(void 0===styleElements){for(var tabName in defaultElements)defaultElements[tabName].type="group";styleElements={normal:jQuery.extend(!0,{},defaultElements)}}if(void 0!==settings){var enabledStyles_1=Object.keys(defaultElements);"object"==typeof settings.enabled&&(enabledStyles_1="object"===jQuery.type(settings.enabled)?Object.keys(settings.enabled):settings.enabled),jQuery.map(defaultElements,function(styleSettings,styleName){var styleSelector=selector?selector+".elements."+styleName:styleName,devicesSettings=settings.devices,statusSetting=settings.status;if(-1===jQuery.inArray(styleName,enabledStyles_1))eval("delete styleElements.normal."+styleSelector);else{if(settings.enabled&&"object"===jQuery.type(settings.enabled[styleName])&&jQuery.type(settings.enabled[styleName].devices)){var type=jQuery.type(settings.enabled[styleName].devices);switch(type){case"string":devicesSettings=settings.enabled[styleName].devices.split(",");break;case"array":case"boolean":devicesSettings=settings.enabled[styleName].devices}}if("array"!==jQuery.type(devicesSettings)&&!1!==devicesSettings||eval("styleElements.normal."+styleSelector+".devices = devicesSettings"),settings.enabled&&"object"===jQuery.type(settings.enabled[styleName])&&jQuery.type(settings.enabled[styleName].status)){var type=jQuery.type(settings.enabled[styleName].status);switch(type){case"string":statusSetting=settings.enabled[styleName].status.split(",");break;case"array":statusSetting=settings.enabled[styleName].status}}if("array"===jQuery.type(statusSetting)&&statusSetting.length&&jQuery.each(statusSetting,function(){void 0===styleElements[this]&&(styleElements[this]={});var state=selector?this+"."+selector:this;if(void 0===eval("styleElements."+state)){var defaultStyles=jQuery.extend(!0,{},styleElements.normal);eval("styleElements."+state+" = defaultStyles."+selector)}void 0!==devicesSettings&&selector&&eval("styleElements."+state+".devices = devicesSettings;")}),"object"==typeof defaultElements[styleName].elements){var subElSettings={};if(void 0!==statusSetting&&(subElSettings.status=statusSetting),void 0!==devicesSettings&&(subElSettings.devices=devicesSettings),"object"===jQuery.type(settings.enabled)&&void 0!==settings.enabled[styleName].enabled&&(subElSettings.enabled=settings.enabled[styleName].enabled),Object.keys(subElSettings).length){var subSelector=""+styleName;selector&&(subSelector=selector+".elements."+styleName),generateStyleElements(subElSettings,styleElements,subSelector)}}}})}return styleElements}function generateStyleSettings(e,t){var i={},n=generateStyleElements(e);return void 0===t&&(t="main"),window.AweBuilderSettings.styleForms[machineName+"-"+t]=n,jQuery.map(n,function(e,t){i[t]=generateSettings(e)}),i}function generateAnimationSettings(e){return generateSettings(jQuery.extend(!0,{},AweBuilder.ANIMATION_ELEMENTS,e))}function generateResponsiveSettings(e){return jQuery.extend(!0,{},AweBuilder.RESPONSIVE_SETTINGS,e)}function generateCustomSettings(e,t){return void 0===window.AweBuilderSettings.settingForms[machineName]&&(window.AweBuilderSettings.settingForms[machineName]={}),void 0===t&&(t="main"),e&&(window.AweBuilderSettings.settingForms[machineName][t]=new AweBuilder.AweForm(e,t+".settings",{className:"pd15"})),function e(t){t instanceof Object&&jQuery.map(t,function(t,i){t.alwaysSave=!0,void 0===t.devices&&(t.devices=!1),"object"===jQuery.type(t.elements)&&e(t.elements)})}(e),generateSettings(e)}function generateSettings(settingsElements){var output={};if(settingsElements instanceof Object)for(var property in settingsElements){var element=settingsElements[property],elementsMap=AweBuilder.AweForm.elementsMap,className=elementsMap[element.type];void 0!==className&&eval("AweBuilder."+className+".getDefaultValue(settingsElements[property], output, property)")}return output}function generatePartSettings(e,t){var i={};return!1!==e.style&&(i.style=generateStyleSettings(e.style,t)),!1!==e.animation&&(i.animation=generateAnimationSettings(e.animation)),!1!==e.settings&&(i.settings=generateCustomSettings(e.settings,t)),!1!==e.responsive&&(i.responsive=generateResponsiveSettings(e.responsive)),i}var output={};if(machineName)if(void 0===window.AweBuilderSettings.cachedSettings[machineName]){if("object"!=typeof data)throw Error("Data of element is declared invalid. You must use object to declare an element for AweBuilder.");void 0!==data.main?jQuery.map(data,function(e,t){if("string"==typeof t&&"object"==typeof e){var i=jQuery.extend(!0,{},e);output[t]=generatePartSettings(i,t),"main"===t?output[t].title="Main":(output[t].title=void 0!==e.title?e.title:t,"string"==typeof e.selector&&(output[t].selector=e.selector))}}):(output.main=generatePartSettings(data),output.main.title="Main"),window.AweBuilderSettings.cachedSettings[machineName]=JSON.stringify(output)}else output=AweBuilder.parseJSON(window.AweBuilderSettings.cachedSettings[machineName]);return output},ContentObject.type="ContentObject",ContentObject}(AweBuilder.Abstract);AweBuilder.ContentObject=ContentObject;var ContentObjectView=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getRenderControllersData=function(){return[{name:"move",title:this.model.get("title"),content:'<span class="js-ac-control-title">'+this.model.get("title")+"</span>"},{name:"edit",title:this.translate("Edit"),icon:"pen"},{name:"clone",title:this.translate("Clone"),icon:"clone"},{name:"delete",icon:"del",title:this.translate("Delete")}]},t.prototype.renderControllers=function(){var e=_.template('\n                 <div class="js-ac-control ac_control">\n                     <ul>\n                         <% _.each(controllers, function(controller) { %>\n                         <li class="<% if (controller.classes) { %><%= controller.classes %> <% } else { %>js-ac-control-<%= controller.name %> ac_control__<%= controller.name %><% } %>" title="'+this.translate("<%= controller.title %>")+'">\n                             <% if (controller.icon) { %>\n                              <i class="acicon acicon-<%= controller.icon %>"></i>\n                             <% } %>\n                             <% if (controller.content) { %>\n                             <%= controller.content %>\n                             <% } %>\n                         </li>\n                         <% }) %>\n                     </ul>\n                 </div>\n            ')({controllers:this.getRenderControllersData()});return jQuery(e)},t.prototype.initialize=function(){this.$wrapper=this.$el,this.listenTo(this.model,"change",this.listenModelChange),e.prototype.initialize.call(this)},t.prototype.render=function(){this.renderStyle(),this.renderAnimation(),this.$el.attr("data-indent",this.model.getIndent()).attr("data-cid",this.model.cid);var e=this.model.__proto__.constructor.type,t=this.$el.attr("class"),i=this.renderResponsiveClasses(),n=this.model.get("customStyles"),a=n.classes?" "+n.classes:"";this.$el.attr("class","js-content-object js-type-"+e+" js-el-"+this.model.cid+" "+t+" "+i+a),n.id&&this.$el.attr("id",n.id);var o=this.renderControllers();return this.$el.prepend(o),this.renderContent(),this.renderBackgroundOverlay(),this},t.prototype.renderBackgroundOverlay=function(){this.$el.prepend('<div class="ac_bg__overlay"></div>');var e=this.model.getMachineName(),t=window.AweBuilderSettings.elements[e];if(void 0!==t&&void 0!==t.data)var i=this,n=0,a=setInterval(function(){10==++n&&clearInterval(a);for(var e in t.data)if("main"!==e){var o=t.data[e];if(void 0!==o.selector){var s=jQuery(o.selector,i.$el);s.length&&(clearInterval(a),s.prepend('<div class="ac_bg__overlay"></div>'))}}},300)},t.prototype.renderContent=function(){var e=this.model.get("content");e&&e.getView&&this.$wrapper.append(e.getView().$el)},t.prototype.renderTitle=function(e){jQuery("> .js-ac-control .js-ac-control-move",this.$el).attr("title",e),jQuery("> .js-ac-control .js-ac-control-move > span",this.$el).text(e)},t.prototype.renderResponsiveClasses=function(e){void 0===e&&(e=this.model.get("settings"));var t=this.model.getMachineName(),i=ContentObject.generateObjectSettings(t),n=jQuery.extend(!0,{},i.main.responsive,e.main&&e.main.responsive?e.main.responsive:{}),a=[];return n.hidden&&jQuery.map(n.hidden,function(e,t){e&&a.push("ac_hidden-"+t)}),a.join(" ")},t.prototype.renderAnimation=function(e,t){var i=this.model.get("renderedAnimation"),n=this.$el;if(e){var a=e.split("."),o=this.model.get("settings"),s=a[0];a.length>2&&(e=s+"."+a[a.length-1]),"main"!==s&&(n=this.$el.find(o[s].selector))}else e="main.xl";if("string"==typeof i&&(i=AweBuilder.parseJSON(i)),void 0!==i&&void 0!==i[e]){var l=i[e];if(1==l.enable)n.css(l.style),n.removeClass(l.prevClass+" animated"),setTimeout(function(){n.addClass(l.class+" animated")},50);else{for(var r in l.style)n.css(r,"");n.removeClass(l.class+" animated")}}},t.prototype.renderStyle=function(e){var t=this.model.get("renderedStyle"),i=jQuery("<style></style>"),n=this.model.get("settings"),a=this;void 0!==e&&e&&this.$el.find("> style").remove();var o="";void 0!==t&&(o=AweBuilder.acGetStringStyle(t,a.model.cid,n));var s=this.model.get("customStyles");s.css&&(o+=s.css),i.html(o),this.$el.prepend(i)},t.prototype.events=function(){return{"mousedown > .js-ac-control > ul > .js-ac-control-move":"onMoveMousedown","click > .js-ac-control > ul > .js-ac-control-edit":"edit","click > .js-ac-control > ul > .js-ac-control-clone":"clone","click > .js-ac-control > ul > .js-ac-control-split":"split","click > .js-ac-control > ul > .js-ac-control-delete":"delete"}},t.prototype.onMoveMousedown=function(){var e=100*this.$el.width()/this.$el.parent().width();this.$el.attr("defWidth",e+"%"),jQuery("> .js-ac-control > ul > .js-ac-control-edit",this.$el).trigger("click")},t.prototype.edit=function(e){this.preventDefaultEvent(e);var t=this.model.getNavigatorView();jQuery("> .js-nav-item-header > .js-navigator-item-title",t.$el).trigger("mousedown",void 0!==e&&3!==e.isTrigger)},t.prototype.clone=function(e){this.preventDefaultEvent(e);var t=this.model.clone(),i=this.model.getCollection();if(void 0!==i){t.setNavigatorPanel(this.model.getNavigatorPanel()),t.setResponsiveMode(this.model.responsiveMode);var n=i.indexOf(this.model);i.add(t,{at:n+1})}},t.prototype.delete=function(e){if(this.preventDefaultEvent(e),!jQuery(e.target).hasClass("ac_disable")){var t=this.model.getCollection();void 0!==t&&(t.remove(this.model),this.onMoveMousedown(),this.model.getNavigatorPanel().deleteActiveModel(this.model))}},t.prototype.updateDeleteBtn=function(e){e?jQuery("> .js-ac-control li.js-ac-control-delete",this.$el).removeClass("ac_disable"):jQuery("> .js-ac-control li.js-ac-control-delete",this.$el).addClass("ac_disable")},t.prototype.listenModelChange=function(e,t){function i(i,a){switch(i){case"title":n.renderTitle(a);break;case"settings":var o=e.parseJSON(e.previous("settings"));n.renderSettingsChange(t.selector,t.value,o,t.inlineCss);break;case"customStyles":var s=AweBuilder.parseJSON(e.previous("customStyles")),l=AweBuilder.parseJSON(a);l.id?n.$el.attr("id",l.id):n.$el.removeAttr("id"),n.$el.removeClass(s.classes).addClass(l.classes),n.renderStyle(!0)}}var n=this;jQuery.map(e.changed,function(e,t){i(t,e)})},t.prototype.renderSettingsChange=function(e,t,i,n){if(void 0!==e){var a=e.split("."),o=this.model.get("settings"),s=this.model.getMachineName();switch(a[1]){case"responsive":var l=this.renderResponsiveClasses(i),r=this.renderResponsiveClasses();this.$el.removeClass(l).addClass(r);break;case"style":var c=AweBuilder.parseJSON(window.AweBuilderSettings.cachedSettings[s]),d=c[a[0]].selector,u=d?jQuery(d,this.$el):this.$el,p=this.model.get("renderedStyle"),h=AweBuilder.acSetDataStyle(p,e,t,o,n);if(this.model.set("renderedStyle",p),n){if(h){var m=/(.*).*:[\s]*([^;]*)/.exec(h);u.css(m[1],m[2].replace(" !important","")),console.log("render inline css after changing the style tab of machineName :"+s)}}else this.renderStyle(!0);break;case"animation":var g=this.model.get("renderedAnimation");"string"==typeof g&&(g=JSON.parse(g)),AweBuilder.acSetDataAnimation(g,e,t,o),this.model.set("renderedAnimation",g),this.renderAnimation(e,!0)}var f=this.getBuilder();f&&f.enableReloadAlert()}},t.prototype.updateIndent=function(e){this.$el.attr("data-indent",e)},t.prototype.deactivate=function(){this.$el.removeClass("js-active ac_highlight")},t.prototype.listenAddContent=function(e,t,i){},t.prototype.listenRemoveContent=function(e,t,i){"sort"!==i.action&&e.getView().$el.remove()},t.prototype.updateGridView=function(e){var t=this.getBuilder(),i=t?t.getSettings():void 0;i&&!i.showGrid&&(e?this._$(".js-ac-page-wrapper").addClass("ac_guides"):this._$(".js-ac-page-wrapper").removeClass("ac_guides"))},t.prototype.getBuilder=function(){var e=this.model.getNavigatorPanel();return e?e.getBuilder():void 0},t.prototype.getDefaultStyle=function(e){AweBuilder._jQuery("body").removeClass("ac_creating");var t,i=this.model.get("customStyles"),n=e?AweBuilder._jQuery(".js-el-"+this.model.cid+" "+e):AweBuilder._jQuery(".js-el-"+this.model.cid),a=n.attr("style");return n.removeAttr("style"),this.$el.removeClass("js-el-"+this.model.cid).removeClass("ac_highlight"),i&&i.classes&&n.removeClass(i.classes),t=n.length?JSON.parse(JSON.stringify(window.getComputedStyle(n[0]))):{},a&&n.attr("style",a),this.$el.addClass("js-el-"+this.model.cid).addClass("ac_highlight"),i&&i.classes&&n.addClass(i.classes),AweBuilder._jQuery("body").addClass("ac_creating"),t},t}(AweBuilder.AbstractView);AweBuilder.ContentObjectView=ContentObjectView;var NavigatorView=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.expanded=!1,this.sorting=!1,this.template=_.template('\n                <div class="js-nav-item-header ac_navigator-item-header">\n                    <a href="#" class="js-show-hide ac_show-hide<%= disabled %>" title="<%= actionTitle %>">\n                        <i class="js-show acicon acicon-show"></i>\n                    </a>\n                    <div class="js-navigator-item-title ac_navigator-item-title">\n                         <i class="js-collapsed-sub acicon acicon-triangle-down" style="visibility: hidden; opacity: 0;"></i>\n                         <span contenteditable="true"><%= title %></span>\n                    </div>\n                </div>\n            '),this.listenTo(this.model,"change:title",this.changeTitle),e.prototype.initialize.call(this)},t.prototype.events=function(){return{"mousedown > .js-nav-item-header > .js-navigator-item-title":"onTitleMouseDown","click > .js-nav-item-header > .js-show-hide":"hideViewInResponsiveMode","click > .js-nav-item-header > .js-navigator-item-title > .js-collapsed-sub":"onCollapsedClick",startSort:"onStartSort",stopSort:"onStopSort"}},t.prototype.render=function(){var e=this.translate(this.model.get("title")),t=this.model.get("content"),i=this.model.get("machineName");return this.$el.addClass("js-nav-item js-nav-item-"+i+" ac_navigator-item").attr("data-cid",this.model.cid),this.$el.append(this.template({title:e,actionTitle:this.translate("Show"),disabled:this.model.allowShowHideResponsive?"":" ac_disable"})),t&&(this.$el.append(t.getNavigatorView().$el),this.updateCollapsedDisplay(t.length)),this.initEditTitle(),this},t.prototype.updateCollapsedDisplay=function(e){0===e?jQuery("> .js-nav-item-header > .js-navigator-item-title > .js-collapsed-sub",this.$el).css({visibility:"hidden",opacity:0}):jQuery("> .js-nav-item-header > .js-navigator-item-title > .js-collapsed-sub",this.$el).css({visibility:"",opacity:""})},t.prototype.initEditTitle=function(){var e=this;jQuery("> .js-nav-item-header span",this.$el).mousedown(function(e){var t=jQuery(this);t.data("beforeChange",t.text())}).bind("blur",function(t){var i=jQuery(this),n=i.data("beforeChange"),a=i.text();n!==a&&e.model.set("title",a)}).bind("keydown",function(e){var t=e.which|e.keyCode;if(13===t||27===t){if(e.preventDefault(),27===t){var i=jQuery(this),n=i.data("beforeChange");i.text(n)}jQuery(this).trigger("blur")}}),jQuery("> .js-nav-item-header > .js-navigator-item-title",this.$el).hover(function(){e.model.getView().$el.addClass("ac_highlight")},function(){var t=e.model.getView().$el;t.hasClass("js-active")||t.removeClass("ac_highlight")}),jQuery(document).click(function(t){var i=jQuery(".js-navigator-item-title > span",e.$el);i.is(":focus")&&!jQuery(t.target).closest(i).length&&i.trigger("blur")})},t.prototype.onStartSort=function(e,t){this.sorting=!0;var i,n=jQuery(t).offset().top,a=!1,o=this,s=0;i=setInterval(function(){if(o.sorting){var e=o.$el.offset().top,l=e+o.$el.height(),r=jQuery(t).offset().top,c=r+jQuery(t).height();if(r<n?a=!1:r>n&&(a=!0),n=r,!a&&r>=e&&r<=l||a&&c>=e&&c<=l){if(o.isCollapsed()){if(!(s>=20))return void s++;o.onCollapsedClick(),o.expanded=!0}jQuery("> .js-nav-body",o.$el).css("min-height",jQuery(t).height()),o.model.get("content").allowSort&&jQuery("> .js-nav-body",o.$el).sortable("refresh")}else s=0,jQuery("> .js-nav-body",o.$el).css("min-height","")}else clearInterval(i),jQuery("> .js-nav-body",o.$el).css("min-height","")},50)},t.prototype.onStopSort=function(e){this.sorting=!1,this.expanded&&(this.expanded=!1,this.onCollapsedClick())},t.prototype.onTitleMouseDown=function(e,t){"span"===jQuery(e.target).prop("tagName").toLowerCase()&&e.stopPropagation();var i=this.model.getNavigatorPanel(),n=jQuery(e.target).closest(".js-nav-item");if(!n.hasClass("active")){var a=jQuery(".js-nav-item.active",i.getView().$el).removeClass("active");jQuery("> .js-nav-item-header span",a).blur(),n.addClass("active"),this._$(".ac_highlight").removeClass("ac_highlight js-active"),this.model.getView().$el.addClass("ac_highlight js-active"),e.isTrigger||this._$("body").stop().animate({scrollTop:this.model.getView().$el.offset().top-30},"500","swing")}this.$el.parents(".js-ac_panel:first").trigger("activateModel",{model:this.model,showPanel:t})},t.prototype.hideViewInResponsiveMode=function(e){if(this.preventDefaultEvent(e),this.model.allowShowHideResponsive){var t=!1,i=this.model.getResponsiveMode(),n=jQuery(e.currentTarget).find("> i");n.hasClass("js-show")?(n.removeClass("js-show acicon acicon-show").attr("title",this.translate("Show")),t=!0):(n.addClass("js-show acicon acicon-show").attr("title",this.translate("Hide")),t=!1),this.model.setSettingsAttr("main.responsive.hidden."+i,t)}},t.prototype.onCollapsedClick=function(e){e&&e.stopPropagation();var t=jQuery("> .js-nav-item-header > .js-navigator-item-title > .js-collapsed-sub",this.$el),i=jQuery("> .js-nav-body",this.$el);t.toggleClass("js-collapsed"),t.hasClass("js-collapsed")?(i.hide(),t.addClass("acicon-triangle-right").removeClass("acicon-triangle-down")):(t.addClass("acicon-triangle-down").removeClass("acicon-triangle-right"),i.show())},t.prototype.changeResponsiveDisplay=function(){var e=this.model.getMachineName(),t=ContentObject.generateObjectSettings(e),i=jQuery("> .js-nav-item-header > a.js-show-hide > i",this.$el),n=this.model.getResponsiveMode(),a=t.main.responsive.hidden;jQuery.extend(!0,{},a,this.model.getSettingsAttr("main.responsive.hidden"))[n]?i.removeClass("acicon acicon-show").attr("title",this.translate("Show")):i.addClass("acicon acicon-show").attr("title",this.translate("Hide"))},t.prototype.updateIndent=function(e){jQuery("> .js-nav-item-header > .js-navigator-item-title",this.$el).removeClass("indent-"+this.indent).addClass("indent-"+e),this.$el.attr("data-indent",e),this.indent=e;var t=this.model.get("content");t instanceof ContentObjects&&t.each(function(t,i){t.setIndent(e+1)})},t.prototype.deactivate=function(){this.$el.removeClass("active")},t.prototype.isCollapsed=function(){return jQuery("> .js-nav-item-header > .js-navigator-item-title > .js-collapsed-sub",this.$el).hasClass("js-collapsed")},t.prototype.changeTitle=function(e,t,i){jQuery("> .js-nav-item-header > .js-navigator-item-title > span",this.$el).text(t)},t}(AweBuilder.AbstractView);AweBuilder.NavigatorView=NavigatorView;var ContentObjects=function(e){function t(t,i,n,a){void 0!==i&&void 0!==i.model||(i=jQuery.extend(!0,{},i,{model:ContentObject})),"array"===jQuery.type(t)&&jQuery.each(t,function(e,t){t instanceof ContentObject||delete t.cid}),e.call(this,t,i),this.className=n,this.navClassName=void 0!==a?"js-nav-body ac_navigator-item-body "+a:"js-nav-body ac_navigator-item-body";var o=this;jQuery.each(this.models,function(e,t){if(t){t.get("undefinedElement")?o.remove(t,{silent:!0}):t.collection=o}}),this.createView(),this.createNavigatorViews()}return __extends(t,e),t.prototype.initialize=function(t,i){this.allowSort=!0,this.init(t,i),e.prototype.initialize.call(this,t,i)},t.prototype.init=function(e,t){},t.prototype.getContainer=function(){return this.container},t.prototype.getChildObject=function(e){for(var t,i=this,n=0;n<e.length;n++){var a=e[n];if(!(t=i.at(a))||!t.get("content")){t=void 0;break}i=t.get("content")}return t},t.prototype.setContainer=function(e){this.container=e},t.prototype.createView=function(){this.view=new ContentObjectsView({collection:this,className:this.className})},t.prototype.getView=function(){return this.view},t.prototype.createNavigatorViews=function(){this.navigatorViews=new NavigatorViews({collection:this,className:this.navClassName})},t.prototype.getNavigatorView=function(){return this.navigatorViews},t.prototype.setNavigatorPanel=function(e){this.navigatorPanel=e,this.each(function(t,i){t.setNavigatorPanel(e)})},t.prototype.getNavigatorPanel=function(){return this.navigatorPanel},t.prototype.getElementsByAttribute=function(e,t){return this.filter(function(i){return i.get(e)===t})},t}(Backbone.Collection);AweBuilder.ContentObjects=ContentObjects;var ContentObjectsView=function(_super){function ContentObjectsView(){_super.apply(this,arguments)}return __extends(ContentObjectsView,_super),ContentObjectsView.prototype.initialize=function(e){this.allowUpdateDeleteBtn=!1,_super.prototype.initialize.call(this,e),this.listenTo(this.collection,"add",this.listenAddObject),this.listenTo(this.collection,"remove",this.listenRemoveObject),this.updateDeleteButton()},ContentObjectsView.prototype.render=function(){this.renderContent();var e,t=this;return e=setInterval(function(){t.$wrapper.parents("body").length&&(clearInterval(e),t.initSort(),t.initSortableConnectWithElementPanel(),t.collectionReady())},100),this},ContentObjectsView.prototype.renderContent=function(){var e=this;this.$wrapper=this.$el,this.collection.each(function(t,i){var n=t.getView();n&&e.$wrapper.append(n.$el)})},ContentObjectsView.prototype.initSort=function(e){function t(e){var t=[];if(e){e.parents(".js-content-object:not(.js-type-menubox)").each(function(e,i){var n=jQuery(i),e=n.index();n.hasClass("ac-tab__panel")&&e&&e--,t.unshift(e)})}return t}var i=this,n=this.collection,a="js-sort-"+this.collection.model.type;this.$wrapper.addClass(a),this._$(this.el).sortable({items:"> .js-content-object",axis:e||!1,connectWith:"."+a,handle:".js-ac-control-move",placeholder:"ac_placeholder",helper:function(){return jQuery('<div class="js-ac-helper ac_helper"><span class="js-text-title text-title"></span></div>')},cursor:"move",cursorAt:{left:12,top:12},forcePlaceholderSize:!0,appendTo:jQuery("iframe").contents().find("body"),tolerance:"pointer",start:function(e,t){var a=t.item.index(),o=n.at(a),s=t.item.parents(".ui-sortable").length,l=o.getRootCollection(s);t.item.data("sortObject",o).data("rootCollection",l),i.beforeSort(e,t);var r=t.item.attr("defWidth");r&&t.placeholder.width(r),i._$(i.$wrapper).sortable("refreshPositions"),jQuery(".js-text-title",t.helper).html(o.get("title")),t.helper.addClass("ac_helper--"+o.getType()),o.getView().updateGridView(!0)},update:function(e,i){if(!i.sender){var n=i.item.data("sortObject"),a=n.getCollection();n=a.remove(n,{action:"sort"});var o=i.item.data("rootCollection"),s=t(i.item),l=o.getChildObject(s),r=l?l.get("content"):o,c=i.item.index();r.add(n,{at:c,source:"view",changedCollection:!a.getView().$el.is(r.getView().$el)})}},stop:function(e,t){t.item.removeAttr("style"),i.afterSort(e,t),t.item.data("sortObject").getView().updateGridView(!1)}}),i.collection.allowSort||this._$(this.el).sortable("disable")},ContentObjectsView.prototype.initSortableConnectWithElementPanel=function(){var _self=this,type=this.collection.model.type,typeClass=".js-type-"+type,controllerClass="js-controller-"+type;this.$wrapper.sortable({placeholder:"ac_placeholder",handle:".js-not-handle",items:typeClass,tolerance:"pointer",start:function(e,t){t.placeholder.css({width:"100%",height:50})},sort:function(e,t){t.helper.attr("stopSort")?t.placeholder.hide().removeAttr("addElement"):t.helper.attr("startSort")&&t.placeholder.show().attr("addElement","true")},update:function(event,ui){if(ui.placeholder.attr("addElement")&&ui.item.hasClass(controllerClass)){var controllerObject=eval(ui.item.attr("data-tab")+".createControllerObject(ui.item)"),receiveContainer=_self.collection.getContainer(),receivedCollection=receiveContainer?receiveContainer.get("content"):_self.collection,responsiveMode=receiveContainer?receiveContainer.getResponsiveMode():receivedCollection.at(0).getResponsiveMode(),index=ui.item.index();controllerObject&&(controllerObject.setNavigatorPanel(_self.collection.getNavigatorPanel()),controllerObject.setResponsiveMode(responsiveMode),receivedCollection.add(controllerObject,{at:index}),controllerObject.getView().edit())}ui.item.remove()}})},ContentObjectsView.prototype.beforeSort=function(e,t){t.placeholder.css("width","100%")},ContentObjectsView.prototype.afterSort=function(e,t){t.item.removeAttr("style")},ContentObjectsView.prototype.listenAddObject=function(e,t,i){if("view"!==i.source){var n=this,a=e.getView();switch(i.index){case 0:n.$wrapper.prepend(a.$el);break;case t.length-1:case void 0:n.$wrapper.append(a.$el);break;default:var o=e.__proto__.constructor.type,s=a.$el.index();!i.changedCollection&&s>=0&&s<=i.index?jQuery("> .js-type-"+o+":eq("+i.index+")",n.$wrapper).after(a.$el):jQuery("> .js-type-"+o+":eq("+i.index+")",n.$wrapper).before(a.$el)}this.updateDeleteButton()}var l=t.getContainer()?t.getContainer().getIndent()+1:1;e.setIndent(l)},ContentObjectsView.prototype.listenRemoveObject=function(e,t,i){"sort"!==i.action&&e.getView().$el.remove(),this.updateDeleteButton()},ContentObjectsView.prototype.updateDeleteButton=function(){this.allowUpdateDeleteBtn&&1===this.collection.length?(this.firstView=this.collection.at(0).getView(),this.firstView.updateDeleteBtn(!1)):this.firstView&&this.firstView.updateDeleteBtn(!0)},ContentObjectsView.prototype.setAllowUpdateDeleteBtn=function(e){this.allowUpdateDeleteBtn=e,this.updateDeleteButton()},ContentObjectsView.prototype.collectionReady=function(){},ContentObjectsView}(AweBuilder.AbstractView);AweBuilder.ContentObjectsView=ContentObjectsView;var NavigatorViews=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.listenTo(this.collection,"add",this.listenAddObject),this.listenTo(this.collection,"remove",this.listenRemoveObject)},t.prototype.render=function(){return this.renderContent(),this.initSort(),this},t.prototype.renderContent=function(){this.$wrapper=this.$el;var e=this,t=this.collection.getContainer(),i=t?t.getIndent():0;this.collection.each(function(t,n){t.setIndent(i+1),t.getNavigatorView()&&e.$wrapper.append(t.getNavigatorView().$el)})},t.prototype.initSort=function(){function e(e){var t=[];return e.parents(".js-nav-item:not(.js-nav-item-menubox)").each(function(){var e=jQuery("> .js-nav-item",jQuery(this).parent()).index(this);t.unshift(e)}),t}var t=this.collection,i="js-sort-"+this.collection.model.type;this.$wrapper.addClass(i).sortable({items:"> .js-nav-item",connectWith:"."+i,cursorAt:{right:100,top:10},axis:"y",cursor:"move",start:function(e,i){var n=jQuery("> .js-nav-item",i.item.parent()).index(i.item),a=t.at(n),o=i.item.parents(".ui-sortable").length,s=a.getRootCollection(o),l=a.getType();jQuery(".js-nav-body.js-sort-"+l).parent().trigger("startSort",i.item),i.item.data("sortObject",a).data("rootCollection",s);var r=jQuery("> .js-nav-item-header .js-collapsed-sub",i.item);r.hasClass("js-collapsed")||(r.trigger("click"),i.item.data("collapsed",!0))},update:function(t,i){if(!i.sender){var n=i.item.data("sortObject"),a=n.getCollection();n=a.remove(n,{action:"sort"});var o=i.item.data("rootCollection"),s=e(i.item),l=o.getChildObject(s),r=l?l.get("content"):o,c=i.item.index();r.add(n,{at:c,source:"navigator",changedCollection:!a.getView().$el.is(r.getView().$el)})}},stop:function(e,i){var n=t.model.type;jQuery(".js-nav-body.js-sort-"+n).parent().trigger("stopSort"),i.item.data("collapsed")&&(jQuery("> .js-nav-item-header .js-collapsed-sub",i.item).trigger("click"),i.item.data("collapsed",void 0))}}),this.collection.allowSort||this.$wrapper.sortable("disable")},t.prototype.listenAddObject=function(e,t,i){var n=t.getContainer(),a=n?n.getIndent()+1:1;if(e.setIndent(a),"navigator"!==i.source){var o=this.$wrapper,s=e.getNavigatorView();switch(i.index){case 0:o.prepend(s.$el);break;case t.length-1:case void 0:o.append(s.$el);break;default:var l=s.$el.index();!i.changedCollection&&l>=0&&l<=i.index?jQuery("> .js-nav-item:eq("+i.index+")",o).after(s.$el):jQuery("> .js-nav-item:eq("+i.index+")",o).before(s.$el)}}if(n){n.getNavigatorView().updateCollapsedDisplay(1)}var r=e.getBuilder();r&&r.enableReloadAlert()},t.prototype.listenRemoveObject=function(e,t,i){void 0!==i.action&&"sort"===i.action||e.getNavigatorView().$el.remove();var n=t.getContainer();if(n){n.getNavigatorView().updateCollapsedDisplay(t.length)}e.getView().edit();var a=e.getBuilder();a&&a.enableReloadAlert()},t}(AweBuilder.AbstractView);AweBuilder.NavigatorViews=NavigatorViews}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.createView=function(){this.view=new i({model:this,className:"pd15"})},n.prototype.setContainerPanel=function(e){this.containerPanel=e},n.prototype.getContainerPanel=function(){return this.containerPanel},n.createControllerObject=function(t){return new e.ContentObject},n}(e.Tab);e.ElTab=t;var i=function(e){function t(){e.apply(this,arguments),this.searchText="search element",this.dragging=!1,this.mouseEnter=!1}return __extends(t,e),t.prototype.initialize=function(){this.initializedDragElements=!1,this.dragEl=".js-controller-"+this.model.get("sortWithType"),e.prototype.initialize.call(this)},t.prototype.events=function(){return{"keyup .js-search > input":"search","click .js-search > a":"clearSearchText"}},t.prototype.renderContent=function(){this.$el.append('<div class="js-tab-header">\n                    <div class="js-search ac_search">\n                        <input type="text" placeholder="'+this.translate(this.searchText)+'">\n                        <i class="acicon acicon-search"></i>\n                        <a href="#" class="ac_search-remove" style="display: none">\n                            <i class="acicon acicon-close"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="js-ac-row ac_row ac_row--scroll"></div>').addClass("pd15"),this.$scrollbar=jQuery(".js-ac-row",this.$el),e.prototype.renderContent.call(this);var t=this;return this.$el.delegate(this.dragEl,"mousedown",function(){t.beforeDragElement(),t.initDragElements(jQuery(this).height())}).delegate(this.dragEl,"mouseup",function(){jQuery("body > .js-draggable-helper").remove(),t.stopDragElement()}),this.$el.mouseenter(function(e){t.mouseEnter=!0;var i=t.getBuilderIframeContents(!0);if(i&&!t.dragging){var n=t.getBuilderIframeContents(),a=n.scrollTop();i.height(n.height()+150),jQuery(window).scrollTop(a)}t.initializedDragElements||t.initDragElements()}).mouseleave(function(e){t.mouseEnter=!1;var i=t.getBuilderIframeContents(!0);if(i&&!t.dragging){var n=t.getBuilderIframeContents(),a=jQuery(window).scrollTop();i.removeAttr("style"),n.scrollTop(a)}}),this.$el},t.prototype.initDragElements=function(e){var t=this,i=t.model.getContainerPanel(),n=i.getBuilder().getSettings();if(this.initializedDragElements){var a=jQuery("iframe").contents().find(".js-sort-"+this.model.get("sortWithType"));jQuery(""+this.dragEl,this.$el).draggable("option","connectToSortable",a)}else jQuery(""+this.dragEl,this.$el).draggable({helper:"clone",revert:"invalid",iframeFix:!0,refreshPositions:!0,snapMode:"inner",snapTolerance:10,appendTo:"body",start:function(e,i){t.dragging=!0;var a=e.pageX-i.originalPosition.left,o=e.pageY-i.originalPosition.top,s=i.helper.clone().addClass("js-draggable-helper");s.mouseup(function(){jQuery(this).remove()}).data("offsetX",a).data("offsetY",o).width(30).height(40),jQuery("body").append(s),i.helper.css("opacity",0).width(30).height(40),t.beforeStartDrag(e,i),n&&!n.showGrid&&t._$(".js-ac-page-wrapper").addClass("ac_guides")},drag:function(e,n){var a=jQuery("body > .js-draggable-helper"),o=a.data("offsetX"),s=a.data("offsetY");n.helper.offset({top:e.pageY-s,left:e.pageX-o}),jQuery("body > .ui-draggable-dragging").length>1?(a.hide(),n.helper.css("opacity","")):(jQuery("body > .js-draggable-helper").show(),n.helper.css("opacity",0)),a.offset(n.helper.offset());var l=t.getBuilderIframeContents();l&&l.trigger("mouseover");var r=jQuery(".js-panel-inner",i.getView().$el),c=r.offset(),d=c.top+r.height(),u=c.left+r.width();e.pageY>=c.top&&e.pageY<=d&&e.pageX>=c.left&&e.pageX<=u?n.helper.attr("stopSort",!0).removeAttr("startSort"):n.helper.attr("startSort",!0).removeAttr("stopSort")},stop:function(e,i){jQuery("body > .js-draggable-helper").css("transition","none").remove(),n&&!n.showGrid&&t._$(".js-ac-page-wrapper").removeClass("ac_guides");setTimeout(function(){var e=t.getBuilderIframeContents();e&&e.trigger("mouseover"),t.stopDragElement()},200)}}),this.initializedDragElements=!0},t.prototype.beforeStartDrag=function(e,t){},t.prototype.getBuilderIframeContents=function(e){var t=this.model.getContainerPanel(),i=t.getBuilder(),n=i.getBuilderIframe();return e?n:n?n.contents():void 0},t.prototype.beforeDragElement=function(){var e=this.getBuilderIframeContents();e&&e.find("html").css("overflow","hidden")},t.prototype.stopDragElement=function(e){var t=this.getBuilderIframeContents();t&&t.find("html").removeAttr("style"),this.dragging=!1,this.mouseEnter||this.$el.trigger("mouseleave")},t.prototype.destroyDragElements=function(){this.initializedDragElements&&(this.initializedDragElements=!1,jQuery(this.dragEl,this.$el).draggable("destroy"))},t.prototype.search=function(e,t){e.preventDefault();var i=jQuery(".js-search > input",this.$el).val().trim(),n=i.split("").join(".*"),a=new RegExp(".*"+n+".*","gi");i?jQuery(".js-search > a",this.$el).show():jQuery(".js-search > a",this.$el).hide(),this.processSearch(a)},t.prototype.processSearch=function(e){jQuery(".js-ac-row .ui-draggable",this.$el).fadeOut(100).filter(function(){return jQuery(this).attr("data-title").match(e)}).fadeIn(100)},t.prototype.clearSearchText=function(e){e&&e.preventDefault(),jQuery(".js-search > input",this.$el).val("").trigger("keyup")},t}(e.TabView);e.ElTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this,className:"js-section-template ac_section-template-item"})},t}(e.Abstract);e.TemplateItem=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.template=_.template('\n                <div class="js-controller-section ac_section-template-cover">\n                    <img src="<%= thumbURL %>" alt="<%= title %>">\n                </div>\n                <div class="js-favorite ac_section-template-item-favorite" title="'+this.translate("Favourite")+'">\n                    <i class="acicon acicon-star"></i>\n                </div>\n            '),t.prototype.initialize.call(this)},i.prototype.render=function(){var t=this.model.toJSON(),i=t.category?t.category.toLowerCase().replace(/[^a-z,]/,"_"):"custom",n=jQuery(this.template({title:t.title,thumbURL:t.cover.url,favorite:t.favorite}));this.$el.append(n).addClass(i.split(",").join(" ")),t.favorite&&(this.$el.addClass("favorited"),jQuery(".js-controller-section",this.$el).addClass("favorited"),jQuery(".js-favorite > i",this.$el).removeClass("acicon-star").addClass("acicon-star-2")),jQuery(".js-controller-section",this.$el).addClass(i.split(",").join(" ")).attr("data-template",JSON.stringify(t)).attr("data-tab","AweBuilder.TemplatesTab").attr("data-title",this.model.get("title")).attr("data-tooltip",t.title).attr("template-id",t.id);var a=this;return jQuery(".js-favorite",this.$el).click(function(i){i.preventDefault();var n=!a.$el.hasClass("favorited"),o=e.prepareAjaxParamenters("templates",{requestAction:"setFavorite",type:"section",state:n,id:t.id});jQuery.post(o.url,o.data,function(e){e.status&&(a.$el.toggleClass("favorited"),a.$el.hasClass("favorited")?jQuery(".js-favorite > i",a.$el).removeClass("acicon-star").addClass("acicon-star-2"):jQuery(".js-favorite > i",a.$el).removeClass("acicon-star-2").addClass("acicon-star"))},"json")}),this},i}(e.AbstractView);e.TemplateItemView=i;var n=function(e){function i(i,n){void 0===n&&(n={}),n.model=t,e.call(this,i,n),this.createView()}return __extends(i,e),i.prototype.createView=function(){this.view=new a({collection:this})},i.prototype.getView=function(){return this.view},i}(Backbone.Collection);e.TemplateItems=n;var a=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(i){this.filter=new e.AweSelect({type:"select",title:"Categories",inlineTitle:!0,options:{"*":"All",".favorited":"Favourite"},selector:"",widthNumber:!1,defaultValue:"*",customStyles:{".ac_select-list":{"padding-left":"75px"}},change:jQuery.proxy(this.filterTemplates,this)}),this.listenTo(this.collection,"add",this.addTemplate),t.prototype.initialize.call(this,i)},i.prototype.render=function(){var e=this;return this.collection.each(function(t,i){e.$el.prepend(t.getView().$el)}),this},i.prototype.addTemplate=function(e,t,i){0===i.index?(this.$el.prepend(e.getView().$el),this.filter.$el.trigger("change")):this.$el.append(e.getView().$el);var n=this.filter.getOptions().options,a=Object.keys(n),o=!1,s=e.toJSON(),l=s.category?s.category.split(","):new Array;jQuery.each(l,function(e,t){var i=t.toLowerCase().trim();-1===jQuery.inArray(i,a)&&(n["."+i]=t.trim(),a.push("."+i),o=!0)}),o&&this.filter.setOptions(n)},i.prototype.filterTemplates=function(e,t,i,n,a){jQuery(".tooltip-first",this.$el).removeClass("tooltip-first"),"*"===i?(jQuery(".js-section-template",this.$el).show(),jQuery(".js-section-template:first > div",this.$el).addClass("tooltip-first")):(jQuery(".js-section-template"+i.current+":first > div",this.$el).addClass("tooltip-first"),jQuery(".js-section-template"+i.current,this.$el).show(100),jQuery(".js-section-template:not("+i.current+")",this.$el).hide(100))},i.prototype.getFilter=function(){return this.filter},i}(e.AbstractView);e.TemplateItemsView=a}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(){var i={title:"Section Templates",headerHTML:'<i class="acicon acicon-section"></i>',content:new e.TemplateItems,sortWithType:"section"};t.call(this,i),this.loadMore=!0,this.numberTemplates=0,this.getTemplates()}return __extends(n,t),n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.getTemplates=function(){if(!this.loading&&this.loadMore){var t=this,i=this.view,n=e.prepareAjaxParamenters("templates",{requestAction:"get",from:this.numberTemplates,length:10,type:"section"});n&&(this.loading=!0,jQuery.post(n.url,n.data,function(e){t.loading=!1,t.loadMore=!(!e||void 0===e.loadMore)&&e.loadMore,e&&void 0!==e.templates&&(i.destroyDragElements(),t.get("content").unshift(e.templates),t.numberTemplates+=e.templates.length,i.initDragElements())},"json"))}},n.prototype.addTemplate=function(e){var t=this.view;t.destroyDragElements(),this.get("content").unshift(e),t.initDragElements()},n.createControllerObject=function(t){var i=t.data("template");return new e.Section(i.data)},n}(e.ElTab);e.TemplatesTab=t;var i=function(e){function t(){e.apply(this,arguments),this.searchText="search template"}return __extends(t,e),t.prototype.renderTabContent=function(){this.$scrollbar.addClass("template_tab_row");var e=this.model.get("content").getView();this.$scrollbar.append(e.$el),this.filer=e.getFilter(),jQuery(".js-tab-header",this.$el).append(this.filer.$el.css("margin-top","10px"));var t=this;this.$scrollbar.scroll(function(e){var i=jQuery(e.currentTarget);i.scrollTop()+i.innerHeight()==i[0].scrollHeight&&t.model.getTemplates()}),this.filer.$el.change(function(){jQuery(".js-search > input",t.$el).trigger("keyup")})},t.prototype.processSearch=function(e){var t=this.filer.getValue();"*"===t&&(t=""),jQuery(".js-ac-row .js-section-template"+t,this.$el).fadeOut(100).filter(function(){return jQuery("> div",this).attr("data-title").match(e)}).fadeIn(100)},t.prototype.beforeStartDrag=function(e,t){t.helper.addClass("ac_section-template-item")},t}(e.ElTabView);e.TemplatesTabView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var Element=function(_super){function Element(e){if(!e||"string"!=typeof e.machineName)throw Error("Create element object failed. You must pass machineName of element in constructor options.");var t=e.machineName,i=window.AweBuilderSettings.elements[t];if(void 0!==i){void 0===e.title&&(e.title=i.title?i.title:t);var n=AweBuilder.ContentObject.generateObjectSettings(t,i.data);void 0===e.settings&&(e.settings=Element.generateDefaultCustomSettings(n))}else e.undefinedElement=!0,console.log("Elemnt type '"+t+"' did not exist.");_super.call(this,e)}return __extends(Element,_super),Element.prototype.init=function(e){if(!e.undefinedElement){this.machineName=e.machineName;var t=window.AweBuilderSettings.elements[this.machineName];t.ready&&(this.elementReady=t.ready)}},Element.prototype.createView=function(){this.get("undefinedElement")||(this.view=new ElementView({model:this}))},Element.prototype.createNavigatorView=function(){this.get("undefinedElement")||(this.navigatorView=new AweBuilder.NavigatorView({model:this}))},Element.prototype.getType=function(){return"element"},Element.prototype.reloadContent=function(){var e=new ElementView({model:this});this.view.$el.before(e.$el),this.view.$el.remove(),this.view=e},Element.prototype.getElementSettings=function(){var e=this.getMachineName();return e?window.AweBuilderSettings.elements[e]:void 0},Element.generateDefaultCustomSettings=function(e){var t={};return jQuery.map(e,function(e,i){t[i]=AweBuilder.parseJSON(JSON.stringify(e)),delete t[i].style,delete t[i].animation,delete t[i].responsive}),t},Element.prototype.clone=function(attributes){var machineName=this.get("machineName"),content=this.get("content"),defaultAttributes=this.toJSON(),className=window.AweBuilderSettings.elements[machineName].objClassName;content instanceof AweBuilder.ContentObjects&&(defaultAttributes.content=content.clone()),void 0===className&&(className="Element"),void 0!==attributes&&(defaultAttributes=jQuery.extend(!0,{},defaultAttributes,attributes)),delete defaultAttributes.cid;var clone=eval("new AweBuilder."+className+"(defaultAttributes)");return clone.setNavigatorPanel(this.getNavigatorPanel()),clone.setResponsiveMode(this.getResponsiveMode()),clone},Element.type="element",Element}(AweBuilder.ContentObject);AweBuilder.Element=Element;var ElementView=function(_super){function ElementView(e){void 0===e.className&&(e.className="js-ac-element ac_element"),_super.call(this,e)}return __extends(ElementView,_super),ElementView.prototype.initialize=function(){this.viewReady=!1,this.librariesReady=!1,this.loadLibraries(),this.getTemplate(),_super.prototype.initialize.call(this)},ElementView.prototype.loadLibraries=function(){var _self=this,element=this.model;this.$el.bind("librariesReady",function(){_self.librariesReady=!0,_self.execCustomReady()});var machineName=element.getMachineName(),librariesInfo=jQuery.extend(!0,{},window.AweBuilderSettings.elements[machineName].libraries),libraries;if(librariesInfo){libraries={},jQuery.each(librariesInfo,function(e,t){var i=window.AweBuilderSettings.libraries[e];i&&jQuery.each(t,function(e,t){i[t]||(jQuery.each(i.files,function(e,i){libraries[e]?libraries[e].destination.push(t):libraries[e]=jQuery.extend({},{destination:[t]},i)}),i[t]="loading")})}),libraries&&AweBuilder.addLibraries(libraries);var librariesReady_1;librariesReady_1=setInterval(function(){jQuery.each(librariesInfo,function(libName,destination){var callback=libName,reg=/\$\.|jQuery\.|jsClass\./g;reg.test(callback)?(jQuery.each(destination,function(index,des){if(-1===callback.indexOf("jsClass"))callback=callback.replace("$","jQuery"),"frontend"===des&&(callback=callback.replace("jQuery","AweBuilder._jQuery"));else{var win="frontend"===des?"AweBuilder._window":"window";callback=callback.replace("jsClass",win)}void 0!==eval(callback)&&(destination.splice(index,1),window.AweBuilderSettings.libraries[libName][des]=!0)}),0===destination.length&&delete librariesInfo[callback]):delete librariesInfo[callback]}),0===Object.keys(librariesInfo).length&&(clearInterval(librariesReady_1),_self.$el.trigger("librariesReady"))},100)}else this.$el.trigger("librariesReady")},ElementView.prototype.getCacheTemplateKey=function(){var e=this.model.get("machineName"),t=this.model.get("extraData"),i="object"===jQuery.type(t)?jQuery.extend({machineName:e},t):{machineName:e},n=this.model.get("elTemplateKey");return void 0!==n&&void 0!==i[n]?i[n]:e},ElementView.prototype.getTemplate=function(){var e=this,t=this.model.get("machineName"),i=this.model.get("extraData"),n={machineName:t,task:"getTemplate"},a="object"===jQuery.type(i)?jQuery.extend(!0,{},n,i):n,o=this.getCacheTemplateKey(),s=AweBuilder.prepareAjaxParamenters("element",a);void 0===window.AweBuilderSettings.elementsTemplate[o]&&s&&jQuery.ajax({type:"POST",url:s.url,data:s.data,success:function(t){"object"==typeof t&&void 0!==t.template?(e.template=_.template(t.template),e.templateData=t):(window.AweBuilderSettings.elementsTemplate[o]=t,e.template=_.template(t)),e.$el.trigger("templateReady")}})},ElementView.prototype.render=function(){return this.model.get("undefinedElement")&&(this.$el=void 0),_super.prototype.render.call(this)},ElementView.prototype.renderContent=function(){function e(){var e;e=setInterval(function(){if(t.$el.parents("body").length){clearInterval(e);var i=t.model.get("settings"),n={};jQuery.map(i,function(e,t){e&&e.settings&&(n[t]=e.settings)});var a=jQuery('<div class="js-el-content">'+t.template(n)+"</div>");t.$el.append(a),t.viewReady=!0,t.execCustomReady(),t.initEditor()}},50)}var t=this,i=(this.model.get("machineName"),this.getCacheTemplateKey()),n=window.AweBuilderSettings.elementsTemplate[i];n?(this.template=_.template(n),e()):this.$el.bind("templateReady",function(t){t.stopPropagation(),e()})},ElementView.prototype.execCustomReady=function(){var e=this.model;this.librariesReady&&this.viewReady&&"function"===jQuery.type(e.elementReady)&&e.elementReady(this.el,e,this.templateData)},ElementView.prototype.initEditor=function(selector){function getFormElement(saveElement){var machineName=_self.model.getMachineName(),settingForms=window.AweBuilderSettings.settingForms[machineName],element,saveElementSelector;if(saveElement&&saveElement.name){var part="main.elements.";void 0!==saveElement.part&&(part+=".elements."),saveElementSelector=part+saveElement.name.split(".").join(".elements.")}try{element=eval("settingForms."+saveElementSelector)}catch(e){}return element}var _self=this,elSettings=this.model.getElementSettings();if(elSettings&&elSettings.enableEditor&&_self._$.fn.mediumEditor)for(var enableElements="object"===jQuery.type(elSettings.enableEditor)?[elSettings.enableEditor]:elSettings.enableEditor,editorOpts=elSettings.editorOptions?elSettings.editorOptions:{toolbar:{buttons:["bold","italic","underline","anchor"]}},_loop_2=function(e){var t=enableElements[e],i=_self._$;if(t.selector&&(!selector||selector&&-1!==t.selector.indexOf(selector))){i(t.selector,_self.el).mediumEditor(editorOpts);var n=i(t.selector,_self.el).data("mediumEditor");if(n&&(n.subscribe("blur",function(e,i){if(jQuery(this).data("hasPTag")||jQuery("> p",i).each(function(){jQuery(i).append(jQuery(this).html()),jQuery(this).remove()}),t.saveTo){var n=getFormElement(t.saveTo);n&&(n.update(_self.model,_self.model.getResponsiveMode()),n.setValue(jQuery(this).html()))}}),n.subscribe("editableInput",function(e,t){!_self._$(t).data("hasPTag")&&i("> p",t).length&&i("> p",t).css("display","inline")})),selector)return"break"}},i=0;i<enableElements.length;i++){var state_2=_loop_2(i);if("break"===state_2)break}},ElementView.prototype.reinitEditor=function(e){for(var t=this.model.getElementSettings(),i="object"===jQuery.type(t.enableEditor)?[t.enableEditor]:t.enableEditor,n=0;n<i.length;n++)if(e){if(-1!==i[n].selector.indexOf(e)){var a=this._$(e,this.el).data("mediumEditor");if(a){a.destroy();break}}}else{var a=this._$(i[n].selector,this.el).data("mediumEditor");if(a){a.destroy();break}}this.initEditor(e)},ElementView.prototype.reloadContent=function(){if(this.viewReady){this.model.createView();var e=this.model.getView();this.$el.before(e.$el).remove(),this.destroy()}},ElementView}(AweBuilder.ContentObjectView);AweBuilder.ElementView=ElementView;var Elements=function(_super){function Elements(models,options){if(void 0!==options&&void 0!==options.model||(options=jQuery.extend(!0,{},options,{model:Element})),"array"===jQuery.type(models))for(var i=0;i<models.length;i++){var model=models[i],machineName=model.machineName,elSettings=window.AweBuilderSettings.elements[machineName];!elSettings||void 0===elSettings.objClassName||model instanceof Element||(models[i]=eval("new AweBuilder."+elSettings.objClassName+"(model)"))}_super.call(this,models,options,"ac_elements-wrapper")}return __extends(Elements,_super),Elements.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(t,i){e.push(i.clone())}),new Elements(e)},Elements.prototype.createView=function(){this.view=new ElementsView({collection:this,className:this.className})},Elements}(AweBuilder.ContentObjects);AweBuilder.Elements=Elements;var ElementsView=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.beforeSort=function(t,i){e.prototype.beforeSort.call(this,t,i),i.helper.css("transition","none")},t}(AweBuilder.ContentObjectsView);AweBuilder.ElementsView=ElementsView}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=jQuery.extend(!0,{},e.RESPONSIVE_SETTINGS,{classNumber:{xl:12,lg:12,md:12,sm:12,xs:12}}),i={tag:{type:"select",title:"Wrapper tag",inlineTitle:!0,options:{header:"header",footer:"footer",section:"section",div:"div",article:"article",aside:"aside",main:"main"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"div"},push:{type:"ranger",title:"Push",widget:"button",allowChangeRange:!1,min:0,max:12,unit:!1,devices:"all",widthNumber:2,defaultValue:0},pull:{type:"ranger",title:"Pull",widget:"button",allowChangeRange:!1,min:0,max:12,unit:!1,devices:"all",widthNumber:2,defaultValue:0},offset:{type:"ranger",title:"Offset",widget:"button",allowChangeRange:!1,min:0,max:12,unit:!1,devices:"all",widthNumber:2,defaultValue:0},breakNewLine:{type:"toggle",title:"Break new line",devices:"all",defaultValue:!1},customHTML:{type:"textarea",fireEvent:"blur",title:"Custom HTML",size:"medium",defaultValue:""},attributes:{type:"attributes",title:"Custom attribute",formElements:{name:{type:"input",title:"Name",inlineTitle:!0,defaultValue:""},value:{type:"input",title:"Value",inlineTitle:!0,defaultValue:""},validate:function(e){return""!==e.name.trim()}}}},n=function(n){function o(a){e.ContentObject.generateObjectSettings("column",{style:{status:[e.STYLE_HOVER]},responsive:t,settings:jQuery.extend(!0,{},i)}),void 0===a&&(a={}),void 0===a.settings&&(a.settings={}),void 0!==a.title&&"string"===jQuery.type(a.title)&&""!==a.title.trim()||(a.title="Column"),void 0!==a.content&&(a.content instanceof e.Elements||a.content instanceof Array)||(a.content=new e.Elements),a.machineName="column",n.call(this,a)}return __extends(o,n),o.prototype.init=function(){this.get("content").setContainer(this),this.machineName="column"},o.prototype.addElement=function(e,t){t&&t<this.get("content").length?this.get("content").add(e,{at:t}):this.get("content").add(e)},o.prototype.deleteElement=function(e){e<this.get("content").length&&this.get("content").remove(this.get("content").collection.at(e))},o.prototype.createView=function(){var e=this.getSettingsAttr("main.settings.tag");this.view=new a({model:this,tagName:e||"div"})},o.prototype.getType=function(){return"column"},o.prototype.setResponsiveMode=function(e){n.prototype.setResponsiveMode.call(this,e),this.view.updateResizableGrid()},o.prototype.clone=function(){var e=this.toJSON();return e.content=this.get("content").clone(),delete e.cid,new o(e)},o.type="column",o}(e.ContentObject);e.Column=n;var a=function(i){function a(e){var t=e.model.getSettingsAttr("main.settings.tag");void 0!==t&&(e.tagName=t),i.call(this,e)}return __extends(a,i),a.prototype.getRenderControllersData=function(){var e=i.prototype.getRenderControllersData.call(this);return e.splice(-1,0,{name:"split",title:this.translate("Split"),icon:"split"}),e},a.prototype.render=function(){return i.prototype.render.call(this),this.$el.addClass(this.renderResponsiveClasses()),this.renderCustomSettings(),this.initResizable(),this},a.prototype.renderCustomSettings=function(){var e=this,t=this.model.getSettingsAttr("main.settings");t&&jQuery.map(t,function(t,i){switch(i){case"offset":jQuery.map(t,function(t,i){e.$el.addClass("ac_offset-"+i+"-"+t)});break;case"pull":jQuery.map(t,function(t,i){e.$el.addClass("ac_pull-"+i+"-"+t)});break;case"push":jQuery.map(t,function(t,i){e.$el.addClass("ac_push-"+i+"-"+t)});break;case"breakNewLine":var n=e.model.getCollection(),a=n?n.getView():void 0;a&&a.renderRows();break;case"customHTML":e.renderCustomHtmlSetting(t);break;case"classes":t&&e.$el.addClass(t);break;case"id":t&&e.$el.attr("id",t);break;case"attributes":jQuery.each(t,function(t,i){e.$el.attr(i.name,i.value)})}})},a.prototype.renderCustomHtmlSetting=function(e){var t=this.model.get("content").getView().$el;if(this.$el.append(t),jQuery(".js-custom-wrap",this.$el).remove(),e){var i=this,n=document.createElement("div");n.innerHTML=e;var a=/\[content\]/.exec(e);if(!a||!a[0]){t.hide();var o=/<([a-z]+)[^<]*>/.test(e)?e:n;return void i.$el.append(jQuery(o).addClass("js-custom-wrap"))}e=e.replace("[content]",'<div class="js-col-content"></div>'),i.$el.append(jQuery(e).addClass("js-custom-wrap")),jQuery(".js-col-content",i.$el).before(t).remove()}t.show()},a.prototype.renderResponsiveClasses=function(e){void 0===e&&(e=this.model.get("settings"));var n=jQuery.extend(!0,{},t.classNumber),a=i.prototype.renderResponsiveClasses.call(this,e),o=[];return e.main&&e.main.responsive&&e.main.responsive.classNumber&&(n=jQuery.extend(!0,{},n,e.main.responsive.classNumber)),jQuery.map(n,function(e,t){"xs"==t?o.push("ac_col-"+e):o.push("ac_col-"+t+"-"+e)}),o.reverse(),a&&o.push(a),o.join(" ")},a.prototype.initResizable=function(){var e=this,t=this.model,i=setInterval(function(){e.$el.parents("body").length&&(clearInterval(i),e._$(e.el).resizable({handles:"e",containment:"parent",start:function(i,n){var a=t.responsiveMode,o="main.responsive.classNumber."+a;e.beforeResizeWidth=t.getSettingsAttr(o),jQuery(".js-content-object",e.el).trigger("columnStartResize")},resize:function(t,i){i.element.width(i.element.width()+32),e.updateWidth(i),e.$el.parent().css({margin:"",width:""}),e.$el.removeAttr("style")},stop:function(){jQuery(".js-content-object",e.el).trigger("columnStopResize")}}),e._$("> .ui-resizable-handle",e.el).mousedown(function(){var t=e.$el.parent().width();e.$el.parent().css("margin-right",0).width(t)}).mouseup(function(){e.$el.parent().css({"margin-right":"",width:""})}),e.updateResizableGrid(),e.$el.on("resizeGrid",function(){e.updateResizableGrid()}))})},a.prototype.updateWidth=function(e){var t=this.model,i=e.element.resizable("option","grid")[0],n=Math.round((e.size.width-e.originalSize.width)/i),a=void 0!==this.beforeResizeWidth?this.beforeResizeWidth+n:12+n;a>12?a=12:a<1&&(a=1),t.setSettingsAttr("main.responsive.classNumber."+t.responsiveMode,a)},a.prototype.updateResizableGrid=function(){if(this._$(this.el).data("ui-resizable")){var e=this.$el.parent().width()/12;this._$(this.el).resizable("option","grid",[e,0])}},a.prototype.split=function(t){var i=this.model.getSettingsAttr("main.responsive.classNumber."+e.RES_XL);if(void 0===i&&(i=12),i>1){var a=this.model,o=this.$el.index(),s=Math.ceil(i/2),l=i-s,r={main:{responsive:{classNumber:{xl:l,lg:l}}}},c=new n({settings:r});a.setSettingsAttr("main.responsive.classNumber."+e.RES_XL,s),a.setSettingsAttr("main.responsive.classNumber."+e.RES_LG,s),c.setResponsiveMode(a.responsiveMode),c.setNavigatorPanel(a.getNavigatorPanel()),c.setIndent(a.getIndent()),this.model.collection.add(c,{at:o+1})}},a.prototype.listenAddContent=function(t,n,a){if(i.prototype.listenAddContent.call(this,t,n,a),t instanceof e.Element){var o=t.getView();void 0!==a.index&&jQuery(".js-type-column > .js-ac-el:eq("+a.index+")",this.$el).length?jQuery(".js-type-column > .js-ac-el:eq("+a.index+")",this.$el).before(o.$el):jQuery(".js-type-column",this.$el).append(o.$el)}},a.prototype.renderSettingsChange=function(t,n,a,o){i.prototype.renderSettingsChange.call(this,t,n,a,o);var s=this.model.getCollection(),l=s?s.getView():void 0,r=t.split("."),c=r.pop();if(t.indexOf("classNumber")>-1&&l)l.renderRows(c);else if(t.indexOf(".settings")>-1){var d=this,u=this.model.getSettingsAttr(t,a),p=-1===jQuery.inArray(c,[e.RES_XL,e.RES_LG,e.RES_MD,e.RES_SM,e.RES_XS])?c:r.pop();switch(p){case"tag":this.model.createView();var h=this.model.getView();this.$el.before(h.$el).remove(),h.$el.addClass("ac_highlight js-active"),this.destroy();break;case"breakNewLine":l&&l.renderRows(c);break;case"offset":u&&d.$el.removeClass("ac_offset-"+c+"-"+u),n>0&&d.$el.addClass("ac_offset-"+c+"-"+n);break;case"pull":u&&d.$el.removeClass("ac_pull-"+c+"-"+u),n>0&&d.$el.addClass("ac_pull-"+c+"-"+n);break;case"push":u&&d.$el.removeClass("ac_push-"+c+"-"+u),n>0&&d.$el.addClass("ac_push-"+c+"-"+n);break;case"customHTML":this.renderCustomHtmlSetting(n);break;case"classes":var m=d.model.getSettingsAttr(t,a);void 0!==m&&d.$el.removeClass(m),d.$el.addClass(n);break;case"id":n?d.$el.attr("id",n):d.$el.removeAttr("id");break;case"attributes":if("array"===jQuery.type(n)){var g=[];jQuery.each(n,function(e,t){d.$el.attr(t.name,t.value),g.push(t.name)}),void 0!==u&&jQuery.each(u,function(e,t){-1===jQuery.inArray(t.name,g)&&d.$el.removeAttr(t.name)})}}}},a}(e.ContentObjectView);e.ColumnView=a;var o=function(t){function i(i,a){if(void 0!==a&&void 0!==a.model||(a=jQuery.extend(!0,{},a,{model:n})),void 0===i){var o=new n;o.setSettingsAttr("main.responsive.classNumber."+e.RES_XL,12),o.setSettingsAttr("main.responsive.classNumber."+e.RES_LG,12),o.setSettingsAttr("main.responsive.classNumber."+e.RES_MD,12),o.setSettingsAttr("main.responsive.classNumber."+e.RES_SM,12),o.setSettingsAttr("main.responsive.classNumber."+e.RES_XS,12),i=[o]}t.call(this,i,a,"js-ac-row ac_row")}return __extends(i,t),i.prototype.createView=function(){this.view=new s({collection:this,className:this.className})},i.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(){e.push(this.clone())}),new i(e)},i}(e.ContentObjects);e.Columns=o;var s=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.renderContent=function(){var e=this;this.$wrapper=this.$el,this.collection.each(function(t,i){var n=t.getView();e.$wrapper.append(n.$el)}),this.renderRows()},i.prototype.renderRows=function(t){var i=void 0!==t?[t]:[e.RES_XL,e.RES_LG,e.RES_MD,e.RES_SM,e.RES_XS],n={xl:0,lg:0,md:0,sm:0,xs:0};this.collection.each(function(e,t){jQuery.each(i,function(t,i){var a=e.getView().$el.removeClass("ac_col-"+i+"-breakline"),o=e.getSettingsAttr("main.responsive.classNumber."+i),s=e.getSettingsAttr("main.settings.breakNewLine."+i);s||void 0===o||12===o?(s&&a.addClass("ac_col-"+i+"-breakline"),n[i]=0):n[i]+o>12?(a.addClass("ac_col-"+i+"-breakline"),n[i]=o):n[i]+=o})})},i.prototype.beforeSort=function(e,t){this.$el.parents(".js-ac-page-wrapper").addClass("ac_col-sorting"),t.placeholder.css("width",t.item.width())},i.prototype.afterSort=function(e,i){t.prototype.afterSort.call(this,e,i),this.$el.parents(".js-ac-page-wrapper").removeClass("ac_col-sorting")},i.prototype.listenAddObject=function(e,i,n){t.prototype.listenAddObject.call(this,e,i,n),this.renderRows()},i.prototype.listenRemoveObject=function(e,i,n){t.prototype.listenRemoveObject.call(this,e,i,n),this.renderRows()},i}(e.ContentObjectsView);e.ColumnsView=s}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(i){void 0===i?i={}:"string"==typeof i&&(i={machineName:i}),void 0===i.content?i.content=new e.Columns:i.content=new e.Columns(i.content),i.content.getView().setAllowUpdateDeleteBtn(!0),t.call(this,i),this.get("content").setContainer(this)}return __extends(n,t),n.prototype.createView=function(){this.view=new i({model:this})},n}(e.Element);e.LayoutElement=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.renderContent=function(){var e=this.model.get("content");e&&e.getView&&this.$el.append(e.getView().$el)},t}(e.ElementView);e.LayoutElementView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function a(i){void 0===i&&(i={}),i.content instanceof e.Columns||(i.content=new e.Columns(i.content)),i.machineName="el_tab_item";var n,a={data:{main:{style:!1,animation:!1,settings:{icon:{type:"storage",defaultValue:"acicon acicon-pen",compareWidthDefault:!1}}}},objClassName:"TabItem"};i.tabsSettings&&"object"===jQuery.type(i.tabsSettings)&&(n=jQuery.extend(!0,{},i.tabsSettings)),delete i.tabsSettings,window.AweBuilderSettings.elements.el_tab_item=a,t.call(this,i),this.tabsSettings=n,this.get("content").setContainer(this),t.prototype.initialize.call(this,i)}return __extends(a,t),a.prototype.initialize=function(e){},a.prototype.createView=function(){this.view=new i({model:this})},a.prototype.getType=function(){return"el_tab_item"},a.prototype.getTabsSettings=function(){return this.tabsSettings},a.prototype.setTabsSettings=function(e,t){this.tabsSettings=e},a.prototype.createNavigatorView=function(){this.navigatorView=new n({model:this})},a.prototype.clone=function(){var e=this.toJSON(),t=this.get("content").clone();return e.tabsSettings=this.tabsSettings,e.content=t,new a(e)},a.type="element_tab",a}(e.Element);e.TabItem=t;var i=function(i){function n(e){if(void 0==e||void 0===e.model||!(e.model instanceof t))throw Error("Model of thi view must be an instance of TabItem class.");var n=window.AweBuilderSettings.elementsTemplate.el_tabs;if(!n||!n.title)throw Error("You must create template for tabs element");var a=e.model,o=a.getTabsSettings(),s=o.title.settings.type,l=o.title.settings.iconPosition,r="top"===l||"bottom"===l?" ac-icon--block":"",c={title:a.get("title"),id:a.cid,disableIcon:-1===s.indexOf("icon"),iconClasses:""+a.getSettingsAttr("main.settings.icon")+r,disableText:-1===s.indexOf("text"),iconPosition:l};e.el=jQuery(_.template(n.title)(c)),i.call(this,e)}return __extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.listenTo(this.model,"change",this.applyChanged);var t=this.el,n=e._jQuery;n(e._window.document).click(function(e){var i=jQuery(".js-ac-tab__item-title",t),a=n(".js-ac-tab__item-title",t);0===n(e.target).closest(a).length&&i.hasClass("js-editing-title")&&i.trigger("blur",i.text())})},n.prototype.events=function(){return jQuery.extend({},i.prototype.events.call(this),{"click .js-ac-tab__item-icon":"onIconClick","click .js-ac-tab__item-title":"onTitleClick","blur .js-ac-tab__item-title":"onTitleBlur","keydown .js-ac-tab__item-title":"onTitleKeydown","click .js-ac_inline-control li":"onControllerClick"})},n.prototype.onTitleClick=function(e){e.preventDefault(),jQuery(e.target).attr("contenteditable","true").addClass("js-editing-title").focus(),this.model.getCollection().getContainer().getView().disableSortTabs()},n.prototype.onTitleKeydown=function(e){var t=e.which|e.keyCode,i=this.model.get("title");switch(t){case 13:e.preventDefault();var n=jQuery(e.target).text().trim();n!=i&&jQuery(e.target).trigger("blur",n);break;case 27:jQuery(e.target).text(i).blur()}},n.prototype.onTitleBlur=function(e,t){this.model.getCollection().getContainer().getView().enableSortTabs(),void 0===t&&void 0!==e.isTrigger||this.model.set("title",jQuery(e.target).removeClass("js-editing-title").text().trim())},n.prototype.onIconClick=function(){var e=this.model.getNavigatorPanel(),t=e?e.getBuilder():void 0,i=t?t.getPanel("iconSetting"):void 0;if(i){var n=this.$el.offset(),a=jQuery.extend({},n,{bottom:n.top+this.$el.height(),center:n.left+this.$el.width()/2});i.setActiveModel(this.model,"main.settings.icon",a)}},n.prototype.onControllerClick=function(e){e.preventDefault(),e.stopPropagation();var t=this.model;if(/clone/.test(jQuery(e.target).attr("class"))){var i=t.clone(),n=t.collection.indexOf(t);i.setNavigatorPanel(t.getNavigatorPanel()),i.set("title",t.get("title")+"'clone"),t.collection.add(i,{at:n+1})}else t.collection.remove(t)},n.prototype.renderContent=function(){var e=window.AweBuilderSettings.elementsTemplate.el_tabs;if(e&&e.content){this.$content=jQuery(e.content).attr("id","js-ac-tab__item-"+this.model.cid).hide();var t=jQuery(".js-ac-tab__panel",this.$content).length?jQuery(".js-ac-tab__panel",this.$content):this.$content,i=this.model.get("content").getView();i.setAllowUpdateDeleteBtn(!0),t.append(i.$el).addClass("js-content-object")}else console.log(this.translate("You must define js template for tab's content of tabs element."));jQuery("a",this.getItemWrapper()).append('\n                <div class="js-ac_inline-control ac_inline-control">\n                    <ul>\n                        <li title="'+this.translate("Clone")+'" class="js-ac_inline-control-clone"><i class="acicon acicon-clone"></i></li>\n                        <li title="'+this.translate("Clone")+'" class="js-ac_inline-control-del"><i class="acicon acicon-del"></i></li>\n                    </ul>\n                </div>')},n.prototype.getItemWrapper=function(){var e=jQuery(".js-ac-tab__item",this.$el);return e.length?e:this.$el},n.prototype.getPanelWrapper=function(){var e=jQuery(".js-ac-tab__panel",this.$content);return e.length?e:this.$content},n.prototype.applyChanged=function(e,t){var i=this,n=e.changedAttributes();jQuery.map(n,function(t,n){switch(n){case"title":jQuery(".js-ac-tab__item-title",i.$el).html(t);break;case"content":i.getPanelWrapper().empty().append(e.get("content").getView().$el)}})},n.prototype.renderSettingsChange=function(e,t,n,a){i.prototype.renderSettingsChange.call(this,e,t,n,a);var o=e.split(".");if(o&&o[1]&&"settings"===o[1]&&o[2])switch(o[2]){case"icon":var s=this.model.getSettingsAttr(e,n);jQuery("i.js-ac-tab__item-icon",this.el).removeClass("acicon acicon-clone").removeClass(s).addClass(t)}},n}(e.ElementView);e.TabItemView=i;var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onTitleMouseDown=function(t){e.prototype.onTitleMouseDown.call(this,t),t.isTrigger||jQuery("> a",this.model.getView().$el).trigger("click")},t}(e.NavigatorView);e.TabItemNavigatorView=n;var a=function(i){function n(n,a){void 0===a&&(a={});var o;void 0!==a.tabsSettings&&(o="object"!==jQuery.type(a.tabsSettings)?e.parseJSON(a.tabsSettings):jQuery.extend(!0,{},a.tabsSettings)),"array"===jQuery.type(n)&&jQuery.each(n,function(e,i){i instanceof t?i.setTabsSettings(o):(i.tabsSettings=o,n[e]=new t(i))}),i.call(this,n,a)}return __extends(n,i),n.prototype.init=function(t,i){void 0!==i.tabsSettings&&("object"!==jQuery.type(i.tabsSettings)?this.tabsSettings=e.parseJSON(i.tabsSettings):this.tabsSettings=jQuery.extend(!0,{},i.tabsSettings))},n.prototype.getTabsSettings=function(){return this.tabsSettings},n.prototype.setTabsSettings=function(e,t){this.tabsSettings=e,this.each(function(){this.setTabsSettings(e,t)})},n.prototype.createView=function(){this.view=new o({collection:this,className:"js-ac-tab ac-tab"})},n.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(t,i){e.push(i.clone())}),new n(e,{tabsSettings:this.tabsSettings})},n}(e.ContentObjects);e.TabItems=a;var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(){var e=this,t=window.AweBuilderSettings.elementsTemplate.el_tabs;if(t&&t.elementWrapper&&(this.$el=jQuery(t.elementWrapper)),t&&t.titleWrapper&&t.contentWrapper&&t.title){var i=jQuery(".js-ac-tab",this.$el);0===i.length&&(i=this.$el),i.append(t.titleWrapper);var n=this.collection.getTabsSettings(),a=n.main.settings.navigatorPosition;"bottom"===a?i.prepend(t.contentWrapper):i.append(t.contentWrapper),this.$headerWrapper=jQuery(".js-ac-tab__nav",this.$el).addClass("ac-tab__nav--"+a),this.$contentWrapper=jQuery(".js-ac-tab__content",this.$el).addClass("ui-sortable"),this.collection.each(function(t,i){var n=t.getView();e.$headerWrapper.append(n.$el),e.$contentWrapper.append(n.$content)});var o=jQuery(_.template(t.title)({id:1,title:"Add button",iconClasses:"acicon",disableText:!1,disableIcon:!1,iconPosition:"top"}));o.addClass("js-new-tab").removeClass("js-ac-tab__item ac-tab__item").html('<a href="#"><i class="acicon acicon-plus"></i></a>'),this.$headerWrapper.append(o)}else console.log("You must define js template for tabs element.");return this},t.prototype.listenAddObject=function(e,t,i){if("view"!==i.source){var n=e.getView();n&&(i&&void 0!==i.index?jQuery(".js-ac-tab__nav:first .js-ac-tab__item:eq("+(i.index-1)+")",this.$el).after(n.$el):jQuery(".js-ac-tab__nav:first .js-new-tab",this.$el).before(n.$el),this._$(".js-ac-tab__nav",this.el).sortable("refresh"),this.$contentWrapper.append(n.$content))}},t.prototype.listenRemoveObject=function(e,t,i){if("sort"!==i.action){var n=e.getView();n&&(n.$el.remove(),n.$content.remove())}},t}(e.ContentObjectsView);e.TabItemsView=o;var s=function(i){function n(n){void 0===n?n={}:"string"==typeof n&&(n={machineName:"el_tabs"});var o=window.AweBuilderSettings.elements.el_tabs,s=e.ContentObject.generateObjectSettings("el_tabs",o.data);switch(jQuery.type(n.settings)){case"string":n.settings=e.parseJSON(n.settings);break;case"object":break;default:n.settings={}}n.settings=jQuery.extend(!0,e.Element.generateDefaultCustomSettings(s),n.settings),void 0===n.content&&(n.content=[new t({title:"Tab1",tabsSettings:n.settings})]),n.content instanceof a||(n.content=new a(n.content,{tabsSettings:n.settings})),i.call(this,n)}return __extends(n,i),n.prototype.initialize=function(e){this.get("content").setContainer(this),i.prototype.initialize.call(this,e)},n.prototype.createView=function(){this.view=new l({model:this})},n}(e.Element);e.TabsElement=s;var l=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype.initialize=function(){this.listenTo(this.model.get("content"),"add",this.listenAddTab),e.prototype.initialize.call(this)},i.prototype.renderContent=function(){var e=this.model.get("content");e&&e.getView&&this.$el.append(e.getView().$el);var t,i=this;t=setInterval(function(){i.$el.parents("body").length&&(clearInterval(t),jQuery(".js-ac-tab__item:first a",i.$el).trigger("click"),i.initSortTabs())},100)},i.prototype.events=function(){return jQuery.extend({},e.prototype.events.call(this),{"click .js-new-tab:first > a":"addNewTab","click .js-ac-tab__item a":"activateTab"})},i.prototype.initSortTabs=function(){var e=this,t=e.model.getSettingsAttr("main.settings.navigatorPosition");this._$(".js-ac-tab__nav",this.el).sortable({items:".js-ac-tab__item",axis:"top"===t||"bottom"===t?"x":"y",start:function(e,t){t.item.data("prevPos",t.item.index())},update:function(t,i){var n=e.model.get("content"),a=i.item.data("prevPos"),o=n.at(a),s=i.item.index();o=n.remove(o,{action:"sort"}),n.add(o,{at:s,source:"view"})}})},i.prototype.disableSortTabs=function(){this._$(".js-ac-tab__nav",this.el).sortable("disable")},i.prototype.enableSortTabs=function(){this._$(".js-ac-tab__nav",this.el).sortable("enable")},i.prototype.addNewTab=function(e){e.preventDefault();var i=this.model.get("content"),n=new t({title:this.translate("Tab")+(i.length+1),tabsSettings:this.model.get("settings")});n.setNavigatorPanel(this.model.getNavigatorPanel()),i.add(n)},i.prototype.activateTab=function(e){e.preventDefault();var t=jQuery(e.target).parents(".js-ac-tab__item"),i=jQuery("a",t);if(!i.hasClass("active")){var n=jQuery(".js-ac-tab__item .active",this.$el);n.removeClass("active ac-active"),jQuery(n.attr("href"),this.$el).hide(),i.addClass("active ac-active"),jQuery(i.attr("href"),this.$el).show()}var a=this.model.get("content").at(t.index()),o=a?a.getNavigatorView():void 0;o&&jQuery("> .js-nav-item-header > .js-navigator-item-title",o.$el).trigger("mousedown");var s=this.model;s.setResponsiveMode(s.getResponsiveMode())},i.prototype.listenAddTab=function(){this._$(".js-ac-tab__nav",this.el).sortable("refresh")},i.prototype.changeSortAxis=function(e){"x"!==e&&"y"!==e||this._$(".js-ac-tab__nav",this.el).sortable("option","axis",e)},i}(e.ElementView);e.TabsElementView=l}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(i){void 0===i&&(i={}),i.content instanceof e.Columns||(i.content=new e.Columns(i.content)),i.machineName="el_accordion_item";var n,a={data:{main:{style:!1,animation:!1,settings:{icon:{type:"storage",defaultValue:"acicon acicon-pen",compareWithDefault:!1}}}},objClassName:"AccordionItem"};i.accordionSettings&&"object"===jQuery.type(i.accordionSettings)&&(n=jQuery.extend(!0,{},i.accordionSettings)),window.AweBuilderSettings.elements.el_accordion_item=a,t.call(this,i),this.accordionSettings=n,this.get("content").setContainer(this),t.prototype.initialize.call(this,i)}return __extends(n,t),n.prototype.initialize=function(e){},n.prototype.getType=function(){return"el_accordion_item"},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.getAccordionSettings=function(){return this.accordionSettings},n.prototype.setAccordionSettings=function(e){this.accordionSettings=e},n.type="el_accordion_item",n}(e.Element);e.AccordionItem=t;var i=function(e){function t(t){if(void 0===t||void 0===t.model)throw Error("You must set model to render view");var i=window.AweBuilderSettings.elementsTemplate.el_accordion;if(void 0===i||void 0===i.accordionItem)throw Error("You must define template js file and template for accordion's item element");var n=t.model.getAccordionSettings(),a=n.main.settings,o=n.title.settings,s="top"===o.iconPosition||"bottom"===o.iconPosition?" ac-icon--block":"";t.el=jQuery(_.template(i.accordionItem)({enableTextTitle:/text/.test(o.type),title:t.model.get("title"),itemID:"#ac-accordion__header-"+t.model.cid,enableTitleIcon:/icon/.test(o.type),titleIconPosition:o.iconPosition,titleIconClasses:t.model.getSettingsAttr("main.settings.icon")+""+s,onOffIcon:a.onOffIcon}))[0],t.className="js-ac-accordion__panel ac-accordion__panel",e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){this.listenTo(this.model,"change:title",this.changeTitle),e.prototype.initialize.call(this)},t.prototype.renderContent=function(){var e=this.model.get("content");e.getView().setAllowUpdateDeleteBtn(!0),jQuery(".js-ac-accordion__panel-body",this.$el).append(e.getView().$el).hide()},t.prototype.renderControllers=function(){jQuery(".js-ac-accordion__header a",this.$el).after('<div class="js-ac_inline-control ac_inline-control">\n                    <ul>\n                        <li class="js-item-clone" title="'+this.translate("Clone")+'"><i class="acicon acicon-clone"></i></li>\n                        <li class="js-item-del" title="'+this.translate("Delete")+'"><i class="acicon acicon-del"></i></li>\n                    </ul>\n                </div>');var e=this;jQuery(".js-ac_inline-control:first li",this.$el).click(function(t){t.preventDefault();var i=e.model.collection,n=e.model.get("title"),a=i.indexOf(e.model);if(jQuery(this).hasClass("js-item-clone")){var o={title:n+"'s clone",accordionSettings:e.model.getAccordionSettings()};i.add(e.model.clone(o),{at:a+1})}else i.remove(e.model)});var e=this;jQuery(document).click(function(t){0===jQuery(t.target).closest(jQuery(".js-ac-accordion__header:first .js-ac-accordion__title",e.$el)).length&&jQuery(".js-ac-accordion__header:first .js-ac-accordion__title",e.$el).trigger("blur",jQuery(".js-ac-accordion__header:first .js-ac-accordion__title",e.$el).text())})},t.prototype.events=function(){return jQuery.extend({},e.prototype.events.call(this),{"click .js-ac-accordion__header:first .js-ac-accordion__title-icon":"onChangeTitleIcon","click .js-ac-accordion__header:first .js-ac-accordion__title":"onFocusTitleText","blur .js-ac-accordion__header:first .js-ac-accordion__title":"onBlurTitleText","keydown .js-ac-accordion__header:first .js-ac-accordion__title":"onKeyDownTitleText"})},t.prototype.changeTitle=function(){var e=this.model.get("title");jQuery(".js-ac-accordion__title",this.$el).text(e)},t.prototype.renderSettingsChange=function(t,i,n,a){e.prototype.renderSettingsChange.call(this,t,i,n,a);var o=t.split(".");if(o&&o[1]&&"settings"===o[1]&&o[2])switch(o[2]){case"icon":var s=this.model.getSettingsAttr(t,n);jQuery(".js-ac-accordion__header:first .js-ac-accordion__title-icon",this.el).removeClass("acicon acicon-pen").removeClass(s).addClass(i)}},t.prototype.onChangeTitleIcon=function(e){e.preventDefault();var t=this.getBuilder(),i=t?t.getPanel("iconSetting"):null;if(i){var n=jQuery(e.target),a=n.offset(),o=jQuery.extend({},a,{bottom:a.top+n.height(),center:a.left+n.width()/2});i.setActiveModel(this.model,"main.settings.icon",o)}},t.prototype.onFocusTitleText=function(e){e.preventDefault(),e.stopPropagation(),jQuery(e.target).attr("contenteditable","true").focus()},t.prototype.onBlurTitleText=function(e,t){if(jQuery(e.target).attr("contentediable","false"),e.isTrigger&&void 0===t){var i=this.model.get("title");jQuery(e.target).text(i)}else this.model.set("title",jQuery(e.target).text())},t.prototype.onKeyDownTitleText=function(e){switch(e.which|e.keyCode){case 13:e.preventDefault(),jQuery(e.target).trigger("blur",jQuery(e.target).text());break;case 27:e.preventDefault(),jQuery(e.target).trigger("blur")}},t}(e.ElementView);e.AccordionItemView=i;var n=function(i){function n(n,a){void 0===a&&(a={}),a.model=t;var o;void 0!==a.accordionSettings&&(o="object"!==jQuery.type(a.accordionSettings)?e.parseJSON(a.accordionSettings):jQuery.extend(!0,{},a.accordionSettings)),"array"===jQuery.type(n)&&jQuery.each(n,function(e,i){i instanceof t?i.setAccordionSettings(o):(i.accordionSettings=o,n[e]=new t(i))}),i.call(this,n,a),this.accordionSettings=o}return __extends(n,i),n.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(t,i){e.push(i.clone())}),new n(e,{accordionSettings:this.accordionSettings})},n.prototype.createView=function(){this.view=new a({collection:this})},n}(e.ContentObjects);e.AccordionItems=n;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.listenAddObject=function(e,t,i){if("view"!==i.source){var n=e.getView().$el;switch(i.index){case 0:this.$el.prepend(n);break;case void 0:case t.length-1:this.$el.append(n);break;default:jQuery(".js-ac-accordion__panel:eq("+(i.index-1)+")",this.$el).after(n)}}},t.prototype.collectionReady=function(){this._$(this.el).sortable("option","handle",".js-ac-accordion__header")},t.prototype.beforeSort=function(t,i){e.prototype.beforeSort.call(this,t,i),i.helper.addClass("ac_helper--element"),i.placeholder.css("z-index",9)},t}(e.ContentObjectsView);e.AccordionItemsView=a;var o=function(i){function a(a){void 0===a?a={}:"string"==typeof a&&(a={machineName:"el_accordion"});var o=window.AweBuilderSettings.elements.el_accordion,s=e.ContentObject.generateObjectSettings("el_accordion",o.data);switch(jQuery.type(a.settings)){case"string":a.settings=e.parseJSON(a.settings);break;case"object":break;default:a.settings={}}if(a.settings=jQuery.extend(!0,e.Element.generateDefaultCustomSettings(s),a.settings),void 0===a.content){var l=new t({title:"Item 1",accordionSettings:a.settings}),r=new t({title:"Item 2",accordionSettings:a.settings});a.content=[l,r]}a.content instanceof n||(a.content=new n(a.content,{accordionSettings:a.settings})),i.call(this,a)}return __extends(a,i),a.prototype.initialize=function(e){this.get("content").setContainer(this),i.prototype.initialize.call(this,e)},a.prototype.createView=function(){this.view=new s({model:this})},a}(e.Element);e.AccordionElement=o;var s=function(e){function i(t){var i=window.AweBuilderSettings.elementsTemplate.el_accordion;i&&i.elementWrapper&&(t.el=jQuery(i.elementWrapper)[0]),e.call(this,t)}return __extends(i,e),i.prototype.initialize=function(){this.$panelWrapper=jQuery(".js-ac-accordion",this.$el).length?jQuery(".js-ac-accordion",this.$el):this.$el,e.prototype.initialize.call(this)},i.prototype.renderContent=function(){var e=this.model.get("content");e&&e.getView&&this.$el.append(e.getView().$el),this.$panelWrapper.append('\n                <div class="js-new-btn ac-accordion__add-btn">\n                    <a href="#">+ '+this.translate("Add Accordion")+"</a>\n                </div>"),this.$el.addClass("ac_element"),jQuery(".js-ac-accordion__header:first a",this.$el).trigger("click")},i.prototype.events=function(){return jQuery.extend({},e.prototype.events.call(this),{"click > .js-new-btn > a":"addNewItem","click .js-ac-accordion__header a":"onItemHeadingClick"})},i.prototype.addNewItem=function(e){e.preventDefault();var i=this.model.get("content").length+1,n=new t({title:"Item "+i,accordionSettings:this.model.get("settings")});n.setNavigatorPanel(this.model.getNavigatorPanel()),n.setResponsiveMode(this.model.getResponsiveMode()),this.model.get("content").add(n)},i.prototype.onItemHeadingClick=function(e){e.preventDefault();var t=this.model.getSettingsAttr("main.settings.collapsible"),i=jQuery(e.target).parents(".js-ac-accordion__panel:first"),n=jQuery(".js-ac-accordion__panel-body:first",i),a=this.model.getSettingsAttr("main.settings.duration");if(a||(a=200),t){jQuery(e.target).toggleClass("active ac-active");var o=jQuery(".js-ac-accordion__header-icon",i);jQuery(e.target).hasClass("active")?(n.slideUp(a),o.removeClass(o.data("collapse-icon")).addClass(o.data("expand-icon"))):(n.slideDown(a),o.removeClass(o.data("expand-icon")).addClass(o.data("collapse-icon")))}else if(!jQuery(e.target).hasClass("active")){var s=jQuery(".js-ac-accordion__header a.active:first",this.$el).removeClass("active ac-active"),l=s.parents(".js-ac-accordion__panel:first"),o=jQuery(".js-ac-accordion__header-icon",l);o.removeClass(o.attr("data-expand-icon")).addClass(o.attr("data-collapse-icon")),jQuery(".js-ac-accordion__panel-body:first",l).slideUp(a),jQuery(e.target).addClass("active ac-active"),o=jQuery(".js-ac-accordion__header-icon",i),o.removeClass(o.attr("data-collapse-icon")).addClass(o.attr("data-expand-icon")),n.slideDown(a);var r=this.model.get("content"),c=r.get(i.data("cid"));c.setResponsiveMode(this.model.getResponsiveMode())}},i.prototype.renderSettingsChange=function(t,i,n,a){if(e.prototype.renderSettingsChange.call(this,t,i,n,a),t.indexOf("settings")){var o=this.model;this.model.get("content").each(function(e,t){e.setAccordionSettings(o.get("settings"))})}},i}(e.ElementView);e.AccordionElementView=s}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(i){window.AweBuilderSettings.elements.el_hovercard_item={data:{main:{}},objClassName:"CardItem"},void 0===i&&(i={}),void 0===i.content&&(i.content=new e.Columns),i.machineName="el_hovercard_item",t.call(this,i)}return __extends(n,t),n.prototype.init=function(e){this.get("content").setContainer(this),this.allowShowHideResponsive=!1,t.prototype.init.call(this,e)},n.prototype.createView=function(){this.view=new i({model:this})},n.type="el_hovercard_item",n}(e.Element);e.CardItem=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){return t.prototype.initialize.call(this)},i.prototype.renderContent=function(){var t=this.model.get("content"),i=this.model.get("name");this.$el.addClass("ac-hovercard__item js-ac-hovercard__item--"+i+" ac-hovercard__item--"+i),(t instanceof e.ContentObject||t instanceof e.ContentObjects)&&this.$el.append(t.getView().$el)},i.prototype.getRenderControllersData=function(){return[t.prototype.getRenderControllersData.call(this)[0]]},i}(e.ElementView);e.CardItemView=i;var n=function(e){function i(i,n){void 0===n&&(n={}),n.model=t,e.call(this,i,n)}return __extends(i,e),i.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.allowSort=!1},i}(e.Elements);e.CardItems=n;var a=function(e){function i(i){if(void 0===i&&(i={}),void 0===i.content){var a=new t({name:"front",title:"Front"}),o=new t({name:"back",title:"Back"});i.content=[a,o]}i.content instanceof n||(i.content=new n(i.content)),e.call(this,i)}return __extends(i,e),i.prototype.initialize=function(t){this.get("content").setContainer(this),e.prototype.initialize.call(this,t)},i.prototype.createView=function(){this.view=new o({model:this})},i}(e.Element);e.HoverCardElement=a;var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.activeCard=this.model.get("content").getElementsByAttribute("name","front")[0],e.prototype.initialize.call(this)},t.prototype.getRenderControllersData=function(){var t=e.prototype.getRenderControllersData.call(this);return t.push({name:"rotate",title:this.translate("Rotate"),icon:"rotate"}),t},t.prototype.renderContent=function(){var e=window.AweBuilderSettings.elementsTemplate.el_hover_card;if(!e||!e.elementWrapper)throw Error("You must define elementWrapper template for HoverCardElement.");this.$el.append(e.elementWrapper),this.$cardWrapper=jQuery(".js-ac-hovercard:first",this.$el),this.$cardWrapper.append(this.model.get("content").getView().$el),this.renderCards()},t.prototype.renderCards=function(){this.model.getSettingsAttr("main.settings.showBackCard")?(jQuery(".js-ac-hovercard__item--back:first",this.$cardWrapper).show(),jQuery(".js-ac-hovercard__item--front:first",this.$cardWrapper).hide()):(console.log(jQuery(".js-ac-hovercard__item--back:first",this.$cardWrapper)),jQuery(".js-ac-hovercard__item--back:first",this.$cardWrapper).hide(),jQuery(".js-ac-hovercard__item--front:first",this.$cardWrapper).show())},t.prototype.events=function(){return jQuery.extend({},e.prototype.events.call(this),{"click .js-ac-control-rotate":"onRotationControllerClick"})},t.prototype.onRotationControllerClick=function(e){e.preventDefault();var t="front"===this.activeCard.get("name")?"back":"front";this.activeCard.getView().$el.hide().css("position",""),this.activeCard=this.model.get("content").getElementsByAttribute("name",t)[0],this.activeCard.getView().$el.show().css("position","relative")},t.prototype.renderSettingsChange=function(t,i,n,a){e.prototype.renderSettingsChange.call(this,t,i,n,a),this.renderCards()},t}(e.ElementView);e.HoverCardElementView=o}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function a(i){window.AweBuilderSettings.elements.el_carousel_item={defaultPart:"content",data:{main:{style:!1,animation:!1,settings:{}},content:{title:"Content",selector:".js-owl-item",style:{enabled:["font","background","border","padding","margin","shadow"],status:["normal","hover"]},animation:!1,settings:{}}},objClassName:"CarouselItem"},void 0===i&&(i={}),void 0===i.content&&(i.content=new e.Columns),i.machineName="el_carousel_item",t.call(this,i),this.get("content").setContainer(this)}return __extends(a,t),a.prototype.init=function(e){this.allowShowHideResponsive=!1,t.prototype.init.call(this,e)},a.prototype.createView=function(){this.view=new i({model:this})},a.prototype.createNavigatorView=function(){this.navigatorView=new n({model:this})},a.prototype.clone=function(){var e=this.toJSON(),t=this.get("content").clone();return e.content=t,new a(e)},a.type="el_carousel_item",a}(e.Element);e.CarouselItem=t;var i=function(e){function i(i){if(void 0==i||void 0===i.model||!(i.model instanceof t))throw Error("Model of thi view must be an instance of CarouselItem class.");e.call(this,i)}return __extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.listenTo(this.model,"change",this.applyChanged)},i.prototype.renderContent=function(){var e=this.model.get("content").getView();e.setAllowUpdateDeleteBtn(!0),this.$el.addClass("item js-owl-item").append(e.$el)},i.prototype.getPanelWrapper=function(){var e=jQuery(".js-owl-item",this.$el);return e.length?e:this.$el},i.prototype.applyChanged=function(e,t){var i=this,n=e.changedAttributes();jQuery.map(n,function(t,n){switch(n){case"content":i.getPanelWrapper().empty().append(e.get("content").getView().$el)}})},i}(e.ElementView);e.CarouselItemView=i;var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onTitleMouseDown=function(t){e.prototype.onTitleMouseDown.call(this,t),t.isTrigger||jQuery("> a",this.model.getView().$el).trigger("click")},t}(e.NavigatorView);e.CarouselItemNavigatorView=n;var a=function(e){function i(i,n){void 0===n&&(n={}),n.model=t,e.call(this,i,n)}return __extends(i,e),i.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.allowSort=!1},i.prototype.createView=function(){this.view=new o({collection:this,className:"owl-carousel js-owl-carousel"})},i.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(t,i){e.push(i.clone())}),new i(e)},i}(e.Elements);e.CarouselItems=a;var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(){var e=this,t=window.AweBuilderSettings.elementsTemplate.el_carousel;if(t&&t.elementWrapper&&(this.$el=jQuery(t.elementWrapper)),t&&t.contentWrapper){var i=jQuery(".js-owl-carousel",this.$el);0===i.length&&(i=this.$el),i.append(t.contentWrapper).addClass("ui-sortable"),this.$contentWrapper=jQuery(".js-owl-carousel",this.$el),this.collection.each(function(t,i){var n=t.getView();e.$contentWrapper.append(n.$el)})}else console.log("You must define js template for tabs element.");return this},t.prototype.listenAddObject=function(e,t,i){var n=e.getView(),a=i.at?i.at:i.index;if(n){var o=jQuery(".js-owl-carousel:first .owl-item:first",this.$el).width(),s=jQuery('<div class="owl-item" style="width:'+o+'px;"></div>').append(n.$el);void 0==a||a==t.length-1?jQuery(".owl-stage",this.$el).append(s):jQuery(".js-owl-carousel:first .owl-item:eq("+a+")",this.$el).before(s)}},t.prototype.listenRemoveObject=function(e,t,i){var n=e.getView();n&&(n.$el.parent().hasClass("owl-item")?n.$el.parent().remove():n.$el.remove())},t}(e.ContentObjectsView);e.CarouselItemsView=o;var s=function(e){function i(i){if(void 0===i&&(i={}),void 0===i.content){var n=new t({name:"carouselItem",title:"Carousel Item"});i.content=[n]}i.content instanceof a||(i.content=new a(i.content)),e.call(this,i)}return __extends(i,e),i.prototype.initialize=function(t){this.get("content").setContainer(this),e.prototype.initialize.call(this,t)},i.prototype.createView=function(){this.view=new l({model:this})},i}(e.Element);e.CarouselElement=s;var l=function(i){function n(){i.apply(this,arguments)}return __extends(n,i),n.prototype.initialize=function(){return this.listenTo(this.model.get("content"),"add",this.listenAddCarouselItem),this.listenTo(this.model.get("content"),"remove",this.listenRemoveCarouselItem),this.listtenDragElementToCarousel(),i.prototype.initialize.call(this)},n.prototype.renderContent=function(){this.$el.append(this.model.get("content").getView().$el);var t,i=this;e._jQuery;t=setInterval(function(){if(i.$el.parents("body").length){clearInterval(t);var e=i.model.get("settings");i.initCarousel(i.el,{main:e.main.settings}),i.checkLastCarouselItem()}},100)},n.prototype.listtenDragElementToCarousel=function(){var e=this;jQuery.each(this.model.get("content").models,function(){jQuery.each(this.get("content").models,function(){e.listenTo(this.get("content"),"add",e.listenDragElementToColumn)})})},n.prototype.checkLastCarouselItem=function(){var t=this.model.get("content").length,i=this.model.get("content").models[t-1],n=!1;jQuery.each(i.get("content").models,function(){this.get("content").length&&(n=!0)}),n&&(this.addNewCaroudelItem(),e._jQuery(".js-owl-carousel",this.el).trigger("to.owl.carousel",[0,0,!0]))},n.prototype.listenAddCarouselItem=function(e,t,i){var n=i.at?i.at:i.index;this.newItemPosition=void 0==n?t.length:n-1,this.initCarousel(this.el,{}),this.listenTo(e.get("content"),"add",this.listentAddColumn)},n.prototype.listentAddColumn=function(e){this.listenTo(e.get("content"),"add",this.listenDragElementToColumn)},n.prototype.listenRemoveCarouselItem=function(){this.initCarousel(this.el,{})},n.prototype.listenDragElementToColumn=function(e,t,i){var n=e.getView().$el.closest(".owl-item"),a=jQuery(".owl-item",this.$el);n.index()==a.length-1&&this.addNewCaroudelItem()},n.prototype.addNewCaroudelItem=function(){var e=this.model.get("content"),i=this,n=new t({title:this.translate("Carousel Item ")+(e.length+1),name:"carouselItem"});n.setNavigatorPanel(this.model.getNavigatorPanel()),jQuery.each(n.get("content").models,function(){i.listenTo(this.get("content"),"add",i.listenDragElementToColumn)}),i.newItemPosition=e.length;var a=this.model;n.setResponsiveMode(a.getResponsiveMode()),e.add(n)},n.prototype.initCarousel=function(t,i){var n,a=e._jQuery,o=this;n=jQuery(t).data("carousel_option")?jQuery(t).data("carousel_option"):{main:{view_items:1,effect:"none",show_control:!0,auto_play:!1,stop_hover:!1,speed:4e3,transpeed:400,nav:"none",thumb_display:5,position:"bottom",mouse_drag:!1,touch_drag:!0}},i.main&&(n.main=jQuery.extend(n.main,i.main)),jQuery(t).data("carousel_option",n);var s=a(".js-owl-carousel",t);if(s.hasClass("owl-loaded")&&a(s).trigger("destroy.owl.carousel"),a.fn.owlCarousel)this.startCarousel(t,s,n);else{var l;l=setInterval(function(){a.fn.owlCarousel&&(clearInterval(l),o.startCarousel(t,s,n))},100)}},n.prototype.startCarousel=function(t,i,n){var a=e._jQuery,o=this,s="none"!=n.main.nav,l="none"==n.main.effect?"":n.main.effect,r=n.main.lg.view_items?n.main.lg.view_items:n.main.xl.view_items,c=n.main.md.view_items?n.main.md.view_items:r,d={1200:{items:n.main.xl.view_items},992:{items:r},768:{items:c},576:{items:n.main.sm.view_items?n.main.sm.view_items:c},0:{items:n.main.xs.view_items?n.main.xs.view_items:1}};if(a(i).owlCarousel({animateOut:l,responsive:d,nav:n.main.show_control,dots:s,autoplay:!1,autoplayHoverPause:n.main.stop_hover,autoplayTimeout:n.main.speed,autoplaySpeed:n.main.transpeed,mouseDrag:!1,touchDrag:n.main.touch_drag,loop:!1,responsiveClass:!0}),"number"==n.main.nav){var u=1;jQuery(".js-owl-carousel .owl-dot",t).each(function(){jQuery(this).find("span").addClass("dot-number").append(""+u),u++})}if(a(i).on("changed.owl.carousel",function(e){jQuery(".js-ac-carousel__item .active",o.$el).removeClass("active"),jQuery(".js-ac-carousel__item:eq("+e.item.index+") a",o.$el).addClass("active")}),this.newItemPosition>0){var p=n.main.view_items>1?this.newItemPosition:this.newItemPosition-2;i.trigger("to.owl.carousel",[p,0,!0]),this.newItemPosition=0}jQuery(".js-owl-item",i).each(function(){var e=jQuery(this),t=o.model.get("content").get(e.attr("data-cid")),i="js-content-object js-type-"+t.machineName+" js-el-"+t.cid;e.removeClass(i).parent().addClass(i)})},n}(e.ElementView);e.CarouselElementView=l}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function a(i){window.AweBuilderSettings.elements.el_swiper_item={defaultPart:"content",data:{main:{style:{enabled:["font","background","border","padding","margin","shadow"],status:["normal","hover"]},animation:!1,settings:{}}},objClassName:"SwiperItem"},void 0===i&&(i={}),void 0===i.content&&(i.content=new e.Columns),i.machineName="el_swiper_item",t.call(this,i),this.get("content").setContainer(this)}return __extends(a,t),a.prototype.init=function(e){this.allowShowHideResponsive=!1,t.prototype.init.call(this,e)},a.prototype.createView=function(){this.view=new i({model:this})},a.prototype.createNavigatorView=function(){this.navigatorView=new n({model:this})},a.prototype.clone=function(){var e=this.toJSON(),t=this.get("content").clone();return e.content=t,new a(e)},a.type="el_swiper_item",a}(e.Element);e.SwiperItem=t;var i=function(e){function i(i){if(void 0==i||void 0===i.model||!(i.model instanceof t))throw Error("Model of thi view must be an instance of SwiperItem class.");e.call(this,i)}return __extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.listenTo(this.model,"change",this.applyChanged)},i.prototype.renderContent=function(){var e=this.model.get("content").getView();e.setAllowUpdateDeleteBtn(!0),this.$el.addClass("swiper-slide js-swiper-slide").append(e.$el)},i.prototype.getPanelWrapper=function(){var e=jQuery(".js-swiper-slide",this.$el);return e.length?e:this.$el},i.prototype.applyChanged=function(e,t){var i=this,n=e.changedAttributes();jQuery.map(n,function(t,n){switch(n){case"content":i.getPanelWrapper().empty().append(e.get("content").getView().$el)}})},i}(e.ElementView);e.SwiperItemView=i;var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onTitleMouseDown=function(t){e.prototype.onTitleMouseDown.call(this,t),t.isTrigger||jQuery("> a",this.model.getView().$el).trigger("click")},t}(e.NavigatorView);e.SwiperItemNavigatorView=n;var a=function(e){function i(i,n){void 0===n&&(n={}),n.model=t,e.call(this,i,n)}return __extends(i,e),i.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.allowSort=!1},i.prototype.createView=function(){this.view=new o({collection:this,className:"swiper-wrapper js-swiper-wrapper"})},i.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(t,i){e.push(i.clone())}),new i(e)},i}(e.Elements);e.SwiperItems=a;var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(){var e=this,t=window.AweBuilderSettings.elementsTemplate.el_swiper;if(t&&t.elementWrapper&&(this.$el=jQuery(t.elementWrapper)),t&&t.contentWrapper){var i=jQuery(".js-swiper-wrapper",this.$el);0===i.length&&(i=this.$el),i.append(t.contentWrapper).append(t.contentNavigation).addClass("ui-sortable"),this.$contentWrapper=jQuery(".js-swiper-wrapper",this.$el),this.collection.each(function(t,i){var n=t.getView();e.$contentWrapper.append(n.$el)})}else console.log("You must define js template for tabs element.");return this},t.prototype.listenAddObject=function(e,t,i){var n=e.getView(),a=i.at?i.at:i.index;n&&(void 0==a||a==t.length-1?jQuery(".js-swiper-wrapper:first",this.$el).append(n.$el):jQuery(".js-swiper-wrapper:first .js-swiper-slide:eq("+a+")",this.$el).before(n.$el))},t.prototype.listenRemoveObject=function(e,t,i){var n=e.getView();n&&n.$el.remove()},t}(e.ContentObjectsView);e.SwiperItemsView=o;var s=function(i){function n(n){void 0===n&&(n={}),n.machineName="el_swiper";var o=window.AweBuilderSettings.elements.el_swiper,s=e.ContentObject.generateObjectSettings("el_swiper",o.data);switch(jQuery.type(n.settings)){case"string":n.settings=e.parseJSON(n.settings);break;case"object":break;default:n.settings={}}if(n.settings=jQuery.extend(!0,e.Element.generateDefaultCustomSettings(s),n.settings),void 0===n.content){var l=new t({name:"swiperItem",title:"Swiper Item 1"});n.content=[l]}n.content instanceof a||(n.content=new a(n.content)),i.call(this,n)}return __extends(n,i),n.prototype.initialize=function(e){this.get("content").setContainer(this),i.prototype.initialize.call(this,e)},n.prototype.createView=function(){this.view=new l({model:this})},n}(e.Element);e.SwiperElement=s;var l=function(i){function n(){i.apply(this,arguments)}return __extends(n,i),n.prototype.initialize=function(){return this.listenTo(this.model.get("content"),"add",this.listenAddSwiperItem),this.listenTo(this.model.get("content"),"remove",this.listenRemoveSwiperItem),this.listenDragElementToSwiper(),i.prototype.initialize.call(this)},n.prototype.renderContent=function(){this.$el.append(this.model.get("content").getView().$el);var t,i=this;e._jQuery;t=setInterval(function(){if(i.$el.parents("body").length){clearInterval(t);var e=i.model.get("settings");i.initSwiper(i.el,{main:e.main.settings}),i.checkLastSwiperItem()}},100)},n.prototype.listenDragElementToSwiper=function(){var e=this;jQuery.each(this.model.get("content").models,function(){jQuery.each(this.get("content").models,function(){e.listenTo(this.get("content"),"add",e.listenDragElementToColumn)})})},n.prototype.checkLastSwiperItem=function(){var e=this.model.get("content").length,t=this.model.get("content").models[e-1],i=!1;jQuery.each(t.get("content").models,function(){this.get("content").length&&(i=!0)}),i&&this.addNewSwiperItem()},n.prototype.listenAddSwiperItem=function(e,t,i){var n=i.at?i.at:i.index;this.newItemPosition=void 0==n?t.length:n-1,this.initSwiper(this.el,{}),this.listenTo(e.get("content"),"add",this.listentAddColumn)},n.prototype.listentAddColumn=function(e){this.listenTo(e.get("content"),"add",this.listenDragElementToColumn)},n.prototype.listenRemoveSwiperItem=function(){this.initSwiper(this.el,{})},n.prototype.listenDragElementToColumn=function(e,t,i){var n=e.getView().$el.closest(".js-swiper-slide"),a=jQuery(".js-swiper-slide",this.$el);n.index()==a.length-1&&this.addNewSwiperItem()},n.prototype.addNewSwiperItem=function(){var e=this.model.get("content"),i=this,n=new t({title:this.translate("Swiper Item ")+(e.length+1),name:"swiperItem"});n.setNavigatorPanel(this.model.getNavigatorPanel()),jQuery.each(n.get("content").models,function(){i.listenTo(this.get("content"),"add",i.listenDragElementToColumn)}),i.newItemPosition=e.length;var a=this.model;n.setResponsiveMode(a.getResponsiveMode()),e.add(n)},n.prototype.initSwiper=function(t,i){var n,a=e._jQuery,o=this;if(n=jQuery(t).data("swiper_option")?jQuery(t).data("swiper_option"):{main:{xl:{slidesPerView:1,spaceBetween:30},effect:"slide",direction:"horizontal",navigation:!0,autoplay:!1,delay:3e3,speed:200,simulateTouch:!1,loop:!1,pagination:1,paginationType:"bullets",paginationClickable:!0,scrollbar:0}},i.main&&(n.main=jQuery.extend(n.main,i.main)),n.main.delay=parseInt(n.main.delay),n.main.breakpoints){if("string"==jQuery.type(n.main.breakpoints))try{n.main.breakpoints=jQuery.parseJSON(n.main.breakpoints)}catch(e){n.main.breakpoints={},console.log("Responsive Breakpoints swiper data is not json string")}}else{var s={},l=n.main,r={lg:1199,md:991,sm:767,xs:575};l.xl.spaceBetween=l.xl.spaceBetween?l.xl.spaceBetween:30,l.xl.slidesPerView=l.xl.slidesPerView?l.xl.slidesPerView:1,jQuery.each(r,function(e,t){l[e]&&(s[t]={slidesPerView:l[e].slidesPerView?l[e].slidesPerView:l.xl.slidesPerView,spaceBetween:l[e].spaceBetween?l[e].spaceBetween:l.xl.spaceBetween})}),n.main.breakpoints=s}if(jQuery(t).data("swiper_option",n),this.swiper&&this.swiper.destroy(!0,!0),a.fn.swiper)this.startSwiper(t,n);else{var c;c=setInterval(function(){a.fn.swiper&&(clearInterval(c),o.startSwiper(t,n))},100)}},n.prototype.startSwiper=function(t,i){var n=e._jQuery,a=e._window.Swiper;if(n(".swiper-pagination",t).attr("class","swiper-pagination").empty(),i.main.scrollbar?n(".swiper-scrollbar",t).show().removeAttr("style"):n(".swiper-scrollbar",t).hide(),i.main.navigation?n(".swiper-button-next, .swiper-button-prev",t).show():n(".swiper-button-next, .swiper-button-prev",t).hide(),console.log({slidesPerView:i.main.xl.slidesPerView,spaceBetween:i.main.xl.spaceBetween,direction:"horizontal",effect:i.main.effect,autoplay:0,speed:i.main.speed,simulateTouch:i.main.simulateTouch,breakpoints:i.main.breakpoints?i.main.breakpoints:{},loop:!1,pagination:i.main.pagination?".swiper-pagination":null,paginationType:i.main.paginationType,paginationClickable:!0,nextButton:i.main.navigation?".swiper-button-next":null,prevButton:i.main.navigation?".swiper-button-prev":null,scrollbar:i.main.scrollbar?".swiper-scrollbar":null}),this.swiper=new a(".swiper-container",{slidesPerView:i.main.xl.slidesPerView,spaceBetween:i.main.xl.spaceBetween,direction:"horizontal",effect:i.main.effect,autoplay:0,speed:i.main.speed,simulateTouch:i.main.simulateTouch,breakpoints:i.main.breakpoints?i.main.breakpoints:{},loop:!1,pagination:i.main.pagination?".swiper-pagination":null,paginationType:i.main.paginationType,paginationClickable:!0,nextButton:i.main.navigation?".swiper-button-next":null,prevButton:i.main.navigation?".swiper-button-prev":null,scrollbar:i.main.scrollbar?".swiper-scrollbar":null}),this.newItemPosition>0){var o=i.main.slidesPerView>1?this.newItemPosition:this.newItemPosition-2;this.swiper.slideTo(o,0),this.newItemPosition=0}},n}(e.ElementView);e.SwiperElementView=l}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function a(i){window.AweBuilderSettings.elements.el_masonry_item={defaultPart:"content",data:{main:{style:{enabled:["font","background","border","padding","margin","shadow"],status:["normal","hover"]},animation:!1,settings:{}}},objClassName:"MasonryItem"},void 0===i&&(i={}),void 0===i.content&&(i.content=new e.Columns),i.machineName="el_masonry_item",t.call(this,i),this.get("content").setContainer(this)}return __extends(a,t),a.prototype.init=function(e){this.allowShowHideResponsive=!1,t.prototype.init.call(this,e)},a.prototype.createView=function(){this.view=new i({model:this})},a.prototype.createNavigatorView=function(){this.navigatorView=new n({model:this})},a.prototype.clone=function(){var e=this.toJSON(),t=this.get("content").clone();return e.content=t,new a(e)},a.type="el_masonry_item",a}(e.Element);e.MasonryItem=t;var i=function(e){function i(i){if(void 0==i||void 0===i.model||!(i.model instanceof t))throw Error("Model of thi view must be an instance of MasonryItem class.");e.call(this,i)}return __extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.listenTo(this.model,"change",this.applyChanged)},i.prototype.events=function(){return jQuery.extend({},e.prototype.events.call(this),{mouseout:"onMouseOut",mouseover:"onMouseOver","click .js-class-style li":"updateStyleMasonry"})},i.prototype.onMouseOut=function(){jQuery("li.js-settings-list",this.$el).hide()},i.prototype.onMouseOver=function(){jQuery("li.js-settings-list",this.$el).css("display","")},i.prototype.updateStyleMasonry=function(e){var t=jQuery(e.currentTarget);if(!t.hasClass("js-settings-list")){var i=t.closest("ul"),n=t.attr("data-style-item");i.find("li").removeClass("active"),t.addClass("active"),this.model.setStorageValue("class_style",n,"main"),this.$el.removeClass("wide high large extra-large").addClass(n)}},i.prototype.renderContent=function(){var e=this.model.get("content").getView(),t=this.model.getSettingsAttr("main.settings"),i=t.class_style?t.class_style:"";e.setAllowUpdateDeleteBtn(!0),this.$el.addClass("grid-item js-grid-item "+i).append(this.templateItem()).find(".grid-item__content-wrapper").prepend(e.$el)},i.prototype.templateItem=function(){return _.template('<div class="grid-item__inner">                             <div class="grid-item__content-wrapper">                                 <div class="ac_inline-control" style="left:auto; right:0px; display:inline-block">                                    <ul class="js-class-style">                                        <li class="js-settings-list" style="display:none;" title="Settings" data-style-item="settings">                                            <i class="acicon acicon-setting"></i>                                        </li>                                        <li title="Normal" data-style-item="">                                            <i class="acicon acicon-img-normal"></i>                                        </li>                                        <li title="Wide" data-style-item="wide">                                            <i class="acicon acicon-img-wide"></i>                                        </li>                                        <li title="High" data-style-item="high">                                            <i class="acicon acicon-img-high"></i>                                        </li>                                        <li title="Large" data-style-item="large">                                            <i class="acicon acicon-img-large"></i>                                        </li>                                        <li title="Extra large" data-style-item="extra-large">                                            <i class="acicon acicon-img-extralarge"></i>                                        </li>                                    </ul>                                 </div>                             </div>                         </div>')},i.prototype.getPanelWrapper=function(){var e=jQuery(".js-grid-item",this.$el);return e.length?e:this.$el},i.prototype.applyChanged=function(e,t){var i=this,n=e.changedAttributes();jQuery.map(n,function(t,n){switch(n){case"content":i.getPanelWrapper().empty().append(this.templateItem()).find(".grid-item__content-wrapper").prepend(e.get("content").getView().$el)}})},i}(e.ElementView);e.MasonryItemView=i;var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onTitleMouseDown=function(t){e.prototype.onTitleMouseDown.call(this,t),t.isTrigger||jQuery("> a",this.model.getView().$el).trigger("click")},t}(e.NavigatorView);e.MasonryItemNavigatorView=n;var a=function(e){function i(i,n){void 0===n&&(n={}),n.model=t,e.call(this,i,n)}return __extends(i,e),i.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.allowSort=!1},i.prototype.createView=function(){this.view=new o({collection:this})},i.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(t,i){e.push(i.clone())}),new i(e)},i}(e.Elements);e.MasonryItems=a;var o=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.render=function(){var e=this,t=window.AweBuilderSettings.elementsTemplate.el_masonry_grid;if(t&&t.elementWrapper&&(this.$el=jQuery(t.elementWrapper)),t&&t.contentWrapper){var i=jQuery(".js-masonry-content",this.$el);0===i.length&&(i=this.$el),i.append(t.contentWrapper).addClass("ui-sortable"),this.$contentWrapper=jQuery(".js-masonry-content",this.$el),this.collection.each(function(t,i){var n=t.getView();e.$contentWrapper.append(n.$el)})}else console.log("You must define js template for tabs element.");return this},i.prototype.listenAddObject=function(t,i,n){var a=t.getView(),o=n.at?n.at:n.index;if(a){var s=e._jQuery,l=this;void 0==o||o==i.length-1?jQuery(".js-masonry-content:first",this.$el).append(a.$el):jQuery(".js-masonry-content:first .js-grid-item:eq("+o+")",this.$el).before(a.$el),n.notCallAdd||s(".js-masonry-content:first",l.$el[0]).masonry("appended",a.$el).masonry("layout")}},i.prototype.listenRemoveObject=function(e,t,i){var n=e.getView();n&&n.$el.remove()},i}(e.ContentObjectsView);e.MasonryItemsView=o;var s=function(i){function n(n){void 0===n&&(n={}),n.machineName="el_masonry_grid";var o=window.AweBuilderSettings.elements.el_masonry_grid,s=e.ContentObject.generateObjectSettings("el_masonry_grid",o.data);switch(jQuery.type(n.settings)){case"string":n.settings=e.parseJSON(n.settings);break;case"object":break;default:n.settings={}}if(n.settings=jQuery.extend(!0,e.Element.generateDefaultCustomSettings(s),n.settings),void 0===n.content){var l=new t({name:"masonryItem",title:"Masonry Item 1"});n.content=[l]}n.content instanceof a||(n.content=new a(n.content)),i.call(this,n)}return __extends(n,i),n.prototype.initialize=function(e){this.get("content").setContainer(this),i.prototype.initialize.call(this,e)},n.prototype.createView=function(){this.view=new l({model:this})},n}(e.Element);e.MasonryElement=s;var l=function(i){function n(){i.apply(this,arguments)}return __extends(n,i),n.prototype.initialize=function(){return this.listenTo(this.model.get("content"),"add",this.listenAddMasonryItem),this.listenTo(this.model.get("content"),"remove",this.listenRemoveMasonryItem),this.listenDragElementToMasonry(),i.prototype.initialize.call(this)},n.prototype.events=function(){return jQuery.extend({},i.prototype.events.call(this),{"click .js-class-style li":"checkRefreshMasonry"})},n.prototype.checkRefreshMasonry=function(e){jQuery(e.currentTarget).hasClass("js-settings-list")||this.refreshMasonry()},n.prototype.renderContent=function(){this.$el.append(this.model.get("content").getView().$el).addClass("masonry-grid-element");var t,i=this,n=(e._jQuery,this.model.getSettingsAttr("main.settings.column"));n&&jQuery(".js-masonry-grid",this.$el).attr("data-col-lg",n),t=setInterval(function(){if(i.$el.parents("body").length){clearInterval(t);var e=i.model.get("settings");i.checkLastMasonryItem(),i.initMasonry(i.el,{main:e.main.settings})}},100)},n.prototype.listenDragElementToMasonry=function(){var e=this;jQuery.each(this.model.get("content").models,function(){jQuery.each(this.get("content").models,function(){e.listenTo(this.get("content"),"add",e.listenDragElementToColumn)})})},n.prototype.listenDragElementToColumn=function(e,t,i){var n=e.getView().$el.closest(".js-grid-item"),a=jQuery(".js-grid-item",this.$el);n.index()==a.length&&this.addNewMasonryItem()},n.prototype.addNewMasonryItem=function(e){var i=this.model.get("content"),n=this,a=new t({title:this.translate("Masonry Item ")+(i.length+1),name:"masonryItem"});a.setNavigatorPanel(this.model.getNavigatorPanel()),jQuery.each(a.get("content").models,function(){n.listenTo(this.get("content"),"add",n.listenDragElementToColumn)}),n.newItemPosition=i.length;var o=this.model;a.setResponsiveMode(o.getResponsiveMode()),i.add(a,{notCallAdd:e})},n.prototype.checkLastMasonryItem=function(){var e=this.model.get("content").length,t=this.model.get("content").models[e-1],i=!1;jQuery.each(t.get("content").models,function(){this.get("content").length&&(i=!0)}),i&&this.addNewMasonryItem(!0)},n.prototype.listenAddMasonryItem=function(e,t,i){var n=i.at?i.at:i.index;this.newItemPosition=void 0==n?t.length:n-1,this.listenTo(e.get("content"),"add",this.listentAddColumn)},n.prototype.listenRemoveMasonryItem=function(e,t,i){var n=[];jQuery(".js-class-style li.active",this.$el).each(function(e,t){n[e]=jQuery(t).attr("data-style-item")}),this.model.setStorageValue("class_style",n,"main"),this.refreshMasonry()},n.prototype.listentAddColumn=function(e){this.listenTo(e.get("content"),"add",this.listenDragElementToColumn)},n.prototype.initMasonry=function(t,i){var n,a=e._jQuery,o=this;if(n=jQuery(t).data("masonry_option")?jQuery(t).data("masonry_option"):{column_responsive:!1,column:4,column_md:4,column_sm:4,column_xs:4,class_style:[]},i.main&&(n=jQuery.extend(n,i.main)),jQuery(t).data("masonry_option",n),a.fn.masonry)this.startMasonry(t,n);else{var s;s=setInterval(function(){a.fn.masonry&&(clearInterval(s),o.startMasonry(t,n))},100)}},n.prototype.startMasonry=function(t,i){var n=e._jQuery,a=n(".js-masonry-grid",t),o=n(".js-masonry-content",t);i.column_responsive?a.attr("data-col-md",i.column_md).attr("data-col-sm",i.column_sm).attr("data-col-xs",i.column_xs):a.removeAttr("data-col-md data-col-sm data-col-xs"),setTimeout(function(){n.fn.masonry&&o.masonry({columnWidth:".grid-sizer",itemSelector:".grid-item"})},500)},n.prototype.refreshMasonry=function(){var t=e._jQuery,i=this;setTimeout(function(){t(".js-masonry-content",i.el).masonry("layout")},500)},n}(e.ElementView);e.MasonryElementView=l}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var ElementControllersTab=function(_super){function ElementControllersTab(e){var t={title:"Elements",headerHTML:'<i class="acicon acicon-element"></i>',content:void 0!==e?e:[],sortWithType:"element"};_super.call(this,t)}return __extends(ElementControllersTab,_super),ElementControllersTab.prototype.createView=function(){this.view=new ElementControllersTabView({model:this,className:"js-el-tab-content"})},ElementControllersTab.prototype.addElement=function(e,t){if(void 0!==t){var i=this.get("content");t.machineName=e,i.push(t),this.view.updateElement({el:t,added:!0})}},ElementControllersTab.createControllerObject=function($controller){var elName=$controller.attr("data-name"),objClass=$controller.attr("data-class")?$controller.attr("data-class"):"Element";return eval("new AweBuilder."+objClass+"({machineName: elName})")},ElementControllersTab}(AweBuilder.ElTab);AweBuilder.ElementControllersTab=ElementControllersTab;var ElementControllersTabView=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.itemTemplate=_.template('\n                <div class="js-controller-element ac_element-item-wrapper ac_2-col"\n                    data-tab="AweBuilder.ElementControllersTab" data-name="<%= machineName %>" data-title="'+this.translate("<%= title %>")+'">\n                    <div class="ac_element-item">\n                        <div class="ac_element-item-inner">\n                            <% if (icon) { %>\n                            <i class="<%= icon %>"></i>\n                            <% } %>\n                            <% if (image) { %>\n                            <img src="<%= image %>" />\n                            <% } %>\n                            <span><%= title %></span>\n                        </div>\n                    </div>\n                </div>\n            '),e.prototype.initialize.call(this)},t.prototype.renderTabContent=function(){var e=this,t=this.model.get("content"),i=jQuery(".js-ac-row",this.$el);jQuery.each(t,function(){var t=this;if(t.title){void 0===t.icon&&(t.icon=""),void 0===t.image&&(t.image="");var n=jQuery(e.itemTemplate(t));t.objClassName&&n.attr("data-class",t.objClassName),i.append(n)}})},t.prototype.updateElement=function(e){void 0!==e&&e.added&&jQuery(".js-ac-row",this.$el).append(this.itemTemplate(e.el))},t}(AweBuilder.ElTabView);AweBuilder.ElementControllersTabView=ElementControllersTabView}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var CustomElementTab=function(_super){function CustomElementTab(e){var t={title:e.title,machineName:e.machineName,headerHTML:e.icon?'<i class="'+e.icon+'"></i>':e.title,content:void 0!==e.elements?e.elements:{},sortWithType:e.type?e.type:"element"};t.elTemplateKey=void 0!==e.elTemplateKey?e.elTemplateKey:e.machineName,_super.call(this,t)}return __extends(CustomElementTab,_super),CustomElementTab.prototype.init=function(){var e=this,t=this.get("content");"string"===jQuery.type(t)&&jQuery.post(t,function(i){t="object"===jQuery.type(i)?i:"string"===jQuery.type(i)?AweBuilder.parseJSON(i):{},e.set("content",t)},"json").fail(function(){throw Error("Could not get elements in '"+e.get("title")+"' tab in element panel.")}),_super.prototype.init.call(this)},CustomElementTab.prototype.createView=function(){this.view=new CustomElementTabView({model:this})},CustomElementTab.createControllerObject=function($controller){var elName=$controller.attr("data-name"),extraData=AweBuilder.parseJSON($controller.attr("data-extra")),elTemplateKey=$controller.attr("data-template-key"),objClass=$controller.attr("data-class")?$controller.attr("data-class"):"Element";return eval("new AweBuilder."+objClass+"({machineName: elName, extraData: extraData, elTemplateKey: elTemplateKey})")},CustomElementTab}(AweBuilder.ElTab);AweBuilder.CustomElementTab=CustomElementTab;var CustomElementTabView=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var t=this.model.get("sortWithType");this.itemTemplate=_.template('\n                <div class="js-controller-'+t+' ac_element-item-wrapper ac_2-col"\n                    data-tab="AweBuilder.CustomElementTab" data-name="'+this.model.get("machineName")+"\"\n                    data-extra='<%= extraData %>' data-template-key=\""+this.model.get("elTemplateKey")+'"\n                    data-title="'+this.translate("<%= title %>")+'">\n                    <div class="ac_element-item">\n                        <div class="ac_element-item-inner">\n                            <% if (icon) { %>\n                            <i class="<%= icon %>"></i>\n                            <% } %>\n                            <% if (image) { %>\n                            <img src="<%= image %>" />\n                            <% } %>\n                            <span><%= title %></span>\n                        </div>\n                    </div>\n                </div>\n            '),e.prototype.initialize.call(this)},t.prototype.renderTabContent=function(){var e=this,t=this.model.get("content"),i=jQuery(".js-ac-row",this.$el);i.addClass("ac_row--drupal"),jQuery.each(t,function(){var t=this;t.extraData=JSON.stringify(t),void 0===t.icon&&(t.icon=""),void 0===t.image&&(t.image=""),i.append(jQuery(e.itemTemplate(t)))})},t.prototype.activate=function(){},t}(AweBuilder.ElTabView);AweBuilder.CustomElementTabView=CustomElementTabView}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(i,n){t.call(this,{title:"Elements",content:"",settings:{position:"right"}}),this.tabs={};var a=this,o=[];n||(this.tabs.sectionTemplates=new e.TemplatesTab,this.tabs.sectionTemplates.setContainerPanel(this),o.push(this.tabs.sectionTemplates)),this.tabs.elements=new e.ElementControllersTab(i),this.tabs.elements.setContainerPanel(this),o.push(this.tabs.elements),window.AweBuilderSettings.elementTabs&&jQuery.map(window.AweBuilderSettings.elementTabs,function(t,i){var n,s=i;if(void 0===a.tabs[i])n=new e.CustomElementTab(t);else for(var l=1;;){if(s=i+"_"+l,void 0===a.tabs[s]){t.machineName=s,n=new e.CustomElementTab(t);break}l++}n.setContainerPanel(a),o.push(n),a.tabs[s]=n});var s=new e.Tabs({content:o,title:"Tab Elements",settings:{plugin:{active:n?0:1,activate:function(t,i){a.activeTab=s.get("content").get(i.newTab.attr("data-cid")),a.set("title",a.activeTab.get("title")),a.activeTab instanceof e.ElTab&&(a.activeTab.getView().initDragElements(),a.activeTab.getView().activate())}}}});this.set("content",s)}return __extends(n,t),n.prototype.addElement=function(e,t){this.tabs.elements.addElement(e,t)},n.prototype.addTemplate=function(e){this.tabs.sectionTemplates.addTemplate(e)},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.getTab=function(e){if(void 0!==e)return this.get("content").get("content").at(e)},n.prototype.setResponsiveMode=function(e){this.view.updateResponsiveMode(e)},n}(e.Panel);e.ElementPanel=t;var i=function(t){function i(){t.apply(this,arguments),this.responsiveMode=e.RES_XL,this.closeWhenChangeResponsiveMode=!1}return __extends(i,t),i.prototype.activateTab=function(e){var t="string"==typeof e?this.model.get("content").get("content").get(e):this.model.getTab(e);if(t){jQuery(".js-ac-panel-header > h2",this.$el).html(t.get("title"));var i=this.model.get("content").get("content").indexOf(t);this.model.get("content").getView().activateTab(i),t.getView().initDragElements()}},i.prototype.updateResponsiveMode=function(t){this.responsiveMode=t,t!==e.RES_XL?(this.$el.is(":visible")&&(this.closeWhenChangeResponsiveMode=!0),this.close()):(this.closeWhenChangeResponsiveMode&&this.open(),this.closeWhenChangeResponsiveMode=!1)},i.prototype.open=function(i){this.responsiveMode===e.RES_XL&&t.prototype.open.call(this,i)},i}(e.PanelView);e.ElementPanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){var t={title:"Save template",content:"",settings:{enableResize:!1,enableDrag:!1,hideDefault:!0,position:"center",hasOverlay:!0}};e.call(this,t)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t}(e.Panel);e.SaveTemplatePanel=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.renderedCoverImage=null,t.prototype.initialize.call(this),this.initDragFile()},i.prototype.events=function(){return jQuery.extend(!0,{},t.prototype.events.call(this),{"click a.js-save":"onSave","click a.js-cancel":"close","keyup .js-template-name input":"changeName","change .js-uploader input[type=file]":"changeCoverImage","click span.js-remove-cover":"removeCoverImage"})},i.prototype.renderContent=function(){var e='\n                <form class="js-save-template-form pd15">\n                    <div class="ac_row">\n                        <div class="ac_1_col">\n                            <div class="js-template-name ac_panel-item-general">\n                                <label>\n                                    <span class="ac_panel-item-general__title">'+this.translate("Name")+'</span>\n                                    <div class="ac_panel-item-general__content ac_inputtext">\n                                        <input type="text" value="">\n                                    </div>\n                                </label>\n                            </div>\n                        </div>\n                        <div class="ac_1_col">\n                            <div class="js-uploader ac_panel__upload ac_panel-item-general" style="max-height: 200px; overflow: hidden;">\n                                <span class="ac_panel-item-general__title">'+this.translate("Custom image")+'</span>\n                                <label style="padding: 15px">\n                                    <i class="acicon acicon-upload"></i>\n                                    <input type="file" accept=".jpg, .jpeg, .png">\n                                </label>\n                                <div class="js-cover-preview" style="display: none; position: relative; height: 68px">\n                                    <span class="js-remove-cover" style="position: absolute; top: 0; right: 0; background-color: #333; padding: 4px 7px">x</span>\n                                </div>\n                            </div>\n                            <div class="ac_panel-desc">\n                                <p>'+this.translate("Awecontent will generate image automatically. If you want to use custom image, drag it here.")+"</p>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            ";jQuery(".js-ac-panel-body",this.$el).append(e).addClass("ac_panel__body--normal"),jQuery(".js-ac-panel-body",this.$el).after('\n                <div class="ac_panel__footer--2 pd15">\n                    <div class="ac_row">\n                        <div class="ac_1_col">\n                            <div class="btn-group">\n                                <a href="#" class="js-cancel ac_btn ac_btn--2">'+this.translate("Cancel")+'</a>\n                                <a href="#" class="js-save ac_btn ac_btn--1 ac_disable">'+this.translate("Save")+"</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            "),this.$el.css({minHeight:389,height:389})},i.prototype.saveTemplate=function(e,t){this.open(),this.onCloseCallback=t,this.renderedCoverImage=null,this.setSavedTemplate(e);var n=this,a=e.data.getView().$el,o=a.css("background-color"),s=a.css("background-image"),l=("rgba(0, 0, 0, 0)"===o||"transparent"===o)&&"none"===s;l&&a.css("background-color","#fff"),this._$("body").addClass("ac_disable-control"),window.html2canvas(a[0],{height:a.height(),onrendered:function(e){var t=e.toDataURL("image/jpeg","image/web");n.renderedCoverImage=i.dataURItoBlob(t),jQuery(".js-template-name input",n.$el).trigger("keyup"),l&&a.css("background-color",""),n._$("body").removeClass("ac_disable-control")}}),this.savedTemplate.data=jQuery("<textarea/>").val(JSON.stringify(this.savedTemplate.data)).val()},i.prototype.close=function(e,i){t.prototype.close.call(this,e),jQuery("input",this.$el).val(""),jQuery(".js-upload-preview",this.$el).remove(),jQuery(".js-uploader > label",this).show(),this.renderedCoverImage=null,this.removeCoverImage(),this.onCloseCallback&&void 0===e&&this.onCloseCallback(i)},i.prototype.initDragFile=function(){if("draggable"in document.createElement("span")){var e=this,t=jQuery(".js-uploader",this.$el).get(0);t.ondragover=function(e){e.preventDefault(),jQuery("> label",this).css("color","#fff")},t.ondragleave=function(e){e.preventDefault(),jQuery("> label",this).css("color","")},t.ondrop=function(t){if(t.preventDefault(),jQuery("> label",this).css("color",""),t.dataTransfer.files.length){var i=t.dataTransfer.files[0];/^image\/png|jpg|jpeg/.test(i.type)&&e.setCoverImage(i)}}}},i.prototype.setCoverImage=function(e){"string"!==jQuery.type(e)&&(this.customImage=e);var t="string"!==jQuery.type(e)?window.URL.createObjectURL(e):e;if(t){var i=document.createElement("img");i.className="js-upload-preview",i.src=t,jQuery(".js-uploader > .js-cover-preview",this.$el).show().get(0).appendChild(i),jQuery(".js-uploader > label",this.$el).hide()}},i.prototype.changeName=function(){this.savedTemplate.title=jQuery(".js-template-name input",this.$el).val().trim(),this.savedTemplate.title&&this.renderedCoverImage?jQuery("a.js-save",this.$el).removeClass("ac_disable"):jQuery("a.js-save",this.$el).addClass("ac_disable")},i.prototype.changeCoverImage=function(e){e.preventDefault();var t=jQuery(".js-uploader input",this.$el).get(0).files;if(void 0!==t&&t.length){var i=t[0];/^image\/png|jpg|jpeg/.test(i.type)&&this.setCoverImage(i)}},i.prototype.removeCoverImage=function(e){e&&e.preventDefault(),jQuery(".js-uploader > .js-cover-preview",this.$el).hide(),jQuery(".js-uploader > .js-cover-preview img",this.$el).remove(),this.customImage=this.renderedCoverImage,jQuery(".js-uploader > label",this.$el).css("display",""),this.savedTemplate&&(this.savedTemplate.cover={url:"",fid:-1})},i.prototype.onSave=function(t){if(t&&t.preventDefault(),!jQuery("a.js-save").hasClass("ac_disable")){var i=new FormData,n=this.savedTemplate.cover;if(!n||!n.url){delete this.savedTemplate.cover,n=this.customImage?this.customImage:this.renderedCoverImage;var a=jQuery(".js-template-name input",this.$el).val(),o=/^image\/([a-z]+)/.exec(n.type)[1];i.append("cover",n,a+"."+o)}jQuery.map(this.savedTemplate,function(e,t){i.append(t,e)}),i.append("requestAction","save");var s=this,l=new XMLHttpRequest,r=e.prepareAjaxParamenters("templates");jQuery.map(r.data,function(e,t){i.append(t,e)}),l.open("POST",r.url),l.onreadystatechange=function(){if(4===this.readyState){var t=void 0;if(200===this.status){var i=e.parseJSON(this.responseText.trim());i&&i.status&&(t=i.template)}else console.log("Create template failed!");s.close(void 0,t)}},l.send(i)}},i.prototype.setSavedTemplate=function(e){this.savedTemplate=e,jQuery(".js-template-name input[type=text]",this.$el).val(e.title),this.setCoverImage(e.cover.url)},i.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),a=new Uint8Array(n),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);var s=new DataView(n);return new Blob([s],{type:i})},i}(e.PanelView);e.SaveTemplatePanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(i){e.ContentObject.generateObjectSettings("section",{settings:{tag:{type:"select",title:"Wrapper tag",inlineTitle:!0,options:{header:"header",footer:"footer",section:"section",div:"div",article:"article",aside:"aside",main:"main"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"section"},fluid:{type:"toggle",title:"Fluid section",defaultValue:!1},full:{type:"toggle",title:"Fullscreen section",defaultValue:!1},customHTML:{type:"textarea",title:"Custom HTML",size:"medium",defaultValue:"",fireEvent:"blur"},attributes:{type:"attributes",title:"Custom attribute",formElements:{name:{type:"input",title:"Name",inlineTitle:!0,defaultValue:""},value:{type:"input",title:"Value",inlineTitle:!0,defaultValue:""},validate:function(e){return""!==e.name.trim()}}}}}),void 0===i&&(i={}),void 0!==i.title&&"string"===jQuery.type(i.title)&&""!==i.title.trim()||(i.title="Section"),i.machineName="section",void 0===i.content&&(i.empty?i.content=new e.Columns([]):i.content=new e.Columns,i.contentType=i.content.constructor.name),t.call(this,i),this.get("content").setContainer(this),this.machineName="section"}return __extends(n,t),n.prototype.createView=function(){var e=this.getSettingsAttr("main.settings.tag");this.view=new i({model:this,className:"ac_section",tagName:e||"section"})},n.prototype.addColumn=function(e,t){var i=this;"array"===jQuery.type(e)?jQuery.each(e,function(e,t){t.setResponsiveMode(i.responsiveMode)}):e.setResponsiveMode(this.responsiveMode),t&&t<this.get("content").length?this.get("content").add(e,{at:t}):this.get("content").add(e)},n.prototype.addColumnsByStringLayout=function(e){var t;switch(e){case"1/2+1/2":t=this.createColumnsByNumber([6,6]);break;case"1/3+2/3":t=this.createColumnsByNumber([4,8]);break;case"2/3+1/3":t=this.createColumnsByNumber([8,4]);break;case"1/3+1/3+1/3":t=this.createColumnsByNumber([4,4,4]);break;case"1/4+1/2+1/4":t=this.createColumnsByNumber([3,6,3]);break;case"1/2+1/4+1/4":t=this.createColumnsByNumber([6,3,3]);break;case"1/4+1/4+1/2":t=this.createColumnsByNumber([3,3,6]);break;case"1/4+1/4+1/4+1/4":t=this.createColumnsByNumber([3,3,3,3]);break;case"1/6+1/6+1/6+1/6+1/6+1/6":t=this.createColumnsByNumber([2,2,2,2,2,2]);break;default:t=this.createColumnsByNumber([12])}this.addColumn(t)},n.prototype.createColumnsByNumber=function(t){var i=this,n=[];return jQuery.each(t,function(t,a){var o=new e.Column;o.setNavigatorPanel(i.navigatorPanel),o.setSettingsAttr("main.responsive.classNumber."+e.RES_XL,a),o.setSettingsAttr("main.responsive.classNumber."+e.RES_LG,a),o.setSettingsAttr("main.responsive.classNumber."+e.RES_MD,12),o.setSettingsAttr("main.responsive.classNumber."+e.RES_SM,12),o.setSettingsAttr("main.responsive.classNumber."+e.RES_XS,12),n.push(o)}),n},n.prototype.getType=function(){return"section"},n.prototype.setNavigatorPanel=function(e){t.prototype.setNavigatorPanel.call(this,e);var i=e?e.getBuilder():void 0,n=i?i.getOptions():void 0;n&&n.templateMode&&"section"===n.templateMode.type&&this.view.renderTemplateMode()},n.prototype.clone=function(){var e=this.toJSON();return e.content=this.get("content").clone(),delete e.cid,new n(e)},n.type="section",n}(e.ContentObject);e.Section=t;var i=function(i){function n(e){if(void 0!==e&&void 0!==e.model){var t=e.model.getSettingsAttr("main.settings.tag");t&&(e.tagName=t)}i.call(this,e)}return __extends(n,i),n.prototype.columnCreatorOptions=function(){return'\n                <i class="acicon acicon-plus"> </i>\n                <ul>\n                    <li title="1/1" data-column="1/1">\n                        <i class="acicon acicon-col-1"> </i>\n                    </li>\n                    <li title="1/2 + 1/2" data-column="1/2+1/2">\n                        <i class="acicon acicon-col-2"> </i>\n                    </li>\n                    <li title="1/3 + 2/3" data-column="1/3+2/3">\n                        <i class="acicon acicon-col-3"> </i>\n                    </li>\n                    <li title="2/3 + 1/3" data-column="2/3+1/3">\n                        <i class="acicon acicon-col-4"> </i>\n                    </li>\n                    <li title="1/3 + 1/3 + 1/3" data-column="1/3+1/3+1/3">\n                        <i class="acicon acicon-col-5"> </i>\n                    </li>\n                    <li title="1/4 + 1/2 + 1/4" data-column="1/4+1/2+1/4">\n                        <i class="acicon acicon-col-6" > </i>\n                    </li>\n                    <li title="1/4 + 1/4 + 1/2" data-column="1/4+1/4+1/2">\n                        <i class="acicon acicon-col-7"> </i>\n                    </li>\n                    <li title="1/2 + 1/4 + 1/4" data-column="1/2+1/4+1/4">\n                        <i class="acicon acicon-col-8"> </i>\n                    </li>\n                    <li title="1/4 + 1/4 + 1/4 + 1/4" data-column="1/4+1/4+1/4+1/4">\n                        <i class="acicon acicon-col-9"> </i>\n                    </li>\n                    <li title="1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6" data-column="1/6+1/6+1/6+1/6+1/6+1/6">\n                        <i class="acicon acicon-col-10"> </i>\n                    </li>\n                </ul>\n            '},n.prototype.sectionControlTemplate=function(){return _.template('\n                <li class="js-add-new-col ac_control__column" title= "<%= addColText %>">\n                    <%= creatorOptions %>\n                </li>\n                <li class="js-save-template" title="<%= saveText %>">\n                    <i class="acicon acicon-save"></i>\n                </li>\n            ')},n.prototype.sectionBottomControllersTemplate=function(){return _.template('\n                <div class="js-add-section ac_control ac_control-bottom">\n                    <ul>\n                        <li class="js-add-section ac_control__column" title="<%= addSectionText %>">\n                            <%= creatorOptions %>\n                        </li>\n                    </ul>\n                </div>\n            ')},n.prototype.getRenderControllersData=function(){var e=i.prototype.getRenderControllersData.call(this);return e.push({name:"column",classes:"js-add-new-col ac_control__column",title:this.translate("Add column"),content:this.columnCreatorOptions()}),e.push({name:"save",icon:"save",classes:"js-save-template",title:this.translate("Save as template")}),e},n.prototype.initialize=function(){this.renderSectionControllers=this.sectionControlTemplate(),this.renderSectionBottomControllers=this.sectionBottomControllersTemplate(),i.prototype.initialize.call(this)},n.prototype.events=function(){return jQuery.extend(!0,{},i.prototype.events.call(this),{"click .js-add-new-col":"appendColumn","click .js-add-new-col > ul li":"appendColumn","click .js-add-section .js-add-section":"appendSection","click .js-add-section .js-add-section > ul li":"appendSectionColumn","click .js-save-template":"saveAsTemplate"})},n.prototype.render=function(){return this.$el.append('<div class="js-container ac_container"></div>'),this.$wrapper=jQuery("> .js-container",this.$el),i.prototype.render.call(this),this.$el.append(this.renderSectionBottomControllers({addSectionText:this.translate("Add section"),creatorOptions:this.columnCreatorOptions()})),this.renderCustomSettings(),this},n.prototype.renderCustomSettings=function(){var e=this,t=this.model.getSettingsAttr("main.settings");t&&jQuery.map(t,function(t,i){switch(i){case"fluid":t&&e.$wrapper.addClass("ac_container-fluid").removeClass("ac_container");break;case"full":t&&e.$wrapper.addClass("js-container-fullscreen").css({height:jQuery(window).height()+"px"});break;case"customHTML":e.renderCustomHtmlSetting(t);break;case"classes":t&&e.$el.addClass(t);break;case"id":t&&e.$el.attr("id",t);break;case"attributes":jQuery.each(t,function(t,i){e.$el.attr(i.name,i.value)})}})},n.prototype.renderCustomHtmlSetting=function(e){if(this.$el.append(this.$wrapper),jQuery("> .js-custom-wrap",this.$el).remove(),e){var t=this,i=document.createElement("div");i.innerHTML=e;var n=/\[content\]/.exec(e);if(!n||!n[0]){this.$wrapper.hide();var a=/<([a-z]+)[^<]*>/.test(e)?e:i;return void t.$el.append(jQuery(a).addClass("js-custom-wrap"))}e=e.replace("[content]",'<div class="js-col-content"></div>'),t.$el.append(jQuery(e).addClass("js-custom-wrap")),jQuery(".js-col-content",t.$el).before(this.$wrapper).remove()}this.$wrapper.show()},n.prototype.appendSection=function(e){this.preventDefaultEvent(e),jQuery("> ul li:first",jQuery(e.target).parents(".js-add-section:first")).trigger("click")},n.prototype.appendSectionColumn=function(e){e&&e.stopPropagation();var i=jQuery(e.currentTarget).attr("data-column"),n=new t({empty:!0}),a=this.model.getCollection(),o=a.indexOf(this.model);n.setNavigatorPanel(this.model.getNavigatorPanel()),n.setResponsiveMode(this.model.getResponsiveMode()),n.addColumnsByStringLayout(i),a.add(n,{at:o+1})},n.prototype.appendColumn=function(e){e&&e.stopPropagation();var t=jQuery(e.currentTarget).attr("data-column");this.model.addColumnsByStringLayout(t)},n.prototype.saveAsTemplate=function(e){e.preventDefault();var t=this,i=t.getBuilder(),n=i?i.getPanel("save"):void 0,a={type:"section",id:-1,title:this.model.get("title"),data:this.model,cover:{url:"",fid:-1}};n&&n.getView().saveTemplate(a,function(e){var t=i?i.getPanel("elements"):void 0;t&&e&&t.addTemplate(e)})},n.prototype.listenAddContent=function(e,t,n){i.prototype.listenAddContent.call(this,e,t,n);var a=e.getView(),o=jQuery(".js-ac-row",this.$el);switch(n.index){case 0:o.prepend(a.$el);break;case t.length-1:case void 0:o.append(a.$el);break;default:jQuery("> .js-ac-column:eq("+n.index+")",o).before(a.$el)}},n.prototype.beforeSort=function(e,t){jQuery(".js-ac-page-wrapper",this.$el).addClass("ac_col-sorting"),t.placeholder.outerWidth(t.item.outerWidth())},n.prototype.afterSort=function(){jQuery(".js-ac-page-wrapper",this.$el).removeClass("ac_col-sorting")},n.prototype.renderSettingsChange=function(t,n,a,o){if(i.prototype.renderSettingsChange.call(this,t,n,a,o),t.indexOf(".settings")){var s=this,l=t.split("."),r=l.pop();switch(-1===jQuery.inArray(r,[e.RES_XS,e.RES_SM,e.RES_MD,e.RES_LG,e.RES_XL])?r:l.pop()){case"tag":this.model.createView();var c=this.model.getView();this.$el.before(c.$el).remove(),c.$el.addClass("ac_highlight js-active"),this.destroy();break;case"fluid":n?s.$wrapper.addClass("ac_container-fluid").removeClass("ac_container"):s.$wrapper.removeClass("ac_container-fluid").addClass("ac_container");break;case"full":n?(s.$wrapper.addClass("js-container-fullscreen"),s.$wrapper.css({height:jQuery(window).height()+"px"})):s.$wrapper.removeClass("js-container-fullscreen").removeAttr("style");break;case"customHTML":s.renderCustomHtmlSetting(n);break;case"classes":var d=s.model.getSettingsAttr(t,a);s.$el.removeClass(d).addClass(n);break;case"id":n?s.$el.attr("id",n):s.$el.removeAttr("id");break;case"attributes":if("array"===jQuery.type(n)){var u=s.model.getSettingsAttr(t,a),p=[];jQuery.each(n,function(e,t){s.$el.attr(t.name,t.value),p.push(t.name)}),void 0!==u&&jQuery.each(u,function(e,t){-1===jQuery.inArray(t.name,p)&&s.$el.removeAttr(t.name)})}}}},n.prototype.renderTemplateMode=function(){jQuery("> .js-ac-control .js-save-template",this.$el).remove(),jQuery("> .js-ac-control .js-ac-control-clone",this.$el).remove(),jQuery("> .js-ac-control .js-ac-control-delete",this.$el).remove(),jQuery(".js-add-section",this.$el).remove()},n}(e.ContentObjectView);e.SectionView=i;var n=function(e){function i(i,n){void 0!==n&&void 0!==n.model||(n=jQuery.extend(!0,{},n,{model:t})),void 0!==i&&0!==i.length||(i=[new t({empty:!1})]),e.call(this,i,n)}return __extends(i,e),i.prototype.createView=function(){this.view=new a({collection:this})},i.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(){e.push(this.clone())}),new i(e)},i}(e.ContentObjects);e.Sections=n;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(t){this.$el.css("min-height",50),e.prototype.initialize.call(this,t),this.setAllowUpdateDeleteBtn(!0)},t}(e.ContentObjectsView);e.SectionsView=a}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t={type:"normal",item_position:"auto",text_align:"default",item_type:"default",show_submenu_default:!1,show_submenu_current:!1,enable_override:!1,submenu:{animation_type:"default",animation_duration:300,disable_width:!1,submenu_fullwidth:!1,mega_width:600,dropdown_width:250,disable_height:!1,set_height:"auto",mega_height:400,horizontal_align:"align-left",vertical_align:"align-top",submenu_position:"auto"}},i=function(i){function o(t){e.ContentObject.generateObjectSettings("menu",{main:{animation:!1,selector:"> a",style:{enabled:["font","background","border","padding","margin"],status:["normal","hover","active"]},settings:{type:{type:"select",title:"Menu type",inlineTitle:!0,options:{normal:"Normal",mega:"Mega",list:"List"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"normal",change:function(e,t,i,n){if(1==n.get("level")&&"normal"!==i.current?jQuery(".el-show_submenu_default, .el-show_submenu_current",e).show():jQuery(".el-show_submenu_default, .el-show_submenu_current",e).hide(),1==n.get("level")){var a=n.getBuilder().content,o=a.getSettingsAttr("main.settings.type")||"standard";-1!==jQuery.inArray(o,["top","standard","bottom"])?jQuery(".el-text_align",e).hide():jQuery(".el-text_align",e).show()}else jQuery(".el-text_align",e).show()}},show_submenu_default:{type:"toggle",title:"Show submenu by default",defaultValue:!1,devices:!1,inlineTitle:!0},show_submenu_current:{type:"toggle",title:"Show submenu when current",defaultValue:!1,devices:!1,inlineTitle:!0},enable_override:{type:"toggle",title:"Enable Override default value",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){i.current?jQuery(".el-override_region",e).show():jQuery(".el-override_region",e).hide()}},override_region:{type:"group",title:"Override default value",useParentKey:!0,elements:{text_align:{type:"select",title:"Item text align",inlineTitle:!0,options:{default:"Default",left:"Left",center:"Center",right:"Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"default"},item_position:{type:"select",title:"Item position",inlineTitle:!0,options:{"":"Auto","float-right":"Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"text-only"},item_type:{type:"select",title:"Item type",inlineTitle:!0,options:{default:"Default","text-only":"Text only","icon-only":"Icon only","icon-text":"Icon + text"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"default",change:function(e,t,i,n){var a=i.current,o=n.get("level");if("default"===a){var s=n.getBuilder().content,l=1==o?"top_items":"flyout_submenu";a=s.getSettingsAttr(l+".settings.item_type")||"text-only"}"text-only"===a?jQuery(".el-icon",e).hide():jQuery(".el-icon",e).show()}},icon:{type:"icon",title:"Chosse Icon",defaultValue:"",devices:!1,change:function(e,t,i,n){i.prev}},submenu:{type:"group",title:"Submenu settings",elements:{animation_type:{type:"select",title:"Animation",inlineTitle:!0,options:{default:"Default",fade:"Fade",fadeup:"Fade Up",fadedown:"Fade Down",fadeleft:"Fade Left",faderight:"Fade Right",zoom:"Zoom",rotateupleft:"Rotate Left",flipx:"FlipX",flipy:"FlipY",flipyright:"Flipy Right",slideleft:"Slide Left",slideright:"Slide Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"default"},animation_duration:{type:"ranger",title:"Duration",min:0,max:2e3,unit:"ms",widthNumber:2,defaultValue:300,devices:!1},disable_width:{type:"toggle",title:"Custom width",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){if(i.current){var a=n.getSettingsAttr("main.settings.type");"mega"==a?jQuery(".el-submenu_fullwidth, .el-mega_width",e).show():"list"==a&&jQuery(".el-dropdown_width",e).show()}else jQuery(".el-submenu_fullwidth, .el-mega_width, .el-dropdown_width",e).hide()}},submenu_fullwidth:{type:"toggle",title:"Full width",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){!n.getSettingsAttr("main.settings.submenu.disable_width")||i.current?jQuery(".el-mega_width, .el-dropdown_width",e).hide():jQuery(".el-mega_width",e).show()}},mega_width:{type:"ranger",title:"Submenu width",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:600,devices:!1},dropdown_width:{type:"ranger",title:"Submenu width",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:250,devices:!1},disable_height:{type:"toggle",title:"Custom height",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){if(i.current){jQuery(".el-set_height",e).show();"auto"===(n.getSettingsAttr("main.submenu.set_height")||"auto")?jQuery(".el-mega_height",e).hide():jQuery(".el-mega_height",e).show()}else jQuery(".el-set_height, .el-mega_height",e).hide()}},set_height:{type:"select",title:"Set max height",inlineTitle:!0,options:{auto:"Auto",fixed:"Fixed",max:"Max height"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"auto",change:function(e,t,i,n){"auto"===i.current?jQuery(".el-mega_height",e).hide():jQuery(".el-mega_height",e).show()}},mega_height:{type:"ranger",title:"Height",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:400,devices:!1},horizontal_align:{type:"select",title:"Align",inlineTitle:!0,options:{auto:"Auto","align-left":"Left","align-center":"Center","align-right":"Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"align-left"},vertical_align:{type:"select",title:"Align",inlineTitle:!0,options:{auto:"Auto","align-top":"Top","align-middle":"Middle","align-bottom":"Bottom"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"align-top"},submenu_position:{type:"select",title:"Position",inlineTitle:!0,options:{auto:"Auto",left:"Left",right:"Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"auto"}}}}}}}}),void 0===t&&(t={}),void 0===t.settings&&(t.settings={}),void 0!==t.title&&"string"===jQuery.type(t.title)&&""!==t.title.trim()||(t.title="Menu item"),void 0===t.content&&(t.content=!1),t.machineName="menu",i.call(this,t),t.content&&this.get("content").setContainer(this),this.addSelectorToPart()}return __extends(o,i),o.prototype.addSelectorToPart=function(){var e=this.get("settings");e.main||(e.main={}),e.main.selector="> a",this.set("settings",e)},o.prototype.init=function(){this.get("content")&&this.get("content").setContainer(this),this.machineName="menu"},o.prototype.createView=function(){this.view=new n({model:this,tagName:"li"})},o.prototype.getType=function(){return"menu"},o.prototype.createNavigatorView=function(){this.navigatorView=new a({model:this})},o.prototype.clone=function(){var e=this.toJSON(),t=this.getSettingsAttr("main.settings.type")||"normal";return e.content="normal"!==t&&this.get("content").clone(),delete e.cid,new o(e)},o.prototype.getRealSettings=function(){var e=this.getSettingsAttr("main.settings"),i={submenu:{}};return jQuery.extend(!0,i,t,e),jQuery.extend(!0,i.submenu,t.submenu,e?e.submenu:{}),i},o.type="menu",o}(e.ContentObject);e.Menu=i;var n=function(i){function n(e){void 0!=e&&void 0!=e.tagName&&""!=e.tagName||(e.tagName="li"),i.call(this,e)}return __extends(n,i),n.prototype.getRenderControllersData=function(){return[{name:"move",title:this.model.get("title"),content:'<span class="js-ac-control-title">'+this.model.get("title")+"</span>"},{name:"edit",title:this.translate("Edit"),icon:"pen"},{name:"delete",icon:"del",title:this.translate("Delete")}]},n.prototype.edit=function(t){e.activeMenuModel=this.model,i.prototype.edit.call(this,t),this.showSubmenu(),"mega"===this.model.getSettingsAttr("main.settings.type")&&this.$el.find(".js-type-column").trigger("resizeGrid")},n.prototype.showSubmenu=function(){var t=this.$el.find("> .awemenu-submenu"),i=(this.model,e._jQuery);(this.$el.hasClass("awemenu-active")?1:0)||(this.$el.parent().find(".awemenu-active").removeClass("awemenu-active"),this.$el.addClass("awemenu-active"),t.find("canvas").each(function(){i(this).height()||i(this).closest(".js-type-column").trigger("resize")})),this.showHideSettings()},n.prototype.showHideSettings=function(){var e=this.model,t=e.get("level"),i=e.getRealSettings(),n=e.getBuilder().content,a=n.getSettingsAttr("main.settings.type")||"standard",o=e.getNavigatorPanel().get("content").get("content").models[1].getView(),s=jQuery(".elements-form:visible",o.$el);"normal"==i.type?jQuery(".el-submenu",s).hide():(jQuery(".el-submenu",s).show(),i.submenu.disable_width?"mega"==i.type?(jQuery(".el-submenu_fullwidth",s).show(),jQuery(".el-dropdown_width",s).hide(),i.submenu.submenu_fullwidth?jQuery(".el-mega_width",s).hide():jQuery(".el-mega_width",s).show()):(jQuery(".el-dropdown_width",s).show(),jQuery(".el-mega_width, .el-submenu_fullwidth",s).hide()):jQuery(".elements-form:visible .el-mega_width, .elements-form:visible .el-dropdown_width",s).hide(),"mega"==i.type?(jQuery(".el-disable_height").show(),i.submenu.disable_height?jQuery(".el-set_height",s).show():jQuery(".el-set_height",s).hide(),"auto"!==i.submenu.set_height?jQuery(".el-mega_height",s).show():jQuery(".el-mega_height",s).hide()):jQuery(".el-disable_height, .el-set_height, .el-mega_height",s).hide()),1==t?jQuery.inArray(a,["standard","top","bottom"])>=0?(jQuery(".el-vertical_align, .el-submenu_position",s).hide(),jQuery(".el-horizontal_align, .el-item_position",s).show()):(jQuery(".el-item_position, .el-horizontal_align, .el-submenu_position",s).hide(),jQuery(".el-vertical_align",s).show()):(jQuery(".el-horizontal_align, .el-item_position",s).hide(),jQuery(".el-vertical_align",s).show(),jQuery.inArray(a,["standard","top","bottom"])>=0?jQuery(".el-submenu_position",s).show():jQuery(".el-submenu_position",s).hide())},n.prototype.renderContent=function(){var e=this.model,t=e.get("level"),i=this;settings=e.getRealSettings();var n=this.renderItemContent(settings);this.$el.append(n),this.initEditTtitle(),this.renderSubContent(settings.type),this.$el.addClass("awemenu-item ac_menu-item awemenu-item-level-"+t),this.setDataMenuToView();var a=setInterval(function(){var t=i.getBuilder();t&&(clearInterval(a),i.listenTo(t.content,"change",i.listenMenuBoxChange),i.renderSettingMenu(e.getRealSettings()))},150)},n.prototype.setDataMenuToView=function(){var e=this.model,t=e.toJSON();t.realSettings=e.getRealSettings(),this.$el.data("datamenu",JSON.stringify(t))},n.prototype.renderItemContent=function(e){var t=this.model,i=t.get("title"),n=jQuery('<a class="awe-link" style="transition:all 0s;"><span class="awemenu-item-icon"></span><div class="awemenu-item-text" contenteditable="true">'+i+"</div></a>");return"normal"!=e.type&&n.append('<i class="awemenu-arrow amm-down"></i>'),n},n.prototype.renderSubContent=function(e,t){var i=this.model,n=this,a=i.get("content"),o=["awemenu-submenu"];switch(n.$el.find("> ul").remove(),e){case"normal":break;case"mega":o.push("awemenu-megamenu"),n.$el.append('<ul class="awemenu-submenu submenu awemenu-megamenu"><li class="awemenu-item"></li></ul>');var s=a.getView();n.$el.find("> .awemenu-megamenu .awemenu-item").append(s.$el);break;case"list":o.push("awemenu-dropdown");var l=a.getView();n.$el.append(l.$el)}n.$el.find("> ul").addClass(o.join(" ")),t&&this.showSubmenu()},n.prototype.renderSettingMenu=function(e){var t=this;for(var i in e)if("submenu"!=i)t.renderOneSetting(i,e[i]);else for(var n in e.submenu)t.renderOneSetting(n,e.submenu[n])},n.prototype.renderOneSetting=function(t,i,n,a){function s(e,t,i){switch(t){case"auto":e.css({height:"","max-height":"","overflow-y":""});break;case"fixed":e.css({height:i+"px","max-height":"","overflow-y":""});break;case"max":e.css({height:"","max-height":i+"px","overflow-y":"auto"})}}if(i==n)return void console.log("not render :"+i);var l=this.model,r=l.get("level"),c=this,d=l.getRealSettings(),u=l.getBuilder().content.getRealSettings(),p=this.$el,h=jQuery("> .awemenu-submenu",p);e._jQuery;switch(t){case"type":if(a){var m=l.get("content");m&&jQuery(m.models).each(function(e,t){m.remove(t)});var g=!1;switch(i){case"mega":g=new e.Sections;break;case"list":g=new o}if(l.set("content",g),g){this.$el.find("> a .awemenu-arrow").length||this.$el.find("> a").append('<i class="awemenu-arrow amm-down"></i>'),l.set("contentType",g.constructor.name),l.get("content").setContainer(l),l.setNavigatorPanel(l.getNavigatorPanel()),l.setResponsiveMode(l.responsiveMode),l.get("content").createNavigatorViews();var f=l.getNavigatorView(),y=l.get("content").getNavigatorView();f.$el.append(y.$el),f.updateCollapsedDisplay(g.length)}else this.$el.find(".awemenu-arrow").remove(),void 0!==l.get("contentType")&&l.unset("contentType");this.renderSubContent(i,!0),c.showHideSettings(),c.renderSettingMenu(d)}break;case"item_type":"default"==i&&(i=1==r?u.top_items.item_type:u.flyout_submenu.item_type);p.find("> a .awemenu-item-icon i").length||p.find("> a .awemenu-item-icon").append("<i></i>"),p.find("> a").removeClass("awemenu-"+n).addClass("awemenu-"+i);break;case"icon":p.find("> a .awemenu-item-icon i").attr("class",i);break;case"item_position":p.removeClass(n).addClass(i),"float-right"==i?p.addClass("awemenu-item-right"):p.removeClass("awemenu-item-right");break;case"text_align":var v=1==r?u.top_items.text_align:u.flyout_submenu.text_align;"default"!=i?p.find("> a").css("text-align",i):"default"!=v?p.find("> a").css("text-align",v):p.find("> a").css("text-align","");break;case"animation_type":var v=u.main.animation_type;"none"!==v&&("default"===i&&(i=v),c.$el.removeClass("awemenu-"+n).addClass("awemenu-"+i),jQuery("> .awemenu-submenu",p).attr("data-animation",i));break;case"animation_duration":if("none"!==u.main.animation_type){var w=i||u.main.animation_duration;jQuery("> .awemenu-submenu",p).css({"transition-duration":w+"ms"}).attr("data-duration",w+"ms")}else jQuery("> .awemenu-submenu",p).css({"transition-duration":""}).removeAttr("data-duration");break;case"disable_width":"normal"!==d.type&&(h.initMegamenuPositionWidth(l),1!=r||"standard"!=u.main.type&&"top"!=u.main.type&&"bottom"!=u.main.type||h.alignSubmenu(l,d.submenu.horizontal_align));break;case"submenu_fullwidth":"mega"!==d.type||!i&&void 0===a||(d.submenu.disable_width?b=d.submenu.mega_width:(i=u.mega_submenu.fullwidth,b=u.mega_submenu.mega_width),i?h.initMegamenuPositionWidth(l,"fullwidth"):(h.initMegamenuPositionWidth(l,b),1!=r||"standard"!=u.main.type&&"top"!=u.main.type&&"bottom"!=u.main.type||h.alignSubmenu(l,d.submenu.horizontal_align)));break;case"mega_width":if("mega"===d.type&&(d.submenu.disable_width&&!d.submenu.submenu_fullwidth||!d.submenu.disable_width&&!u.mega_submenu.fullwidth)){var b=i;d.submenu.disable_width||(b=u.mega_submenu.mega_width),h.initMegamenuPositionWidth(l,b),1!=r||"standard"!=u.main.type&&"top"!=u.main.type&&"bottom"!=u.main.type||h.alignSubmenu(l,d.submenu.horizontal_align),h.find(".awemenu-submenu").length&&a&&h.resetAllSubmenuPosition()}break;case"dropdown_width":"list"===d.type&&(d.submenu.disable_width||(i=u.flyout_submenu.dropdown_width),h.css("width",i),h.find(".awemenu-submenu").length&&a&&h.resetAllSubmenuPosition());break;case"disable_height":if("mega"===d.type){var j=void 0,_=void 0;i?(j=d.submenu.set_height,_=parseInt(d.submenu.mega_height)):(j=u.mega_submenu.set_height,_=parseInt(u.mega_submenu.mega_height)),s(h,j,_)}break;case"set_height":if("mega"===d.type&&d.submenu.disable_height&&("auto"!==i||void 0!==a)){var _=parseInt(d.submenu.mega_height);s(h,i,_)}break;case"mega_height":"mega"===d.type&&d.submenu.disable_height&&void 0!==a&&s(h,d.submenu.set_height,parseInt(i));break;case"horizontal_align":if(1==r&&("standard"==u.main.type||"top"==u.main.type||"bottom"==u.main.type)){if(h.removeClass(n).addClass(i),!i){var S="ltr"===u.main.direction?"align-left":"align-right";h.addClass(S)}h.alignSubmenu(l,i)}break;case"vertical_align":(r>1||"standard"!=u.main.type&&"top"!=u.main.type&&"bottom"!=u.main.type)&&(h.removeClass(n).addClass(i),h.alignVerticalSubmenu(i,r),h.alignVerticalSubmenuChildAll());break;case"submenu_position":if(1!=r&&-1!=jQuery.inArray(u.main.type,["standard","top","bottom"])){var C=u.main.direction;"left"==i&&"ltr"==C||"right"==i&&"rtl"==C?p.addClass("awemenu-invert"):p.removeClass("awemenu-invert"),n&&h.removeClass("position-"+n),h.addClass("position-"+i);var Q=l.toJSON();Q.realSettings=l.getRealSettings(),h.resetArrowSubmenu(Q),h.find(".awemenu-submenu").length&&a&&h.resetAllSubmenuPosition({active:1})}}},n.prototype.renderSettingsChange=function(n,a,o,s){if(void 0!==n&&(i.prototype.renderSettingsChange.call(this,n,a,o,s),n.indexOf(".settings"))){var l=this,r=this.model,c=n.split("."),d=c.pop(),u=-1===jQuery.inArray(d,[e.RES_XS,e.RES_SM,e.RES_MD,e.RES_LG,e.RES_XL])?d:c.pop();switch(u){case"classes":var p=l.model.getSettingsAttr(n,o);l.$el.removeClass(p).addClass(a);break;case"id":a?l.$el.attr("id",a):l.$el.removeAttr("id");break;default:var h=-1!==n.indexOf(".submenu.")?t.submenu[u]:t[u],m=r.getSettingsAttr(n,o);void 0===m&&(m=h),l.setDataMenuToView(),l.renderOneSetting(u,a,m,!0)}}},n.prototype.listenMenuBoxChange=function(e,t){var i=this;jQuery.map(e.changed,function(n,a){if("settings"===a){var o=e.parseJSON(e.previous("settings"));i.renderSettingsChangeByDefault(t.selector,t.value,o,t.inlineCss)}})},n.prototype.renderSettingsChangeByDefault=function(t,i,n,a){function o(e,t,i){switch(t){case"auto":e.css({height:"","max-height":"","overflow-y":""});break;case"fixed":e.css({height:i+"px","max-height":"","overflow-y":""});break;case"max":e.css({height:"","max-height":i+"px","overflow-y":"auto"})}}if(void 0!==t&&t.indexOf(".settings")){var s=this,l=this.model,r=l.get("level"),c=l.getRealSettings(),d=l.getBuilder().content.getRealSettings(),u=this.$el,p=jQuery("> .awemenu-submenu",u),h=t.split("."),m=h.pop(),g=-1===jQuery.inArray(m,[e.RES_XS,e.RES_SM,e.RES_MD,e.RES_LG,e.RES_XL])?m:h.pop(),f=e.DEFAULT_SETTINGS_MENU_BOX[h[0]][g],y=l.getSettingsAttr(t,n);switch(void 0===y&&(y=f),g){case"mega_width":case"fullwidth":c.submenu.disable_width||(p.initMegamenuPositionWidth(l),1==r&&jQuery.inArray(d.main.type,["standard","top","bottom"])&&p.alignSubmenu(l,c.submenu.horizontal_align),p.resetAllSubmenuPosition());break;case"dropdown_width":c.submenu.disable_width||p.css("width",i),p.resetAllSubmenuPosition();break;case"text_align":"default"===c.text_align&&("top_items"==h[0]&&1==r||"flyout_submenu"===h[0]&&r>1)&&s.renderOneSetting(g,i,y,!0);break;case"item_type":"default"!=c.item_type&&c.item_type||("top_items"===h[0]&&1==r||"flyout_submenu"===h[0]&&r>1)&&u.find("> a").removeClass("awemenu-"+y).addClass("awemenu-"+i);break;case"set_height":case"mega_height":"mega"!=c.type||c.submenu.disable_height||o(p,d.mega_submenu.set_height,parseInt(d.mega_submenu.mega_height));break;case"animation_type":"default"==c.submenu.animation_type&&"normal"!=c.type&&(u.removeClass("awemenu-"+y).addClass("awemenu-"+i),p.attr("data-animation",i))}}},n.prototype.initEditTtitle=function(){var e=this;jQuery(".awemenu-item-text",this.$el).mousedown(function(e){var t=jQuery(this);t.data("beforeChange",t.text())}).bind("blur",function(t){var i=jQuery(this),n=i.data("beforeChange"),a=i.text();n!==a&&e.model.set("title",a)}).bind("keydown",function(e){var t=e.which|e.keyCode;if(13===t||27===t){if(e.preventDefault(),27===t){var i=jQuery(this),n=i.data("beforeChange");i.text(n)}jQuery(this).trigger("blur")}})},n}(e.ContentObjectView);e.MenuView=n;var a=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.onTitleMouseDown=function(i,n){t.prototype.onTitleMouseDown.call(this,i,n),i.isTrigger||(this.model.getView().showSubmenu(),e.activeMenuModel=this.model)},i}(e.NavigatorView);e.MenuNavigatorView=a;var o=function(e){function t(t,n){void 0!==n&&void 0!==n.model||(n=jQuery.extend(!0,{},n,{model:i})),void 0!==t&&0!==t.length||(t=[]),e.call(this,t,n,"")}return __extends(t,e),t.prototype.createView=function(){this.view=new s({collection:this,className:this.className,tagName:"ul"})},t.prototype.clone=function(){var e=[];return jQuery.each(this.models,function(){e.push(this.clone())}),new t(e)},t}(e.ContentObjects);e.Menus=o;var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.setAllowUpdateDeleteBtn(!0)},t.prototype.initSort=function(){var t=0,i=this.collection.getContainer().machineName,n=!1;if(this.collection.length&&(t=this.collection.models[0].get("level")),(t="menubox"==i?1:2)>1)n="y";else{var a=this.collection.getContainer().getSettingsAttr("main.settings.type");n=1==t&&jQuery.inArray(a,["top","standard","bottom"])>-1?"x":"y"}e.prototype.initSort.call(this,n)},t.prototype.beforeSort=function(t,i){e.prototype.beforeSort.call(this,t,i),i.placeholder.addClass("awemenu-item")},t.prototype.listenRemoveObject=function(t,i,n){if("sort"!==n.action){var a=t.get("content");a instanceof o&&a.length&&this.getAllMenuAndChildren(t),AweBuilderSettings.listDeletedMenus.push(t.get("mid"))}e.prototype.listenRemoveObject.call(this,t,i,n)},t.prototype.getAllMenuAndChildren=function(e){var t=e.get("content"),i=this;jQuery(t.models).each(function(e,t){var n=t.get("content");n instanceof o&&n.length&&i.getAllMenuAndChildren(t),AweBuilderSettings.listDeletedMenus.push(t.get("mid"))})},t}(e.ContentObjectsView);e.MenusView=s}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){e.DEFAULT_SETTINGS_MENU_BOX={main:{type:"standard",skin:"default",skin_color:"color-1",direction:"ltr",trigger_override:"hover",enable_sticky:!1,sticky_offset:0,show_scroll_up:!1,hover_time:0,animation_type:"fadeup",animation_duration:300,enable_arrow_desktop:!0,enable_mobile:!1,m_type:"standard",mobile_animation_duration:500,responsive_width:768,enable_arrow_mobile:!0,mobile_trigger:"click"},menu_bar:{container:"nav",fullwidth:!1,menubar_width:1170},top_items:{text_align:"default",item_type:"text-only"},mega_submenu:{fullwidth:!0,mega_width:600,set_height:"auto",mega_height:400},flyout_submenu:{dropdown_width:250,text_align:"default",item_type:"text-only"}};var t={default:["awemenu_standard","awemenu_left_right","awemenu_outleft_outright","awemenu-fullscreen"],classic:["awemenu_standard","awemenu_left_right","awemenu_outleft_outright","awemenu-fullscreen"]},i={addCSSFiles:function(t){jQuery.each(t,function(){var t=jQuery('<link type="text/css" rel="stylesheet" href=""/>');t.attr("href",this),e._jQuery("head").append(t)})},addJSFiles:function(t,i,n){jQuery.each(t,function(){var t=jQuery('<script type="text/javascript" rel="stylesheet" src=""><\/script>');t.attr("src",this),e._jQuery("head").append(t)})}},n=function(i){function n(n){this.listSkinFiles={},this.listSkin={default:"Default",classic:"Classic"};var a=AweBuilderSettings.skinURL||"libraries/awemenu/themes",o=AweBuilderSettings.megamenuSkin,s=this;if(o&&o.data)for(var l in o.data)this.listSkin[l]=o.data[l].name;var r=function(e){if(s.listSkinFiles[e]={skin:[],color:[]},jQuery.inArray(e,["default","classic"])>=0){jQuery(t[e]).each(function(){s.listSkinFiles[e].skin.push(a+"/"+e+"/"+this+".css")});for(var i=1;i<=8;i++)s.listSkinFiles[e].color[i]=a+"/"+e+"/colors/color-"+i+".css"}else jQuery(o.data[e].skin).each(function(){s.listSkinFiles[e].skin.push("/"+o.skinURL+"/"+this)}),o.data[e].color&&jQuery(o.data[e].color).each(function(t,i){s.listSkinFiles[e].color[t+1]="/"+o.skinURL+"/"+i})};for(var l in this.listSkin)r(l);var c=e.ContentObject.generateObjectSettings("menubox",{main:{title:"Menu settings",animation:!1,style:!1,settings:{type:{type:"select",title:"Menu type",inlineTitle:!0,options:{standard:"Standard",top:"Top",bottom:"Bottom",left:"Left",right:"Right",outleft:"Outleft",outright:"Outright"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"standard"},skin:{type:"select",title:"Menu skin",inlineTitle:!0,options:this.listSkin,customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"default"},skin_color:{type:"select",title:"Skin color",inlineTitle:!0,options:{1:"Color 1",2:"Color 2",3:"Color 3",4:"Color 4",5:"Color 5",6:"Color 6",7:"Color 7",8:"Color 8"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"color-1"},trigger_override:{type:"select",title:"Trigger",inlineTitle:!0,options:{click:"Click",hover:"Hover",toggle:"Toggle"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"hover",change:function(e,t,i,n){"hover"==i.current?jQuery(".el-hover_time",e).show():jQuery(".el-hover_time",e).hide()}},hover_time:{type:"ranger",title:"Hover delay",min:0,max:2e3,unit:"ms",widthNumber:2,defaultValue:0,devices:!1},enable_sticky:{type:"toggle",title:"Enable sticky",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){i.current?jQuery(".el-sticky_offset, .el-show_scroll_up",e).show():jQuery(".el-sticky_offset, .el-show_scroll_up",e).hide()}},sticky_offset:{type:"ranger",title:"Sticky offset",min:0,max:500,step:5,unit:"px",widthNumber:2,defaultValue:0,devices:!1},show_scroll_up:{type:"toggle",title:"Only show when scroll up",defaultValue:!1,devices:!1,inlineTitle:!0},enable_arrow_desktop:{type:"toggle",title:"Enable arrow for desktop",defaultValue:!0,devices:!1,inlineTitle:!0},animation_type:{type:"select",title:"Animation",inlineTitle:!0,options:{none:"None",fade:"Fade",fadeup:"Fade Up",fadedown:"Fade Down",fadeleft:"Fade Left",faderight:"Fade Right",fadeskew:"Fade skew",zoom:"Zoom",rotateupleft:"Rotate Left",rotateupright:"Rotate Right",flipx:"FlipX",flipy:"FlipY",flipyright:"FlipY Right",flipyleft:"FlipY Left",slideleft:"Slide Left",slideright:"Slide Right",scaleup:"Scale Up"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"fadeup"},animation_duration:{type:"ranger",title:"Duration",min:0,max:2e3,step:10,unit:"ms",widthNumber:2,defaultValue:300,devices:!1},enable_mobile:{type:"toggle",title:"Enable mobile menu",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){i.current?jQuery(".el-mobile_region",e).show():jQuery(".el-mobile_region",e).hide()}},mobile_region:{type:"group",title:"Mobile settings",useParentKey:!0,elements:{m_type:{type:"select",title:"Mobile type",inlineTitle:!0,options:{standard:"Standard",top:"Top",bottom:"Bottom"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"standard"},responsive_width:{type:"ranger",title:"Responsive width",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:768,devices:!1},mobile_trigger:{type:"select",title:"Trigger",inlineTitle:!0,options:{click:"Click",hover:"Hover",toggle:"Toggle"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"click"},enable_arrow_mobile:{type:"toggle",title:"Enable arrow for mobile",defaultValue:!0,devices:!1,inlineTitle:!0},mobile_animation_duration:{type:"ranger",title:"Effect duration",min:0,max:2e3,step:10,unit:"ms",widthNumber:2,defaultValue:300,devices:!1}}}}},menu_bar:{title:"Menu bar",selector:".awemenu-container",animation:!1,style:{enabled:["font","background","border","padding","margin"],status:["normal"]},settings:{container:{type:"select",title:"Container tag",inlineTitle:!0,options:{nav:"nav",div:"div"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"nav"},fullwidth:{type:"toggle",title:"Full width",defaultValue:!1,devices:!1,inlineTitle:!0,change:function(e,t,i,n){i.current?jQuery(".el-menubar_width",e).hide():jQuery(".el-menubar_width",e).show()}},menubar_width:{type:"ranger",title:"Menubar width",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:1170,devices:!1}}},top_items:{title:"Top items",selector:"ul.awemenu > .awemenu-item > a",animation:!1,style:{enabled:["font","background","border","padding","margin"],status:["normal","hover","active"]},settings:{text_align:{type:"select",title:"Item text align",inlineTitle:!0,options:{default:"Default",left:"Left",center:"Center",right:"Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"default"},item_type:{type:"select",title:"Item type",inlineTitle:!0,options:{"text-only":"Text only","icon-only":"Icon only","icon-text":"Icon + text"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"text-only"}}},mega_submenu:{title:"Mega submenu",selector:".awemenu-megamenu",animation:!1,style:{enabled:["font","background","border","padding","shadow"],status:["normal"]},settings:{fullwidth:{type:"toggle",title:"Full width",defaultValue:!0,devices:!1,inlineTitle:!0,change:function(e,t,i,n){i.current?jQuery(".el-mega_width",e).hide():jQuery(".el-mega_width",e).show()}},mega_width:{type:"ranger",title:"Width",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:600,devices:!1},set_height:{type:"select",title:"Set max height",inlineTitle:!0,options:{auto:"Auto",fixed:"Fixed",max:"Max height"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"auto",change:function(e,t,i,n){"auto"===i.current?jQuery(".el-mega_height",e).hide():jQuery(".el-mega_height",e).show()}},mega_height:{type:"ranger",title:"Height",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:400,devices:!1}}},flyout_submenu:{title:"Flyout submenu",selector:".awemenu-item .awemenu-item > a",animation:!1,style:{enabled:["font","background","border","shadow"],status:["normal","hover","active"]},settings:{dropdown_width:{type:"ranger",title:"Width",min:200,max:1500,step:10,unit:"px",widthNumber:2,defaultValue:250,devices:!1},text_align:{type:"select",title:"Item text align",inlineTitle:!0,options:{default:"Default",left:"Left",center:"Center",right:"Right"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"default"},item_type:{type:"select",title:"Item type",inlineTitle:!0,options:{"text-only":"Text only","icon-only":"Icon only","icon-text":"Icon + text"},customStyles:{".ac_panel-item-general__content":{"padding-left":"100px"}},defaultValue:"text-only"}}}});void 0===n&&(n={}),void 0===n.settings&&(n.settings=e.Element.generateDefaultCustomSettings(c)),void 0!==n.title&&"string"===jQuery.type(n.title)&&""!==n.title.trim()||(n.title="Menu Box"),this.indent=1,void 0!==n.content&&(n.content instanceof e.Menus||n.content instanceof Array)||(n.content=new e.Menus),n.defaultPart="menu_bar",n.machineName="menubox",i.call(this,n),this.get("content").setContainer(this)}return __extends(n,i),n.prototype.init=function(){AweBuilderSettings.listDeletedMenus=[]},n.prototype.createView=function(){var e=this.getSettingsAttr("menu_bar.settings.container")||"nav";this.view=new a({model:this,tagName:e})},n.prototype.getType=function(){return"menubox"},n.prototype.clone=function(){var e=this.toJSON();return e.content=this.get("content").clone(),delete e.cid,new n(e)},n.prototype.getRealSettings=function(){var t=this.getSettingsAttr("main.settings"),i=this.getSettingsAttr("menu_bar.settings"),n=this.getSettingsAttr("top_items.settings"),a=this.getSettingsAttr("mega_submenu.settings"),o=this.getSettingsAttr("flyout_submenu.settings"),s={main:{},menu_bar:{},top_items:{},mega_submenu:{},flyout_submenu:{}};return jQuery.extend(!0,s.main,e.DEFAULT_SETTINGS_MENU_BOX.main,t),jQuery.extend(!0,s.menu_bar,e.DEFAULT_SETTINGS_MENU_BOX.menu_bar,i),jQuery.extend(!0,s.top_items,e.DEFAULT_SETTINGS_MENU_BOX.top_items,n),jQuery.extend(!0,s.mega_submenu,e.DEFAULT_SETTINGS_MENU_BOX.mega_submenu,a),jQuery.extend(!0,s.flyout_submenu,e.DEFAULT_SETTINGS_MENU_BOX.flyout_submenu,o),s},n.type="menubox",n}(e.ContentObject);e.MenuBox=n;var a=function(t){function n(e){void 0!=e&&void 0!=e.tagName&&""!=e.tagName||(e.tagName="nav"),t.call(this,e)}return __extends(n,t),n.prototype.getRenderControllersData=function(){return[{name:"edit",title:this.translate("Edit"),icon:"pen"}]},n.prototype.events=function(){return jQuery.extend(!0,{},t.prototype.events.call(this),{"click .awemenu-bars":"hideShowMenu"})},n.prototype.edit=function(e){t.prototype.edit.call(this,e)},n.prototype.render=function(){t.prototype.render.call(this);var e=this.model,i=this;settings=e.getRealSettings(),menusView=e.get("content").getView().$el,navClass=["awemenu-nav","awemenu-"+settings.main.type,"awemenu-"+settings.main.skin];var n=jQuery('<div class="awemenu-container js-awemenu-container">\n                                        <div class="awemenu-bars"><span class="amm-bar"></span></div>\n                                    </div>');return this.$el.addClass(navClass.join(" ")).append(n),this.$el.find(".js-awemenu-container").append(menusView).append('<div class="clear-both"></div>'),this.$el.find(".js-awemenu-container > ul").addClass("awemenu"),this.renderBoxAction(),this.renderSettingBoxMenu(settings),setTimeout(function(){i.$el.resetAllSubmenuPosition(),"outleft"!=settings.main.type&&"outright"!=settings.main.type||i.$el.removeClass("awemenu-active")},500),this},n.prototype.renderBoxAction=function(){var t=this,i=e._jQuery,n=jQuery('<div class="awemenu-box-action">\n                                        <a class="ac-btn-action ac-btn-add js-btn-add-menu" href="#">Add menu</a>\n                                        <a class="ac-btn-action ac-btn-add js-btn-add-sub-menu" href="#">Add new submenu</a>\n                                        <a class="ac-btn-action ac-btn-add js-btn-add-sub-row" href="#">Add new row</a>\n                                    </div>'),a=setInterval(function(){i(".awemenu-nav").length&&(clearInterval(a),jQuery(n).insertBefore(t.$el),i(".js-btn-add-menu").click(function(){var t=AweBuilderSettings.contentBuilder.get("content"),i="Menu item "+(t.length+1),n=new e.Menu({title:i,level:1});n.setNavigatorPanel(AweBuilderSettings.contentBuilder.getNavigatorPanel()),n.setResponsiveMode(AweBuilderSettings.contentBuilder.responsiveMode),t.add(n)}),i(".js-btn-add-sub-menu").click(function(){if(e.activeMenuModel){var t=e.activeMenuModel,i=t.getView(),n=t.get("level");if(i.$el.find("> .awemenu-dropdown:visible").length){var a=t.get("content"),o="Menu item "+(a.length+1),s=new e.Menu({title:o,level:n+1});s.setNavigatorPanel(t.getNavigatorPanel()),s.setResponsiveMode(t.responsiveMode),a.add(s)}}}),i(".js-btn-add-sub-row").click(function(){if(e.activeMenuModel){var t=e.activeMenuModel;if(t.getView().$el.find("> .awemenu-megamenu:visible").length){var i=t.get("content"),n="Section "+(i.length+1),a=new e.Section({title:n});a.setNavigatorPanel(t.getNavigatorPanel()),a.setResponsiveMode(t.responsiveMode),i.add(a)}}}))},500)},n.prototype.renderContent=function(){},n.prototype.renderSettingBoxMenu=function(t){var i=this,n=t.main?t.main:e.DEFAULT_SETTINGS_MENU_BOX.main;for(var a in n)i.renderOneSetting(a,n[a])},n.prototype.renderOneSetting=function(t,n,a,o){if(n!=a){var s=this.model,l=this,r=s.getRealSettings(),c=e._jQuery;switch(t){case"type":a&&l.$el.removeClass("awemenu-"+a),l.$el.find("ul.awemenu").css("left",""),l.$el.addClass("awemenu-"+n),o&&l.$el.find(".awemenu-active").removeClass("awemenu-active");var d=l.$el.find(".awemenu-container");"left"===n||"right"===n?d.css("width",""):r.menu_bar.fullwidth?d.outerWidth("100%"):(d.outerWidth(r.menu_bar.menubar_width),l.renderFixStyleResponsive(r.menu_bar.menubar_width)),l.$el.find(".awemenu-invert").removeClass("awemenu-invert"),"outleft"==n||"outright"==n?this.$el.addClass("awemenu-active"):this.$el.removeClass("awemenu-active"),o&&l.$el.resetAllSubmenuPosition({active:0});break;case"skin":var u=s.getSettingsAttr("main.settings.skin_color")||e.DEFAULT_SETTINGS_MENU_BOX.main.skin_color;a&&(jQuery(this.model.listSkinFiles[a].skin).each(function(){c('link[href="'+this+'"]').remove()}),this.model.listSkinFiles[a].color[u]&&c('link[href="'+this.model.listSkinFiles[a].color[u]+'"]').remove());var p=[];jQuery(this.model.listSkinFiles[n].skin).each(function(){p.push('[href="'+this+'"]'),i.addCSSFiles([this])}),this.model.listSkinFiles[n].color[u]&&i.addCSSFiles([this.model.listSkinFiles[n].color[u]]),l.$el.removeClass("awemenu-"+a+" awemenu-"+a+"-color-"+u).addClass("awemenu-"+n+" awemenu-"+n+"-color"+u);var h=0;c(p.join(", ")).on("load",function(){h++,o&&p.length==h&&l.$el.resetAllSubmenuPosition()}).on("error",function(){h++,o&&p.length==h&&l.$el.resetAllSubmenuPosition()});break;case"skin_color":var m=r.main.skin;a&&this.model.listSkinFiles[m].color[a]&&c('link[href="'+this.model.listSkinFiles[m].color[a]+'"]').remove(),n&&this.model.listSkinFiles[m].color[n]&&(i.addCSSFiles([this.model.listSkinFiles[m].color[n]]),l.$el.removeClass("awemenu-"+m+"-color-"+a).addClass("awemenu-"+m+"-color-"+n));break;case"fullwidth":"left"===r.main.type||"right"===r.main.type?l.$el.find("> .awemenu-container ").css("width",""):n?l.$el.find("> .awemenu-container ").css("width","100%"):(l.$el.find("> .awemenu-container ").css("width",r.menu_bar.menubar_width),l.renderFixStyleResponsive(r.menu_bar.menubar_width));break;case"menubar_width":"left"===r.main.type||"right"===r.main.type?l.$el.find("> .awemenu-container ").css("width",""):r.menu_bar.fullwidth||(l.$el.find("> .awemenu-container ").css("width",n),l.renderFixStyleResponsive(n));break;case"direction":"rtl"==n?c("body").attr("dir",n):c("body").removeAttr("dir",""),l.$el.removeClass("awemenu-"+a).addClass("awemenu-"+n);break;case"container":if(o){c(".awemenu-box-action").remove(),l.model.createView();var g=l.model.getView();l.$el.before(g.$el).remove(),g.$el.addClass("ac_highlight js-active"),l.destroy()}break;case"enable_arrow_desktop":n?l.$el.find(".awemenu-arrow").show():l.$el.find(".awemenu-arrow").hide(),o&&l.$el.resetAllSubmenuPosition()}}},n.prototype.renderFixStyleResponsive=function(e){this.$el.find(".awemenu-container > style").remove();var t=parseInt(e)+"px";this.$el.find(".awemenu-container").append("<style>@media(max-width:"+t+"){.awemenu-standard .awemenu-container, .awemenu-top .awemenu-container, .awemenu-bottom .awemenu-container{width:100% !important;}}</style>")},n.prototype.renderSettingsChange=function(i,n,a,o){if(void 0!==i&&(t.prototype.renderSettingsChange.call(this,i,n,a,o),i.indexOf(".settings"))){var s=this,l=this.model,r=i.split("."),c=r.pop(),d=-1===jQuery.inArray(c,[e.RES_XS,e.RES_SM,e.RES_MD,e.RES_LG,e.RES_XL])?c:r.pop();e._jQuery;switch(d){case"classes":var u=s.model.getSettingsAttr(i,a);s.$el.removeClass(u).addClass(n);break;case"id":n?s.$el.attr("id",n):s.$el.removeAttr("id");break;default:var p=e.DEFAULT_SETTINGS_MENU_BOX[r[0]][d],h=l.getSettingsAttr(i,a);void 0===h&&(h=p),s.renderOneSetting(d,n,h,!0)}}},n.prototype.hideShowMenu=function(){this.$el.hasClass("awemenu-active")?this.$el.removeClass("awemenu-active"):this.$el.addClass("awemenu-active")},n}(e.ContentObjectView);e.MenuBoxView=a}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(t){var i={settings:{enableResize:!1,hideDefault:!0}};e.call(this,i),this.builder=t}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this,className:"ac_responsive-item"})},t.prototype.reset=function(){this.view.close()},t}(e.Panel);e.ResponsivePanel=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.renderContent=function(){var t=_.template('\n                <ul>\n                    <li class="js-device-mode active" data-tooltip="'+this.translate("Extra Large")+'" data-value="<%= exLargeValue %>">\n                        <i class="acicon acicon-desktop"></i>\n                    </li>\n                    <li class="js-device-mode" data-tooltip="'+this.translate("Large")+'" data-value="<%= largeValue %>">\n                        <i class="acicon acicon-laptop"></i>\n                    </li>\n                    <li class="js-device-mode" data-tooltip="'+this.translate("Medium")+'" data-value="<%= mediumValue %>">\n                        <i class="acicon acicon-tablet ac-tablet-rotate"></i>\n                    </li>\n                    <li class="js-device-mode" data-tooltip="'+this.translate("Small")+'" data-value="<%= smallValue %>">\n                        <i class="acicon acicon-tablet"></i>\n                    </li>\n                    <li class="js-device-mode" data-tooltip="'+this.translate("Extra Small")+'" data-value="<%= exSmallValue %>">\n                        <i class="acicon acicon-phone"></i>\n                    </li>\n                </ul>\n            '),i={exLargeValue:e.RES_XL,largeValue:e.RES_LG,mediumValue:e.RES_MD,smallValue:e.RES_SM,exSmallValue:e.RES_XS};jQuery(".js-ac-panel-body",this.$el).append(t(i)),this.$el.css({width:80,minWidth:0,height:"auto",minHeight:0})},i.prototype.events=function(){return jQuery.extend(!0,{},t.prototype.events.call(this),{"click li.js-device-mode":"onSelectResponsiveMode"})},i.prototype.onSelectResponsiveMode=function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(e.target).hasClass("js-device-mode")?jQuery(e.target):jQuery(e.target).parents(".js-device-mode"),i=jQuery(".active.js-device-mode",this.$el),n=t.attr("data-value");t.is(i)||(this.model.builder.updateResponsiveMode(n),i.removeClass("active"),t.addClass("active"))},i.prototype.close=function(e){t.prototype.close.call(this,e),jQuery("li.js-device-mode:first").trigger("click")},i}(e.PanelView);e.ResponsivePanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(t){void 0===t&&(t={}),t.settings=jQuery.extend(!0,{},t.settings,{enableResize:!1,enableDrag:!1,hideDefault:!0,position:"center",hasOverlay:!0}),e.call(this,t)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t}(e.Panel);e.ConfirmPanel=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.renderContent=function(){e.prototype.renderContent.call(this);var t=this.model.get("buttonsText"),i=t&&t.cancel?t.cancel:"Cancel",n=t&&t.submit?t.submit:"OK";jQuery(".js-ac-panel-body",this.$el).after('\n                <div class="js-ac-panel-footer ac_panel__footer--2 pd15">\n                    <div class="ac_row">\n                        <div class="ac_1_col">\n                            <div class="btn-group">\n                                <a href="#" class="js-cancel ac_btn ac_btn--2">'+this.translate(i)+'</a>\n                                <a href="#" class="js-submit js-submit-not-save ac_btn ac_btn--1">'+this.translate(n)+"</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ").addClass("ac_panel__body--normal")},t.prototype.events=function(){return jQuery.extend(!0,{},e.prototype.events.call(this),{"click a.js-cancel":"onCancel","click a.js-submit":"onSubmit"})},t.prototype.close=function(t){e.prototype.close.call(this,t);var i=this.model.get("actions");i&&i.cancel&&"function"===jQuery.type(i.cancel)&&i.cancel()},t.prototype.onCancel=function(e){e&&e.preventDefault(),this.close();var t=this.model.get("actions");t&&t.cancel&&"function"===jQuery.type(t.cancel)&&t.cancel()},t.prototype.onSubmit=function(e){e&&e.preventDefault(),this.close();var t=this.model.get("actions");t&&t.submit&&"function"===jQuery.type(t.submit)&&t.submit()},t.prototype.updateContentSize=function(){var e=jQuery(".js-ac-panel-header",this.$el).outerHeight(),t=jQuery(".js-ac-panel-body",this.$el).outerHeight(),i=jQuery(".js-ac-panel-footer",this.$el).outerHeight(),n=e+t+i+16;this.$el.css({minHeight:n,height:n})},t}(e.PanelView);e.ConfirmPanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t}(e.Abstract);e.PageTemplate=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.render()},t.prototype.render=function(){var e=this.model.toJSON(),t=jQuery('\n                    <div class="js-template-item item">\n                        <a href="#">\n                            <div class="img">\n                                <img src="'+e.cover.url+'" alt="">\n                            </div>\n                            <div class="caption">\n                                '+e.title+'\n                            </div>\n                            <textarea class="js-template-data" style="display: none"></textarea>\n                        </a>\n                    </div>\n                ');jQuery("textarea",t).val(JSON.stringify(e.data));var i=e.category?" "+e.category.trim().toLowerCase().replace(/[^a-z0-9]/,"_"):"custom";this.$el.append(t).addClass("grid-item "+i);var n=this;return this.$el.mouseenter(function(){var e=jQuery("img",this);e.height()/e.width()<.96&&e.css({top:0,transform:"none"}),n.$el.unbind("mouseenter")}),this},t}(e.AbstractView);e.PageTemplateView=i;var n=function(e){function i(i,n){void 0===n&&(n={}),n.model=t,e.call(this,i,n)}return __extends(i,e),i.prototype.initialize=function(t,i){this.categories=new Array,e.prototype.initialize.call(this,t,i),this.createView()},i.prototype.createView=function(){this.view=new a({collection:this,className:"ac_templates__grid-row"})},i.prototype.getView=function(){return this.view},i.prototype.addCategory=function(e){-1===jQuery.inArray(e,this.categories)&&this.categories.push(e)},i.prototype.getCategories=function(){return this.categories},i}(Backbone.Collection);e.PageTemplates=n;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(e){this.$categories=jQuery('\n                <ul class="js-page-templates-filter">\n                    <li><a href="#" data-filter="*" class="current">'+this.translate("Show all")+"</a></li>\n                </ul>"),this.listenTo(this.collection,"add",this.listenAddTemplate),this.listenTo(this.collection,"remove",this.listenRemoveTemplate),this.render();var t=this;jQuery(window).resize(function(){var e=jQuery(window).width(),i=jQuery(".grid-item:visible",t.$el).outerWidth(!0),n=Math.floor(e/i);e<=1440?jQuery(".js-page-templates",t.$el).width(n*i).css("margin","0 auto"):jQuery(".js-page-templates",t.$el).css({width:"",margin:""})}).trigger("resize")},t.prototype.render=function(){var e=this;return this.$el.append('<div class="js-page-templates ac_templates__grid"></div>'),this.collection.each(function(t,i){jQuery(".js-page-templates",e.$el).append(t.getView().$el)}),this.initIsotopePlugin(),this},t.prototype.initIsotopePlugin=function(e){jQuery.fn.isotope&&(e?jQuery(".js-page-templates",this.$el).isotope("reloadItems").isotope({sortBy:"original-order"}):jQuery(".js-page-templates",this.$el).isotope({itemSelector:".grid-item",layoutMode:"fitRows"}).on("arrangeComplete",function(){jQuery(window).trigger("resize")}))},t.prototype.listenAddTemplate=function(e,t,i){jQuery(".js-page-templates",this.$el).append(e.getView().$el);var n=e.get("category"),a=n?n.trim().toLowerCase().replace(/[^a-z0-9]/,"_"):"custom";0===jQuery("li."+a,this.$categories).length&&this.$categories.append('<li class="'+a+'"><a href="#" data-filter=".'+a+'">'+this.translate(n)+"</a></li>"),i.activeFilter&&"*"!==i.activeFilter&&n!==i.activeFilter&&e.getView().$el.hide(),this.initIsotopePlugin(!0)},t.prototype.listenRemoveTemplate=function(e,t,i){e.getView().$el.remove(),this.initIsotopePlugin(!0)},t.prototype.filterTemplate=function(e){jQuery.fn.isotope?jQuery(".js-page-templates",this.$el).isotope({filter:e}):"*"===e?jQuery(".js-template-item",this.$el).fadeIn(300):(jQuery(".js-page-templatess > .grid-item"+e,this.$el).fadeIn(300),jQuery(".js-page-templates > .grid-item:not("+e+")",this.$el).fadeOut(300))},t}(e.AbstractView);e.PageTemplatesView=a}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(t){function n(e){t.call(this),this.closePanelCallback=e}return __extends(n,t),n.prototype.init=function(t){this.templates=new e.PageTemplates,this.loading=!1,this.loadMore=!0,this.loadTemplates()},n.prototype.loadTemplates=function(t,i){if(!this.loading&&this.loadMore){this.loading=!0;var n=this,a={requestAction:"get",from:this.templates.length,length:12,type:"page"},o=e.prepareAjaxParamenters("templates",a);jQuery.ajax({url:o.url,type:"post",data:o.data,success:function(a){n.loading=!1;var o="object"==typeof a?a:e.parseJSON(a);o&&void 0!==o.loadMore&&void 0!==o.templates&&(n.loadMore=o.loadMore,n.templates.add(o.templates,{activeFilter:t})),i&&jQuery(document).height()<=jQuery(window).height()&&n.loadTemplates()}})}},n.prototype.getTemplates=function(){return this.templates},n.prototype.createView=function(){this.view=new i({model:this})},n.prototype.close=function(e){this.closePanelCallback(e),this.view.hide()},n.prototype.show=function(){this.view.show()},n.prototype.allTemplatesLoaded=function(){return!this.loadMore},n}(e.Abstract);e.PageTemplatePanel=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){this.render()},i.prototype.render=function(){this.$el.append('<div class="js-ptl-container ac_templates__container">\n                    <div class="js-ptl-filters ac_templates__filters">\n                        <h2 class="ac_templates__title">'+this.translate("Pick a template")+"</h2>\n                    </div>\n                </div>").addClass("js-page-template-panel ac_templates").css({display:"none",zIndex:999,minHeight:"100vh",position:"relative"});var e=this.model.getTemplates(),t=e.getView();return jQuery(".js-ptl-filters",this.$el).append(t.$categories),jQuery(".js-ptl-container",this.$el).append(t.$el),this},i.prototype.events=function(){return{"click .js-template-item > a":"onClickTemplateItem","click .js-page-templates-filter > li > a":"filterByCategory"}},i.prototype.onClickTemplateItem=function(t){t&&t.preventDefault();var i=e.parseJSON(jQuery(".js-template-data",jQuery(t.target).parents("a:first")).val());this.model.close(i)},i.prototype.filterByCategory=function(e){if(e.preventDefault(),!jQuery(e.target).hasClass("current")){jQuery(".js-page-templates-filter a.current").removeClass("current"),jQuery(e.target).addClass("current");var t=jQuery(e.target).attr("data-filter");this.model.getTemplates().getView().filterTemplate(t),"*"!==t&&this.model.loadTemplates(t,!0)}},i.prototype.show=function(){if(this.$el.show(),jQuery(window).bind("scroll",jQuery.proxy(this.onWindowScroll,this)),void 0===this.stickyPosition){var e,t=this;e=setInterval(function(){if(t.$el.is(":visible")){clearInterval(e);var i=jQuery(".js-page-templates-filter",t.$el);t.stickyPosition=i.height()+i.offset().top}},100)}},i.prototype.hide=function(){this.$el.hide(),jQuery(window).unbind("scroll",jQuery.proxy(this.onWindowScroll,this))},i.prototype.onWindowScroll=function(){var e=jQuery(window).scrollTop(),t=jQuery(window).height(),i=jQuery(document).height(),n=this.model;!n.allTemplatesLoaded()&&t+e>i-20&&n.loadTemplates(),e>=this.stickyPosition?jQuery(".ac_templates__filters",this.$el).addClass("ac_templates__filters--sticky"):jQuery(".ac_templates__filters",this.$el).removeClass("ac_templates__filters--sticky")},i}(e.AbstractView);e.PageTemplatePanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(e){var t=function(e){function t(){var t={title:"Choose icon",settings:{enableResize:!1,enableDrag:!0,hideDefault:!0}};e.call(this,t)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t.prototype.setActiveModel=function(e,t,i){this.selector=t,this.activeModel=e,this.view.open(void 0,i)},t.prototype.getActiveModel=function(){return this.activeModel},t.prototype.setIcon=function(e){this.selector&&this.activeModel&&this.activeModel.setSettingsAttr(this.selector,e)},t.prototype.getIcon=function(){var e="";return this.selector&&this.activeModel&&(e=this.activeModel.getSettingsAttr(this.selector)),e},t}(e.Panel);e.IconSettingPanel=t;var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.initialize=function(){var i=this,n={icon:{type:"icon",title:"Choose icon",showTabsOnly:!0,defaultValue:"",change:function(e,t,n){i.onIconChange(n)}}};this.form=new e.AweForm(n),t.prototype.initialize.call(this)},i.prototype.renderContent=function(){jQuery(".js-ac-panel-body",this.$el).append(this.form.$el.addClass("pd15")),jQuery(".js-panel-inner",this.$el).append('\n                <div class="js-ac_panel__footer ac_panel__footer" style="margin-top: 0;">\n                    <div class="js-btn-group btn-group" style="width: 210px; float: none">\n                        <a href="#" class="ac_btn js-btn-cancel ac_btn--2">'+this.translate("Cancel")+'</a>\n                        <a href="#" class="ac_btn js-btn-choose ac_btn--1 ac_disable">'+this.translate("Choose")+"</a>\n                    </div>\n                </div>\n            "),this.$el.height(330).css("min-height",330);var e=this;jQuery(".js-btn-group > a",this.el).click(function(t){t.preventDefault(),jQuery(this).hasClass("js-btn-cancel")&&e.model.setIcon(e.beforeChangeIcon),e.close()})},i.prototype.open=function(e,i){this.beforeChangeIcon=this.model.getIcon(),jQuery(".js-icon-item.active",this.el).removeClass("active"),jQuery(".js-icon-item > i."+this.beforeChangeIcon.split(" ").join(".")+":first",this.el).parent().addClass("active"),t.prototype.open.call(this,e,!0)},i.prototype.close=function(e){e&&this.model.setIcon(this.beforeChangeIcon),t.prototype.close.call(this,e)},i.prototype.onIconChange=function(e){jQuery(".js-btn-choose",this.$el).removeClass("ac_disable"),this.model.setIcon(e.current)},i}(e.PanelView);e.IconSettingPanelView=i}(AweBuilder||(AweBuilder={}));var AweBuilder;!function(AweBuilder){var Builder=function(){function Builder(e){this.panels={},this.content=[],this.elementsLoaded=!1,this.allowBuildFromTemplate=!0,this.changed=!1;var t=jQuery(window).height(),i=jQuery(window).width();(t<570||i<1200)&&alert(window.aweTranslate("Sorry, Your browser size is too small, please try to increase to make Awecontent work.")),this.panels={},this.settings=window.AweBuilderSettings.settings,this.prepareProperties(e)}return Builder.prototype.prepareProperties=function(e){if(this.contentClass=e.contentClass?e.contentClass:"Sections",e.content){switch(typeof e.content){case"string":this.content=AweBuilder.parseJSON(e.content);break;case"object":this.content=e.content;break;case"undefined":this.content={};break;default:throw Error("AweBuilder does not support content option with type '"+jQuery.type(e.content)+"'")}("array"===jQuery.type(this.content)&&this.content.length>0||Object.keys(this.content).length>0)&&(this.allowBuildFromTemplate=!1)}e.templateMode&&void 0!==e.templateMode.data&&(this.content=e.templateMode.data),this.$wrapper="string"===jQuery.type(e.wrapper)?jQuery(e.wrapper):e.wrapper,0===this.$wrapper.length&&(jQuery("body").append('<div class="js-awecontent-wrapper"/>'),this.$wrapper=jQuery(".js-awecontent-wrapper")),this.$wrapper.addClass("awecontent-wrapper").hide(),this.settings&&this.settings.showTooltips&&this.$wrapper.addClass("ac_enable-tooltip"),e&&"function"==typeof e.onClose&&(this.onClose=e.onClose),e&&"function"==typeof e.onReady&&(this.onReady=e.onReady),this.options=e;var t=e.buildButtons?e.buildButtons:void 0;this.renderToolbar(t)},Builder.prototype.initPanels=function(){if(0===Object.keys(this.panels).length){jQuery("body").append('<div class="js-ac-spcontainers"></div>'),this.initMediaPanel(),this.initResponsivePanel(),this.initCloseConfirmPanel(),this.initElementsPanel(),this.initSaveTemplatePanel(),this.initNavigatorPanel(this.content),this.initIconSettingPanel(),this.initSettingsPanel();var e=this;jQuery.map(this.panels,function(t,i){t.setBuilder(e);var n=t.getView();e.$wrapper.append(n.$el)})}else this.panels.navigator.setElements(this.content),this.panels.responsive.reset()},Builder.prototype.initMediaPanel=function(){this.panels.media=new AweBuilder.MediaPanel},Builder.prototype.initResponsivePanel=function(){this.panels.responsive=new AweBuilder.ResponsivePanel(this)},Builder.prototype.initElementsPanel=function(){var e=[],t=this.options.templateMode&&"section"===this.options.templateMode.type;jQuery.map(window.AweBuilderSettings.elements,function(t,i){t.machineName=i,e.push(t)}),this.panels.elements=new AweBuilder.ElementPanel(e,t)},Builder.prototype.initNavigatorPanel=function(e){this.panels.navigator=new AweBuilder.NavigatorPanel(e,this.panels.media.getView())},Builder.prototype.initSaveTemplatePanel=function(){this.panels.save=new AweBuilder.SaveTemplatePanel},Builder.prototype.initCloseConfirmPanel=function(){var e=this;this.panels.close=new AweBuilder.ConfirmPanel({title:"AweContent",content:'<div class="ac_row pd15 fz16">'+window.aweTranslate("All changes will be lost. Are you sure?")+"</div>",actions:{submit:function(){e.close()}}})},Builder.prototype.initIconSettingPanel=function(){this.panels.iconSetting=new AweBuilder.IconSettingPanel},Builder.prototype.initSettingsPanel=function(){if(0===jQuery(".js-builder-settings",this.$wrapper).length){var e=this,t=_.template('\n                    \x3c!-- Builder settings --\x3e\n                    <div class="js-builder-settings ac_panel--left">\n                        <div class="js-ac-panel-header ac_panel__header">\n                            <h2 class="ac_panel__title">'+window.aweTranslate("Builder Config")+'</h2>\n                            <a href="#" class="js-ac-panel-close ac_panel__close"><i class="acicon acicon-close"></i></a>\n                        </div>\n                        <div class="ac_row">\n                            <div class="ac_1-col">\n                                <div class="js-show-grid ac_panel-item-general ac_panel-item-general--2">\n                                    <label>\n                                        <span class="ac_panel-item-general__title">'+window.aweTranslate("Show border")+'</span>\n                                        <div class="ac_panel-item-general__content">\n                                            <div class="ac_panel-item-general__content-right">\n                                                <div class="radio-icon">\n                                                    <input type="checkbox"<%if (showGrid) { %> checked<% } %>>\n                                                    <span class="radio-style"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="ac_1-col">\n                                <div class="js-show-tooltips ac_panel-item-general ac_panel-item-general--2">\n                                    <label>\n                                        <span class="ac_panel-item-general__title">'+window.aweTranslate("Show tooltips")+'</span>\n                                        <div class="ac_panel-item-general__content">\n                                            <div class="ac_panel-item-general__content-right">\n                                                <div class="radio-icon">\n                                                    <input type="checkbox"<%if (showTooltips) { %> checked<% } %>>\n                                                    <span class="radio-style"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="ac_1-col" style="display:none;">\n                                <div class="ac_panel-item-general ac_panel-item-general--2">\n                                    <label>\n                                        <span class="ac_panel-item-general__title">'+window.aweTranslate("Custom CSS")+'</span>\n                                        <div class="ac_panel-item-general__content">\n                                            <div class="ac_panel-item-general__content-right">\n                                                <i class="acicon acicon-pen" title="edit"></i>\n                                                <div class="radio-icon">\n                                                    <input type="checkbox"<%if (customCss.enable) { %> checked<% } %>>\n                                                    <span class="radio-style"></span>\n                                                </div>\n                                                <textarea class="js-custom-css" style="display: none"><%= customCss.style %></textarea>\n                                            </div>\n                                        </div>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!-- /Builder settings --\x3e');this.$wrapper.prepend(t(this.settings)),jQuery(".js-config-btn",this.$wrapper).click(function(e){e.preventDefault(),jQuery(".js-builder-settings",this.$wrapper).toggleClass("active")}),jQuery(".js-show-grid input",this.$wrapper).change(function(t){var i=jQuery("iframe",e.$wrapper).contents().find(".js-ac-page-wrapper");jQuery(this).is(":checked")?i.addClass("ac_guides"):i.removeClass("ac_guides"),t.isTrigger||(e.settings.showGrid=jQuery(this).is(":checked"))}),jQuery(".js-show-tooltips input",this.$wrapper).change(function(t){jQuery(this).is(":checked")?e.$wrapper.addClass("ac_enable-tooltip"):e.$wrapper.removeClass("ac_enable-tooltip"),t.isTrigger||(e.settings.showTooltips=jQuery(this).is(":checked"))}),jQuery(".js-builder-settings .js-ac-panel-close",this.$wrapper).click(function(e){e.preventDefault(),jQuery(".js-builder-settings",this.$wrapper).removeClass("active")})}},Builder.prototype.initBuildButtons=function(e){var t=this,i=!0;e&&void 0!==e.defaultButton&&(this.$buildBtn=e.defaultButton,"string"===jQuery.type(e.defaultButton)&&jQuery(e.defaultButton).length>0&&(this.$buildBtn=jQuery(e.defaultButton)),i=!1),e&&void 0!==e.fromTemplateButton&&(this.$buildFromTemplateBtn=e.fromTemplateButton,"string"===jQuery.type(e.fromTemplateButton)&&jQuery(e.fromTemplateButton).length>0&&(this.$buildFromTemplateBtn=jQuery(e.fromTemplateButton)),i=!1),i&&this.renderDefaultEditButtons(),this.$buildBtn&&this.$buildBtn.click(function(e){e.preventDefault(),t.options.buildButtons&&"function"==typeof t.options.buildButtons.defaultButtonClick&&t.options.buildButtons.defaultButtonClick(t),t.pageTemplatesPanel&&t.pageTemplatesPanel.getView().$el.hide(),t.open()}),this.$buildFromTemplateBtn&&(this.allowBuildFromTemplate?this.$buildFromTemplateBtn.click(function(e){e.preventDefault(),t.options.buildButtons&&"function"==typeof t.options.buildButtons.fromTemplateButtonClick&&t.options.buildButtons.fromTemplateButtonClick(t),t.pageTemplatesPanel||(t.pageTemplatesPanel=new AweBuilder.PageTemplatePanel(function(e){e&&(t.content=e),t.open()}),t.$wrapper.append(t.pageTemplatesPanel.getView().$el)),t.pageTemplatesPanel.show(),t.$wrapper.show()}):this.hideBuildFromTemplateButton())},Builder.prototype.initBuilder=function(){this.initPanels(),this.renderElementToolbar(),this.$iframe=jQuery(".js-ac-buildzone > iframe",this.$wrapper),this.$iframe.contents().find(".js-ac-page-wrapper").append(this.content.getView().$el);var e=this;this.$iframe.contents().click(function(e){jQuery(document).trigger("click")}),this.$buildBtn&&this.$buildBtn.hide(),this.$buildFromTemplateBtn&&this.$buildFromTemplateBtn.hide(),this.$buildBtn&&this.$buildFromTemplateBtn&&this.$buildBtn.parent().is(this.$buildFromTemplateBtn)&&this.$buildFromTemplateBtn.parent().hide(),jQuery(".js-toolbar-buttons",this.$wrapper).show(),e.content.setNavigatorPanel(e.panels.navigator),e.panels.elements.getView().open(),this.initBuilderSettings(),setTimeout(function(){jQuery(".js-ac-preloader",this.$wrapper).fadeOut(500,function(){jQuery(this).remove()})},2e3)},Builder.prototype.renderDefaultEditButtons=function(){var e='\n                <div class="js-ac-build-toolbar ac_toolbar">\n                    <div class="js-build-buttons ac_toolbar__group">\n                        <a class="js-default-btn ac_toolbar__button" href="#" data-tooltip="'+window.aweTranslate("Edit")+'">\n                            <i class="acicon acicon-pen"></i>\n                        </a>\n                        <a class="js-from-template-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Page templates")+'">\n                            <i class="acicon acicon-template"></i>\n                        </a>\n                    </div>\n                </div>\n                ';0===jQuery(".js-build-buttons").length&&jQuery("body").append(e),this.$buildBtn=jQuery(".js-build-buttons > .js-default-btn"),this.$buildFromTemplateBtn=jQuery(".js-build-buttons > .js-from-template-btn")},Builder.prototype.renderToolbar=function(e){if(!jQuery(".js-ac-toolbar",this.$wrapper).length){var t=_.template('\n                    \x3c!-- Awe toolbar --\x3e\n                    <div class="js-ac-toolbar ac_toolbar">\n                        <div class="js-toolbar-buttons ac_toolbar__group" style="display: none">\n                            <a class="js-elements-tab js-toolbar-btn ac_toolbar__button" href="#" data-action="elements.1" data-tooltip="'+window.aweTranslate("Elements")+'">\n                                <i class="acicon acicon-element"></i>\n                            </a>\n                            <div class="ac_toolbar__group-button">\n                                <a class="js-toolbar-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Navigator")+'" data-action="navigator.0">\n                                    <i class="acicon acicon-bar"></i>\n                                </a>\n                                <a class="js-toolbar-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Responsive")+'" data-action="responsive">\n                                    <i class="acicon acicon-responsive"></i>\n                                </a>\n                            </div>\n                            <div class="js-elements-tabs ac_toolbar__group-button"></div>\n                            <div class="ac_toolbar__group-button">\n                                <a class="js-save-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Save")+'" data-action="save">\n                                    <i class="acicon acicon-save"></i>\n                                </a>\n                                <% if (isBuildMode) { %>\n                                <a class="js-save-page-tpl-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Save as page template")+'" data-action="save-page-template">\n                                    <i class="acicon acicon-template"></i>\n                                </a>\n                                <% } %>\n                                <a class="js-close-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Close without saving")+'">\n                                    <i class="acicon acicon-close"></i>\n                                </a>\n                                <a class="js-config-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Builder settings")+'" data-action="navigator.3">\n                                    <i class="acicon acicon-tools"></i>\n                                </a>\n                                <a class="js-help-btn ac_toolbar__button ac_toolbar__hover" href="#" data-tooltip="'+window.aweTranslate("Help")+'">\n                                    <i class="acicon acicon-help"></i>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!-- End / Awe toolbar --\x3e\n                ');this.$wrapper.prepend(t({isBuildMode:!this.options.templateMode})),this.initBuildButtons(e)}},Builder.prototype.renderElementToolbar=function(){if(!jQuery(".js-elements-tabs",this.$wrapper).data("initialized")){var e=this,t=_.template('\n                        <a class="js-toolbar-btn ac_toolbar__button ac_toolbar__hover"\n                         href="#" data-tooltip="<%= title %>" data-action="elements.<%= index %>">\n                            <%= icon %>\n                        </a>');this.panels.elements.get("content").get("content").each(function(i,n){var a=i.get("title"),o=i.get("headerHTML");jQuery(".js-elements-tabs",e.$wrapper).append(t({title:a,icon:o,index:i.cid})),i instanceof AweBuilder.ElementControllersTab&&jQuery("a.js-elements-tab",e.$wrapper).attr("data-action","elements."+i.cid)}),this.initToolbar(),jQuery(".js-elements-tabs",e.$wrapper).data("initialized",!0)}},Builder.prototype.initToolbar=function(){var e=this;jQuery(".js-toolbar-btn",this.$wrapper).click(function(t){t.preventDefault();var i=jQuery(this).attr("data-action"),n=i.split("."),a=void 0!==n[1]?n[1]:0,o=e.panels[n[0]];if(o){var s=o.getView();s.activateTab&&("string"!=typeof a||isNaN(parseInt(a))||(a=parseInt(a)),s.activateTab(a)),s.open()}}),jQuery(".js-save-btn",this.$wrapper).click(function(t){t.preventDefault();var i=JSON.stringify(e.content);if(jQuery('<textarea class="js-store-builder" style="display: none" />').val(i),e.options.templateMode){var n=jQuery.extend(!0,{},e.options.templateMode,{data:e.content});e.panels.save.getView().saveTemplate(n,function(t){e.close(t)})}else{var a=AweBuilder.prepareAjaxParamenters("save",{data:i});a&&jQuery.post(a.url,a.data),e.close(i),e.hideBuildFromTemplateButton()}}),e.options.templateMode||jQuery(".js-save-page-tpl-btn",this.$wrapper).click(function(t){t.preventDefault();var i={type:"page",id:-1,title:"",data:e.content,cover:{fid:-1,url:""}};e.panels.save.getView().saveTemplate(i)}),jQuery(".js-close-btn",this.$wrapper).click(function(t){t.preventDefault(),e.panels.close.getView().open()})},Builder.prototype.initBuilderSettings=function(){jQuery(".js-show-tooltips input, .js-show-grid input",this.$wrapper).trigger("change")},Builder.prototype.updateResponsiveMode=function(e){jQuery(".js-ac-buildzone",this.$wrapper).width(AweBuilder.DEVICES_SIZE[e]).attr("data-breakpoint-info",AweBuilder.DEVICES_SIZE[e]+"px"),this.panels.navigator.setResponsiveMode(e),this.panels.elements.setResponsiveMode(e)},Builder.prototype.enableReloadAlert=function(){null===window.onbeforeunload&&(window.onbeforeunload=function(e){var t=window.aweTranslate("All changes in builder will be lost permanently. Do you really want to close?");return e.returnValue=t,t})},Builder.prototype.open=function(){var _self=this;_self.$wrapper.prepend('\n                <div class="js-ac-preloader ac_preloader">\n                    <svg height="200" width="200" viewBox="0 0 400 400">\n                        <defs>\n                            <circle id="circle-preload" cx="30" cy="30" r="30" fill="transparent" />\n                        </defs>\n                        <use class="iconload" xlink:href="#circle-preload" x="170" y="170"></use>\n                    </svg>\n                </div>\n            ').removeAttr("style"),jQuery(".js-ac-buildzone",_self.$wrapper).remove(),_self.$wrapper.append('\n                <div class="js-ac-buildzone awecontent-buildzone">\n                    <iframe src="'+window.AweBuilderSettings.URLs.buildPage+'" />\n                </div>\n            '),jQuery(".js-ac-buildzone > iframe",_self.$wrapper).on("load",function(){if(AweBuilder._jQuery=AweBuilder._$=this.contentWindow.jQuery,AweBuilder._window=this.contentWindow,_self.getElementsInfo(),void 0!==window.AweBuilderSettings.libraries.fontIcons&&window.AweBuilderSettings.libraries.fontIcons.ready){var e=window.AweBuilderSettings.libraries.fontIcons.data,t={};jQuery.map(e,function(e,i){e&&jQuery.isArray(e.files)&&jQuery.each(e.files,function(e,i){t[i]={type:AweBuilder.CSS_FILE,destination:["frontend"]}})}),AweBuilder.addLibraries(t)}}),this.$wrapper.bind("elementsLoaded",function(){if(!(_self.content instanceof AweBuilder.ContentObject||_self.content instanceof AweBuilder.ContentObjects)){var contentClass=_self.options&&_self.options.contentClass?_self.options.contentClass:"Sections";try{_self.content=eval("new AweBuilder."+contentClass+"(_self.content)"),AweBuilderSettings.contentBuilder=_self.content}catch(e){throw e}}_self.initBuilder(),_self.onReady&&_self.onReady(_self.$iframe)})},Builder.prototype.close=function(e){AweBuilder._jQuery(AweBuilder._window.document).trigger("builderBeforeClose"),"function"==typeof this.onClose&&this.onClose(e),this.reset()},Builder.prototype.reset=function(){function e(){var e=jQuery.extend(!0,{},window.AweBuilderSettings.elementTabs);window.AweBuilderSettings.elementTabs={},window.AweBuilderSettings.elements={},jQuery.each(e,function(){jQuery.aweBuilderTabElement(this)})}jQuery.each(window.AweBuilderSettings.elementsScript,function(){jQuery(this).remove()}),window.AweBuilderSettings.elementsScript=[],window.AweBuilderSettings.cachedSettings={},window.AweBuilderSettings.settingForms={},e(),this.content=AweBuilder.parseJSON(JSON.stringify(this.content)),this.$wrapper.hide(),window.onbeforeunload=null,this.$buildBtn&&this.$buildBtn.removeAttr("style"),this.$buildFromTemplateBtn&&this.allowBuildFromTemplate&&this.$buildFromTemplateBtn.removeAttr("style"),jQuery(".js-toolbar-buttons",this.$wrapper).hide(),jQuery.map(window.AweBuilderSettings.libraries,function(e,t){e.frontend&&(e.frontend=!1)})},Builder.prototype.setOptions=function(e,t){this.options=jQuery.extend(!0,{},this.options,e),this.prepareProperties(this.options),t&&(this.close(),this.open())},Builder.prototype.getOptions=function(){return this.options},Builder.prototype.getSettings=function(){return this.settings},Builder.prototype.getBuilderIframe=function(){return this.$iframe},Builder.prototype.getPanel=function(e){return void 0!==e?this.panels[e]:this.panels},Builder.prototype.getElementsInfo=function(){var e=this,t=AweBuilder.prepareAjaxParamenters("element",{task:"getElementsInfo"});jQuery.post(t.url,t.data,function(t){var i={},n={};t&&t.elements&&(window.AweBuilderSettings.libraries=jQuery.extend(!0,{},window.AweBuilderSettings.libraries,t.libraries),jQuery.each(t.elements,function(){var e=this;if(i[e.jsFile]={destination:["backend"],type:AweBuilder.JS_FILE},e.jsTemplate&&(i[e.jsTemplate]={destination:["backend"],type:AweBuilder.JS_FILE,classes:"element-js-file"}),e.libraries){var t={};jQuery.each(e.libraries,function(e,i){t[e]=i.destination}),n[e.name]={libraries:t}}}),AweBuilder.addLibraries(i,function(t){var i=[];jQuery.each(t,function(e,t){t.type===AweBuilder.JS_FILE&&t.el&&i.push(t.el)}),window.AweBuilderSettings.elementsScript=i,window.AweBuilderSettings.elements=jQuery.extend(!0,window.AweBuilderSettings.elements,n),e.$wrapper.trigger("elementsLoaded")}),e.elementsLoaded=!0)},"json")},Builder.prototype.hideBuildFromTemplateButton=function(){this.allowBuildFromTemplate=!1,this.$buildFromTemplateBtn&&this.$buildFromTemplateBtn.hide().css({opacity:0,visible:"hidden"})},Builder}();AweBuilder.Builder=Builder}(AweBuilder||(AweBuilder={})),jQuery.fn.aweHtml=function(){var e=this.html().trim();return e&&(e=e.replace(/<div class=\"ac_bg__overlay\"><\/div>/g,"")),e};var AweBuilder;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.createView=function(){this.view=new i({model:this})},t}(e.MediaPanel);e.WPMediaPanel=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.initMediaFrame(),e.prototype.initialize.call(this)},t.prototype.initMediaFrame=function(){var e=this;this.wpMediaFrame=wp.media({title:"Choose Image",button:{text:"Choose"},multiple:this.model.getMultiple()}).on("select",function(){var t=e.wpMediaFrame.state().get("selection").first().toJSON();e.model.getMultiple()&&"array"===jQuery.type(t)?jQuery.each(t,function(e,t){t.fid=t.id}):jQuery.type(t),t.fid=t.id,e.close(null,t)})},t.prototype.open=function(e){this.initMediaFrame(),this.controller=e,this.wpMediaFrame.open()},t.prototype.renderContent=function(){},t}(e.MediaPanelView);e.WPMediaPanelView=i;var n=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype.initMediaPanel=function(){this.panels.media=new t},i}(e.Builder);e.WPBuilder=n}(AweBuilder||(AweBuilder={}));
